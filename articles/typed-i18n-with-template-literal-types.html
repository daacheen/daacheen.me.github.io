<!DOCTYPE html><html lang="zh-CN" class="scroll-smooth"><head><meta charSet="utf-8"/><link rel="stylesheet" href="/_next/static/css/dc5b98f4c3923695.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/c61fd82c0ec3c846.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/550cc6711c036586.css" data-precedence="next"/><title>react-typed-i18n: 使用Template Literal Types实现强类型的i18n - ddadaal.me</title><meta name="description" content="ddadaal&#x27;s personal website"/><link rel="manifest" href="/site.webmanifest"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="any"/><link rel="icon" href="/icon.svg?35be8e76be1c3618" type="image/svg+xml" sizes="500x500"/><link rel="apple-touch-icon" href="/apple-icon.png?5334a64f42000bb0" type="image/png" sizes="180x180"/><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" noModule=""></script></head><body class="w-full"><div class="items-center sticky z-50 w-full h-13 transition -top-[1px] bg-base-200 text-base-content"><div class="flex justify-between items-center max-w-7xl mx-auto px-4"><a class="flex items-center justify-center space-x-1" href="/"><img alt="logo" loading="lazy" width="42" height="42" decoding="async" data-nimg="1" style="color:transparent" src="/_next/static/media/logo.8f2bd5ec.svg"/><h1 class="text-sm font-bold">ddadaal.me</h1></a><div class="flex items-center gap-1"><div class="hidden lg:flex"><ul class="menu menu-horizontal"><li><a class="" href="/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 576 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"></path></svg>主页</a></li><li><a class="active" href="/articles"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 576 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M542.22 32.05c-54.8 3.11-163.72 14.43-230.96 55.59-4.64 2.84-7.27 7.89-7.27 13.17v363.87c0 11.55 12.63 18.85 23.28 13.49 69.18-34.82 169.23-44.32 218.7-46.92 16.89-.89 30.02-14.43 30.02-30.66V62.75c.01-17.71-15.35-31.74-33.77-30.7zM264.73 87.64C197.5 46.48 88.58 35.17 33.78 32.05 15.36 31.01 0 45.04 0 62.75V400.6c0 16.24 13.13 29.78 30.02 30.66 49.49 2.6 149.59 12.11 218.77 46.95 10.62 5.35 23.21-1.94 23.21-13.46V100.63c0-5.29-2.62-10.14-7.27-12.99z"></path></svg>文章</a></li><li><details><summary class=""><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 384 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm160-14.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"></path></svg>简历</summary><ul class="shadow bg-base-200 text-base-content"><li><a class="" href="/resume/cn">🇨🇳 <!-- -->简体中文</a></li><li><a class="" href="/resume/en">🇺🇸 <!-- -->English</a></li></ul></details></li><li><a class="" href="/slides"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M187.7 153.7c-34 0-61.7 25.7-61.7 57.7 0 31.7 27.7 57.7 61.7 57.7s61.7-26 61.7-57.7c0-32-27.7-57.7-61.7-57.7zm143.4 0c-34 0-61.7 25.7-61.7 57.7 0 31.7 27.7 57.7 61.7 57.7 34.3 0 61.7-26 61.7-57.7.1-32-27.4-57.7-61.7-57.7zm156.6 90l-6 4.3V49.7c0-27.4-20.6-49.7-46-49.7H76.6c-25.4 0-46 22.3-46 49.7V248c-2-1.4-4.3-2.9-6.3-4.3-15.1-10.6-25.1 4-16 17.7 18.3 22.6 53.1 50.3 106.3 72C58.3 525.1 252 555.7 248.9 457.5c0-.7.3-56.6.3-96.6 5.1 1.1 9.4 2.3 13.7 3.1 0 39.7.3 92.8.3 93.5-3.1 98.3 190.6 67.7 134.3-124 53.1-21.7 88-49.4 106.3-72 9.1-13.8-.9-28.3-16.1-17.8zm-30.5 19.2c-68.9 37.4-128.3 31.1-160.6 29.7-23.7-.9-32.6 9.1-33.7 24.9-10.3-7.7-18.6-15.5-20.3-17.1-5.1-5.4-13.7-8-27.1-7.7-31.7 1.1-89.7 7.4-157.4-28V72.3c0-34.9 8.9-45.7 40.6-45.7h317.7c30.3 0 40.9 12.9 40.9 45.7v190.6z"></path></svg>幻灯片</a></li><li><details><summary class=""><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 192 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M20 424.229h20V279.771H20c-11.046 0-20-8.954-20-20V212c0-11.046 8.954-20 20-20h112c11.046 0 20 8.954 20 20v212.229h20c11.046 0 20 8.954 20 20V492c0 11.046-8.954 20-20 20H20c-11.046 0-20-8.954-20-20v-47.771c0-11.046 8.954-20 20-20zM96 0C56.235 0 24 32.235 24 72s32.235 72 72 72 72-32.235 72-72S135.764 0 96 0z"></path></svg>关于</summary><ul class="shadow bg-base-200 text-base-content"><li><a class="" href="/about/odyssey"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 576 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M542.22 32.05c-54.8 3.11-163.72 14.43-230.96 55.59-4.64 2.84-7.27 7.89-7.27 13.17v363.87c0 11.55 12.63 18.85 23.28 13.49 69.18-34.82 169.23-44.32 218.7-46.92 16.89-.89 30.02-14.43 30.02-30.66V62.75c.01-17.71-15.35-31.74-33.77-30.7zM264.73 87.64C197.5 46.48 88.58 35.17 33.78 32.05 15.36 31.01 0 45.04 0 62.75V400.6c0 16.24 13.13 29.78 30.02 30.66 49.49 2.6 149.59 12.11 218.77 46.95 10.62 5.35 23.21-1.94 23.21-13.46V100.63c0-5.29-2.62-10.14-7.27-12.99z"></path></svg>一个个人博客的史诗</a></li><li><a class="" href="/about/project"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"></path></svg>关于网站</a></li><li><a class="" href="/about/me"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 192 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M96 0c35.346 0 64 28.654 64 64s-28.654 64-64 64-64-28.654-64-64S60.654 0 96 0m48 144h-11.36c-22.711 10.443-49.59 10.894-73.28 0H48c-26.51 0-48 21.49-48 48v136c0 13.255 10.745 24 24 24h16v136c0 13.255 10.745 24 24 24h64c13.255 0 24-10.745 24-24V352h16c13.255 0 24-10.745 24-24V192c0-26.51-21.49-48-48-48z"></path></svg>关于我</a></li></ul></details></li></ul></div><div class="dropdown dropdown-end"><label tabindex="0" class="btn"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 256c0 136.966 111.033 248 248 248s248-111.034 248-248S392.966 8 256 8 8 119.033 8 256zm248 184V72c101.705 0 184 82.311 184 184 0 101.705-82.311 184-184 184z"></path></svg><span class="hidden sm:block">自动</span></label><ul tabindex="0" class="dropdown-content menu p-2 bg-base-200 text-base-content shadow rounded-box w-52"><li><a class="justify-between">自动</a></li><li><a class="justify-between">明亮</a></li><li><a class="justify-between">暗色</a></li><li><a class="justify-between">杯子蛋糕</a></li><li><a class="justify-between">大黄蜂</a></li><li><a class="justify-between">白色商务</a></li><li><a class="justify-between">黑色商务</a></li><li><a class="justify-between">金色奢华</a></li><li><a class="justify-between">夏日柠檬</a></li><li><a class="justify-between">绿野仙踪</a></li><li><a class="justify-between">复古</a></li><li><a class="justify-between">粉色浪漫</a></li><li><a class="justify-between">赛博朋克</a></li></ul></div><div class="dropdown dropdown-end"><label tabindex="0" class="btn">🇨🇳 <span class="hidden sm:block">简体中文</span></label><ul tabindex="0" class="dropdown-content menu p-2 shadow bg-base-200 rounded-box w-52 text-base-content"><li><a class="justify-between">🇨🇳 <!-- -->简体中文</a></li><li><a class="justify-between">🇺🇸 <!-- -->English</a></li></ul></div><div class="dropdown dropdown-end lg:hidden"><label tabindex="0" class="btn btn-ghost"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"></path></svg></label><ul tabindex="0" class="menu menu-compact dropdown-content mt-3 p-2 shadow rounded-box bg-base-200 text-base-content "><li><a class="" href="/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 576 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"></path></svg>主页</a></li><li><a class="active" href="/articles"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 576 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M542.22 32.05c-54.8 3.11-163.72 14.43-230.96 55.59-4.64 2.84-7.27 7.89-7.27 13.17v363.87c0 11.55 12.63 18.85 23.28 13.49 69.18-34.82 169.23-44.32 218.7-46.92 16.89-.89 30.02-14.43 30.02-30.66V62.75c.01-17.71-15.35-31.74-33.77-30.7zM264.73 87.64C197.5 46.48 88.58 35.17 33.78 32.05 15.36 31.01 0 45.04 0 62.75V400.6c0 16.24 13.13 29.78 30.02 30.66 49.49 2.6 149.59 12.11 218.77 46.95 10.62 5.35 23.21-1.94 23.21-13.46V100.63c0-5.29-2.62-10.14-7.27-12.99z"></path></svg>文章</a></li><li><a><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 384 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm160-14.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"></path></svg>简历</a><ul><li><a class="" href="/resume/cn">🇨🇳 <!-- -->简体中文</a></li><li><a class="" href="/resume/en">🇺🇸 <!-- -->English</a></li></ul></li><li><a class="" href="/slides"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M187.7 153.7c-34 0-61.7 25.7-61.7 57.7 0 31.7 27.7 57.7 61.7 57.7s61.7-26 61.7-57.7c0-32-27.7-57.7-61.7-57.7zm143.4 0c-34 0-61.7 25.7-61.7 57.7 0 31.7 27.7 57.7 61.7 57.7 34.3 0 61.7-26 61.7-57.7.1-32-27.4-57.7-61.7-57.7zm156.6 90l-6 4.3V49.7c0-27.4-20.6-49.7-46-49.7H76.6c-25.4 0-46 22.3-46 49.7V248c-2-1.4-4.3-2.9-6.3-4.3-15.1-10.6-25.1 4-16 17.7 18.3 22.6 53.1 50.3 106.3 72C58.3 525.1 252 555.7 248.9 457.5c0-.7.3-56.6.3-96.6 5.1 1.1 9.4 2.3 13.7 3.1 0 39.7.3 92.8.3 93.5-3.1 98.3 190.6 67.7 134.3-124 53.1-21.7 88-49.4 106.3-72 9.1-13.8-.9-28.3-16.1-17.8zm-30.5 19.2c-68.9 37.4-128.3 31.1-160.6 29.7-23.7-.9-32.6 9.1-33.7 24.9-10.3-7.7-18.6-15.5-20.3-17.1-5.1-5.4-13.7-8-27.1-7.7-31.7 1.1-89.7 7.4-157.4-28V72.3c0-34.9 8.9-45.7 40.6-45.7h317.7c30.3 0 40.9 12.9 40.9 45.7v190.6z"></path></svg>幻灯片</a></li><li><a><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 192 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M20 424.229h20V279.771H20c-11.046 0-20-8.954-20-20V212c0-11.046 8.954-20 20-20h112c11.046 0 20 8.954 20 20v212.229h20c11.046 0 20 8.954 20 20V492c0 11.046-8.954 20-20 20H20c-11.046 0-20-8.954-20-20v-47.771c0-11.046 8.954-20 20-20zM96 0C56.235 0 24 32.235 24 72s32.235 72 72 72 72-32.235 72-72S135.764 0 96 0z"></path></svg>关于</a><ul><li><a class="" href="/about/odyssey"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 576 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M542.22 32.05c-54.8 3.11-163.72 14.43-230.96 55.59-4.64 2.84-7.27 7.89-7.27 13.17v363.87c0 11.55 12.63 18.85 23.28 13.49 69.18-34.82 169.23-44.32 218.7-46.92 16.89-.89 30.02-14.43 30.02-30.66V62.75c.01-17.71-15.35-31.74-33.77-30.7zM264.73 87.64C197.5 46.48 88.58 35.17 33.78 32.05 15.36 31.01 0 45.04 0 62.75V400.6c0 16.24 13.13 29.78 30.02 30.66 49.49 2.6 149.59 12.11 218.77 46.95 10.62 5.35 23.21-1.94 23.21-13.46V100.63c0-5.29-2.62-10.14-7.27-12.99z"></path></svg>一个个人博客的史诗</a></li><li><a class="" href="/about/project"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"></path></svg>关于网站</a></li><li><a class="" href="/about/me"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 192 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M96 0c35.346 0 64 28.654 64 64s-28.654 64-64 64-64-28.654-64-64S60.654 0 96 0m48 144h-11.36c-22.711 10.443-49.59 10.894-73.28 0H48c-26.51 0-48 21.49-48 48v136c0 13.255 10.745 24 24 24h16v136c0 13.255 10.745 24 24 24h64c13.255 0 24-10.745 24-24V352h16c13.255 0 24-10.745 24-24V192c0-26.51-21.49-48-48-48z"></path></svg>关于我</a></li></ul></li></ul></div></div></div></div><div><article><div class="bg-neutral px-4 py-8"><div class="max-w-7xl mx-auto min-h-[256px] flex justify-center items-center text-neutral-content"><div class="flex flex-col items-center animate-slide-up"><div class="my-2"><h1 class="text-4xl">react-typed-i18n: 使用Template Literal Types实现强类型的i18n</h1></div><div class="flex flex-wrap gap-3 my-2 text-sm"><div class="flex flex-wrap gap-1 items-center"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"></path></svg><div class="badge badge-accent mx-0.5 text-accent-content">Web前端</div><div class="badge badge-accent mx-0.5 text-accent-content">代码技巧</div><div class="badge badge-accent mx-0.5 text-accent-content">TypeScript</div><div class="badge badge-accent mx-0.5 text-accent-content">我的项目</div></div><div class="flex items-center"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M12 192h424c6.6 0 12 5.4 12 12v260c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V204c0-6.6 5.4-12 12-12zm436-44v-36c0-26.5-21.5-48-48-48h-48V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H160V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H48C21.5 64 0 85.5 0 112v36c0 6.6 5.4 12 12 12h424c6.6 0 12-5.4 12-12z"></path></svg><span class="mx-0.5">2021-06-06 15:27:00 UTC+8</span></div><div class="flex items-center"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 384 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm57.1 120H305c7.7 0 13.4 7.1 11.7 14.7l-38 168c-1.2 5.5-6.1 9.3-11.7 9.3h-38c-5.5 0-10.3-3.8-11.6-9.1-25.8-103.5-20.8-81.2-25.6-110.5h-.5c-1.1 14.3-2.4 17.4-25.6 110.5-1.3 5.3-6.1 9.1-11.6 9.1H117c-5.6 0-10.5-3.9-11.7-9.4l-37.8-168c-1.7-7.5 4-14.6 11.7-14.6h24.5c5.7 0 10.7 4 11.8 9.7 15.6 78 20.1 109.5 21 122.2 1.6-10.2 7.3-32.7 29.4-122.7 1.3-5.4 6.1-9.1 11.7-9.1h29.1c5.6 0 10.4 3.8 11.7 9.2 24 100.4 28.8 124 29.6 129.4-.2-11.2-2.6-17.8 21.6-129.2 1-5.6 5.9-9.5 11.5-9.5zM384 121.9v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"></path></svg><span class="mx-0.5">3592 字</span></div><div class="flex items-center"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"></path></svg><span class="mx-0.5">18 分钟阅读</span></div><div class="flex items-center"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"></path></svg><span class="mx-0.5 space-x-1"><a class="link link-hover" href="/articles/typed-i18n-with-template-literal-types/cn">简体中文</a></span></div></div></div></div></div><div class="animate-slide-up"><div class="max-w-7xl mx-auto p-4"><div class="flex flex-row space-x-4"><div class="prose max-w-full lg:w-[75%]"><h1 id="react-typed-i18n"><a href="#react-typed-i18n" class="mr-2"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="inline-block" height="16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a>react-typed-i18n</h1>
<p>最近学习了一下TypeScript最新的<a href="https://www.typescriptlang.org/docs/handbook/2/template-literal-types.html">Template Literal Type</a>特性，突然想起来可以使用这个实现一个使用字符串字面量的i18n库，以用来替换之前的使用了一些黑魔法的<a href="https://github.com/ddadaal/simstate-i18n"><code>simstate-i18n</code></a>库，也在这个新库中解决一些技术债，例如只使用React Context、加入测试、增加一些新功能等。</p>
<p>新的库名字叫<code>react-typed-i18n</code>（<a href="https://github.com/ddadaal/react-typed-i18n">GitHub</a>）。花了一个周末将功能和测试写好发到了npm上，并很快把本网站用这个新库重写了，体验比较好。</p>
<p>于是通过此文章介绍一下i18n的概念、常见实现方式以及本库的亮点，其中介绍部分的内容使用了之前写过的关于<code>simstate-i18n</code>的文章 <a href="/articles/strongly-typed-i18n-with-typescript">Strongly Typed i18n with TypeScript</a>。要想更详细的了解一些i18n的内容以及当时写<code>simstate-i18n</code>的考虑，请查阅此文章。</p>
<h1 id="i18n"><a href="#i18n" class="mr-2"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="inline-block" height="16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a>i18n</h1>
<p>国际化，英文叫Internationalization，简称i18n（因为首尾字符i和n中间有18个字符），是指让一个软件产品能够显示按多国语言显示。</p>
<p>比如你正在访问的我的博客就是支持国际化的网站，你可以尝试在右上角的下拉框中切换不同的语言（当前只中文和英文），切换后，整个网站的将会以被选择的语言来显示。</p>
<p>国际化的核心是将网站中的所有文本元素都拿出去单独定义，然后在原本应该硬编码文本的地方，使用对所有语言都一致的元素进行代替。在编译时或者运行时，这种元素将会被替换为实际显示的语言的对应的文本元素。</p>
<p>例如说，对于这个p元素<span data-rehype-pretty-code-fragment=""><code data-language="html" data-theme="default"><span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#E06C75">p</span><span style="color:#ABB2BF">&gt;Hello World&lt;/</span><span style="color:#E06C75">p</span><span style="color:#ABB2BF">&gt;</span></span></code></span>如果我想将它支持多语言显示，那么应该做以下的工作：</p>
<ol>
<li>不能直接硬编码文本，而是应该用一个ID之类的东西（例如<code>helloWorld</code>）替代硬编码的文本</li>
<li>在其他地方，用不同的语言定义ID和文本的对应关系。例如，定义<code>helloWorld</code>对应<code>你好，世界！</code>（中文）或者<code>Hello World</code>（英文）</li>
<li>使用一个机制，在编译时或者在运行时将界面中的ID替换为当前语言的文本</li>
</ol>
<h1 id="定义id和文本的对应关系"><a href="#定义id和文本的对应关系" class="mr-2"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="inline-block" height="16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a>定义ID和文本的对应关系</h1>
<p>这种ID和文本的对应关系可以有很多种，最简单的就是<strong>KV</strong>，一个ID对应一个文本。iOS (<a href="https://medium.com/lean-localization/ios-localization-tutorial-938231f9f881">示例</a>) 和 ASP.NET Core MVC (<a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/localization?view=aspnetcore-2.2">示例</a>)其实就是这种对应关系。</p>
<p>简单的KV对应虽然很简单，但是当文本信息多起来之后，ID可能会非常长，例如：</p>
<pre><code>app.header.userIndicator.loggedIn.dropdown.login.button.text
app.header.userIndicator.loggedIn.dropdown.username.button.text
app.header.userIndicator.loggedIn.dropdown.logout.button.text
</code></pre>
<p>UI基本都是以树结构组合起来的，所以，我们也可以以树结构组织我们的ID，同一个页面、同一个组件下的文本信息组织在同一层级，每个层级之间使用<code>.</code>连接。</p>
<p>在JS中，我们可以使用对象表示这样的树结构的定义。例如以下例子，两种语言分别定义对象，其key为每个部分的ID，叶节点的value即是对应的文本信息。所有语言的这个这个对象具有相同的结构。那么，英文下的<code>login</code>和中文下<code>登录</code>这个文本信息对应的ID就是<code>login.button.text</code>。</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="tsx" data-theme="default"><code data-language="tsx" data-theme="default"><span class="line"><span style="color:#7F848E;font-style:italic">// en.ts, 定义英文的ID的文本对应关系</span></span>
<span class="line"><span style="color:#C678DD">export</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">default</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E06C75">login</span><span style="color:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">button</span><span style="color:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#ABB2BF">      </span><span style="color:#E06C75">text</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Login&quot;</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">    },</span></span>
<span class="line"><span style="color:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic">// cn.ts, 定义中文的对应关系</span></span>
<span class="line"><span style="color:#C678DD">export</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">default</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E06C75">login</span><span style="color:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">button</span><span style="color:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#ABB2BF">      </span><span style="color:#E06C75">text</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;登录&quot;</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">    },</span></span>
<span class="line"><span style="color:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span></code></pre></div>
<h1 id="通过id取得当前语言的文本"><a href="#通过id取得当前语言的文本" class="mr-2"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="inline-block" height="16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a>通过ID取得当前语言的文本</h1>
<p>这个ID其实也是一个访问对象属性的路径。通过这样的ID，我们可以很简单的从当前语言的定义对象中取得当前语言的文本。加上一些状态管理的加持，动态切换语言也是很简单的工作。</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="tsx" data-theme="default"><code data-language="tsx" data-theme="default"><span class="line"><span style="color:#7F848E;font-style:italic">// 这个组件通过ID获得当前语言的对应的文本。</span></span>
<span class="line"><span style="color:#C678DD">function</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">LocalizedString</span><span style="color:#ABB2BF">({ </span><span style="color:#E06C75;font-style:italic">id</span><span style="color:#ABB2BF"> }: { </span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF"> }) {</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#7F848E;font-style:italic">// 通过React Context等方式或者当前语言的定义对象currentLanguageObject</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#7F848E;font-style:italic">// ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#7F848E;font-style:italic">// 把ID以.拆开，然后一层一层访问就可以了。</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">value</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">currentLanguageObject</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E5C07B">id</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">split</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;.&quot;</span><span style="color:#ABB2BF">).</span><span style="color:#61AFEF">forEach</span><span style="color:#ABB2BF">((</span><span style="color:#E06C75;font-style:italic">k</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">[</span><span style="color:#E06C75">k</span><span style="color:#ABB2BF">];</span></span>
<span class="line"><span style="color:#ABB2BF">  });</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic">// 一开始我们是把文本硬编码在组件里……</span></span>
<span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">Button</span><span style="color:#ABB2BF">&gt;Login&lt;/</span><span style="color:#E5C07B">Button</span><span style="color:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic">// 现在使用LocalizedString来动态获取文本</span></span>
<span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">Button</span><span style="color:#ABB2BF">&gt;&lt;</span><span style="color:#E5C07B">LocalizedString</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66;font-style:italic">id</span><span style="color:#56B6C2">=</span><span style="color:#98C379">&quot;login.button.text&quot;</span><span style="color:#ABB2BF"> /&gt;&lt;/</span><span style="color:#E5C07B">Button</span><span style="color:#ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre></div>
<h1 id="强类型地输入id"><a href="#强类型地输入id" class="mr-2"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="inline-block" height="16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a>强类型地输入ID</h1>
<p>上述方式已经能够完成任务了，但是有一个很大的问题：<strong>写id的时候没有类型检查，容易写错</strong>。</p>
<p>除了字符串，也有一些其他方式可以来定位，其他方式在我的<a href="/articles/strongly-typed-i18n-with-typescript#make-it-strongly-typed">simstate-i18n的文章中</a>中有介绍，最后还是认为上一节的字符串和组件的方案具有优势。</p>
<p>所以现在的问题变成了<strong>如何强类型地生成ID</strong>。我之前的库<a href="https://github.com/ddadaal/simstate-i18n"><code>simstate-i18n</code></a>使用<code>Proxy</code>来截取对对象的访问路径来生成ID。这个点子比较新奇，也能很好地完成工作，但是总感觉有点奇技淫巧，而且使用Proxy总会对性能产生一些影响。</p>
<h1 id="使用template-literal-type计算所有可能的id"><a href="#使用template-literal-type计算所有可能的id" class="mr-2"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="inline-block" height="16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a>使用Template Literal Type计算所有可能的ID</h1>
<p><a href="https://www.typescriptlang.org/docs/handbook/2/template-literal-types.html">Template Literal Type</a>的出现使得我们可以直接使用字符串字面量作为ID，并通过一些类型计算，使得TypeScript可以确定出所有可能的ID，并在编辑器实现自动完成和错误检查。</p>
<p>TypeScript支持<strong>字面量类型(literal type)<strong>和</strong>联合类型(union type)</strong>。</p>
<ul>
<li>借助字面量类型，TS可以将对象和字符串字面量推断出非常精确的类型：例如，TS可以推断出上面的对象的类型为<span data-rehype-pretty-code-fragment=""><code data-language="typescript" data-theme="default"><span class="line"><span style="color:#ABB2BF">{ login: { button: { text: </span><span style="color:#E06C75">string</span><span style="color:#ABB2BF"> }}}</span></span></code></span>。而字符串字面量的类型也可以推断地非常精确，例如<span data-rehype-pretty-code-fragment=""><code data-language="typescript" data-theme="default"><span class="line"><span style="color:#98C379">&quot;123&quot;</span></span></code></span>的类型就是<span data-rehype-pretty-code-fragment=""><code data-language="typescript" data-theme="default"><span class="line"><span style="color:#98C379">&quot;123&quot;</span></span></code></span>。</li>
<li>通过联合类型，具有多种但是有限种可能取值的值的类型也可以限制地非常精确：例如如果一个变量可能取值<code>&quot;1&quot;</code>或者<code>&quot;2&quot;</code>，那么这个变量的类型就是<code>&quot;1&quot; | &quot;2&quot;</code></li>
</ul>
<p>而新支持的<code>Template Literal Type</code>简单来说，支持了字符串字面量类型的拼接。并且，在拼接的时候，如果有一个操作数是联合类型，将会运用分配律将字符串展开：</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="ts" data-theme="default"><code data-language="ts" data-theme="default"><span class="line"><span style="color:#C678DD">type</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">A</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;A1&quot;</span><span style="color:#ABB2BF"> | </span><span style="color:#98C379">&quot;A2&quot;</span><span style="color:#ABB2BF"> ;</span></span>
<span class="line"><span style="color:#C678DD">type</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">B</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;B1&quot;</span><span style="color:#ABB2BF"> | </span><span style="color:#98C379">&quot;B2&quot;</span><span style="color:#ABB2BF"> ;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">type</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">C</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">`</span><span style="color:#C678DD">${</span><span style="color:#E5C07B">A</span><span style="color:#C678DD">}</span><span style="color:#98C379">.</span><span style="color:#C678DD">${</span><span style="color:#E5C07B">B</span><span style="color:#C678DD">}</span><span style="color:#98C379">`</span><span style="color:#ABB2BF"> </span><span style="color:#7F848E;font-style:italic">// type C = &quot;A1.B1&quot; | &quot;A1.B2&quot; | &quot;A2.B1&quot; | &quot;A2.B2&quot;</span></span></code></pre></div>
<p>在这个功能的基础上，再加上一些TS的高级类型（例如<code>Mapped types</code>, <code>keyof</code>等等等）我们就可以实现从对象字面量推断出所有可能的ID了。</p>
<p>在JS代码中，我们要生成这样的ID是很简单的：对对象做一个DFS就可以了</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="js" data-theme="default"><code data-language="js" data-theme="default"><span class="line"><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">a</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">login</span><span style="color:#ABB2BF">: { </span><span style="color:#E06C75">button</span><span style="color:#ABB2BF">: { </span><span style="color:#E06C75">text</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Login&quot;</span><span style="color:#ABB2BF"> } } };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">dfs</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75;font-style:italic">obj</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> (</span><span style="color:#C678DD">typeof</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">obj</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">===</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;string&quot;</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#7F848E;font-style:italic">// 已经到了文本，下一层的key就是&quot;&quot;</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF"> [</span><span style="color:#98C379">&quot;&quot;</span><span style="color:#ABB2BF">];</span></span>
<span class="line"><span style="color:#ABB2BF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#7F848E;font-style:italic">// 保存至这一层的所有ID</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">ids</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> [];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#7F848E;font-style:italic">// 遍历obj的所有key</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> (</span><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">key</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">obj</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#7F848E;font-style:italic">// 获得下一层的所有key</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">nextLevel</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">dfs</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">obj</span><span style="color:#ABB2BF">[</span><span style="color:#E06C75">key</span><span style="color:#ABB2BF">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#7F848E;font-style:italic">// 将本key加到所有下一层key的前面</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E5C07B">ids</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">push</span><span style="color:#ABB2BF">(...</span><span style="color:#E5C07B">nextLevel</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">map</span><span style="color:#ABB2BF">((</span><span style="color:#E06C75;font-style:italic">x</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">`</span><span style="color:#C678DD">${</span><span style="color:#E06C75">key</span><span style="color:#C678DD">}</span><span style="color:#98C379">.</span><span style="color:#C678DD">${</span><span style="color:#E06C75">x</span><span style="color:#C678DD">}</span><span style="color:#98C379">`</span><span style="color:#ABB2BF">));</span></span>
<span class="line"><span style="color:#ABB2BF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">ids</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic">// 按上述方案写出来的ID最后会多出一个.，使用这个函数把最后的.去掉</span></span>
<span class="line"><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">removeTrailingDot</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75;font-style:italic">str</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">str</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">endsWith</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;.&quot;</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">?</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">str</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">substr</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">str</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">length</span><span style="color:#56B6C2">-</span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">:</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">str</span><span style="color:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF">dfs</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">a</span><span style="color:#ABB2BF">).</span><span style="color:#61AFEF">map</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">removeTrailingDot</span><span style="color:#ABB2BF">); </span><span style="color:#7F848E;font-style:italic">// [&quot;login.button.text&quot;]</span></span></code></pre></div>
<p>当然，我们可以使用一个更FP的方式写这个<code>dfs</code>函数：</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="js" data-theme="default"><code data-language="js" data-theme="default"><span class="line"><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">flattenArray</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75;font-style:italic">arr</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">arr</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">reduce</span><span style="color:#ABB2BF">((</span><span style="color:#E06C75;font-style:italic">prev</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">curr</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E5C07B">prev</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">push</span><span style="color:#ABB2BF">(...</span><span style="color:#E06C75">curr</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">prev</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">}, []);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">dfs</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75;font-style:italic">obj</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">typeof</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">obj</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">===</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;string&quot;</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">?</span><span style="color:#ABB2BF"> [</span><span style="color:#98C379">&quot;&quot;</span><span style="color:#ABB2BF">]</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">:</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">flattenArray</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">Object</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">keys</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">obj</span><span style="color:#ABB2BF">).</span><span style="color:#61AFEF">map</span><span style="color:#ABB2BF">((</span><span style="color:#E06C75;font-style:italic">k</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">dfs</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">obj</span><span style="color:#ABB2BF">[</span><span style="color:#E06C75">k</span><span style="color:#ABB2BF">]).</span><span style="color:#61AFEF">map</span><span style="color:#ABB2BF">((</span><span style="color:#E06C75;font-style:italic">sk</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">`</span><span style="color:#C678DD">${</span><span style="color:#E06C75">k</span><span style="color:#C678DD">}</span><span style="color:#98C379">.</span><span style="color:#C678DD">${</span><span style="color:#E06C75">sk</span><span style="color:#C678DD">}</span><span style="color:#98C379">`</span><span style="color:#ABB2BF">)));</span></span></code></pre></div>
<p>现在我们要做的，就是在类型的层面、借助TS的类型系统，完成同样的工作。这里先放代码：</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="ts" data-theme="default"><code data-language="ts" data-theme="default"><span class="line"><span style="color:#C678DD">type</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">ValueOf</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">T</span><span style="color:#ABB2BF">&gt; </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">T</span><span style="color:#ABB2BF">[</span><span style="color:#C678DD">keyof</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">T</span><span style="color:#ABB2BF">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">type</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">Concat</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">T</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">U</span><span style="color:#ABB2BF">&gt; </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">`</span><span style="color:#C678DD">${</span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF"> &amp; </span><span style="color:#E5C07B">T</span><span style="color:#C678DD">}</span><span style="color:#98C379">.</span><span style="color:#C678DD">${</span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF"> &amp; </span><span style="color:#E5C07B">U</span><span style="color:#C678DD">}</span><span style="color:#98C379">`</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">type</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">LangRec</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">extends</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF"> | </span><span style="color:#E5C07B">Definitions</span><span style="color:#ABB2BF">&gt; </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">extends</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">string</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">?</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;&quot;</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">:</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">`</span><span style="color:#C678DD">${</span><span style="color:#E5C07B">ValueOf</span><span style="color:#ABB2BF">&lt;{[</span><span style="color:#E5C07B">k</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">keyof</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF">]: </span><span style="color:#E5C07B">Concat</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">k</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">LangRec</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF">[</span><span style="color:#E5C07B">k</span><span style="color:#ABB2BF">]&gt;&gt;}&gt;</span><span style="color:#C678DD">}</span><span style="color:#98C379">`</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">type</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">RemoveTrailingDot</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">T</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">extends</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF">&gt; </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">T</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">extends</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">`</span><span style="color:#C678DD">${</span><span style="color:#ABB2BF">infer </span><span style="color:#E5C07B">U</span><span style="color:#C678DD">}</span><span style="color:#98C379">.`</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">?</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">U</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">:</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">T</span><span style="color:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">export</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">type</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">Lang</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">extends</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">Definitions</span><span style="color:#ABB2BF">&gt; </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">RemoveTrailingDot</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">LangRec</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF">&gt;&gt;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">type</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">A</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">Lang</span><span style="color:#ABB2BF">&lt;{ </span><span style="color:#E06C75">a</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;2&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">b</span><span style="color:#ABB2BF">: { </span><span style="color:#E06C75">c</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;4&quot;</span><span style="color:#ABB2BF"> } }&gt;; </span><span style="color:#7F848E;font-style:italic">// type A = &quot;a&quot; | &quot;b.c&quot;</span></span></code></pre></div>
<p>这段代码看起来很唬人，但是如果我们把类型看成函数，类型参数看作函数参数，就可以看出来，这个代码基本就是JS代码的直接翻译。其中有几点可以提一下：</p>
<ul>
<li>递归类型</li>
</ul>
<p><code>LangRec</code>是一个递归类型，可以理解成递归函数，其中<code>LangRec</code>是函数名，类型变量<code>D</code>为函数的变量。为了使得递归类型能够递归结束，必须需要使用<code>条件类型 conditional type</code>判断当前D的实际类型，并当它是字符串（即已经到达对象的叶节点）时，结束递归</p>
<ul>
<li>Mapped type</li>
</ul>
<p><span data-rehype-pretty-code-fragment=""><code data-language="typescript" data-theme="default"><span class="line"><span style="color:#E06C75">ValueOf</span><span style="color:#56B6C2">&lt;</span><span style="color:#ABB2BF">{[</span><span style="color:#E06C75">k</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">keyof</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF">]: </span><span style="color:#E06C75">Concat</span><span style="color:#56B6C2">&lt;</span><span style="color:#E06C75">k</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">LangRec</span><span style="color:#56B6C2">&lt;</span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF">[</span><span style="color:#E06C75">k</span><span style="color:#ABB2BF">]</span><span style="color:#56B6C2">&gt;&gt;</span><span style="color:#ABB2BF">}</span><span style="color:#56B6C2">&gt;</span></span></code></span>处运用了mapped type，将D的每个key（<span data-rehype-pretty-code-fragment=""><code data-language="typescript" data-theme="default"><span class="line"><span style="color:#E06C75">k</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">typeof</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">D</span></span></code></span>）映射成一个新的类型<span data-rehype-pretty-code-fragment=""><code data-language="typescript" data-theme="default"><span class="line"><span style="color:#E06C75">Concat</span><span style="color:#56B6C2">&lt;</span><span style="color:#E06C75">k</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">LangRec</span><span style="color:#56B6C2">&lt;</span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF">[</span><span style="color:#E06C75">k</span><span style="color:#ABB2BF">]</span><span style="color:#56B6C2">&gt;&gt;</span></span></code></span>。</p>
<p>本来mapped type只支持映射把对象映射到对象（如<span data-rehype-pretty-code-fragment=""><code data-language="typescript" data-theme="default"><span class="line"><span style="color:#ABB2BF">{a: </span><span style="color:#E06C75">string</span><span style="color:#ABB2BF">; b: </span><span style="color:#E06C75">string</span><span style="color:#ABB2BF">}</span></span></code></span>到<span data-rehype-pretty-code-fragment=""><code data-language="typescript" data-theme="default"><span class="line"><span style="color:#ABB2BF">{ a: </span><span style="color:#E06C75">number</span><span style="color:#ABB2BF">; b: </span><span style="color:#E06C75">number</span><span style="color:#ABB2BF">; }</span></span></code></span>），但是我们只关系值的类型（映射后的类型），不关心原来的key的类型，那么可以使用<code>ValueOf</code>取得所有值的类型。</p>
<ul>
<li>分配律</li>
</ul>
<p>在原来的JS代码中，下一级生成的key是一个<code>string[]</code>，而本级的key是一个<code>string</code>，要将本级的key加到所有下一级key的前面，就需要使用<code>map</code>方法，并在最后使用<code>flatten</code>方法，把<code>string[][]</code>打平成<code>string[]</code>。</p>
<p>对应到在我们的类型代码中，下一级生成的key是一个联合类型（<span data-rehype-pretty-code-fragment=""><code data-language="typescript" data-theme="default"><span class="line"><span style="color:#98C379">&quot;a&quot;</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">|</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;b&quot;</span></span></code></span>），本级的key是一个字符串字面量<span data-rehype-pretty-code-fragment=""><code data-language="typescript" data-theme="default"><span class="line"><span style="color:#98C379">&quot;a&quot;</span></span></code></span>。但是，借助分配律，我们可以直接得到拼接后的联合类型<span data-rehype-pretty-code-fragment=""><code data-language="typescript" data-theme="default"><span class="line"><span style="color:#98C379">&quot;a.a&quot;</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">|</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;a.b&quot;</span></span></code></span>。</p>
<ul>
<li>去掉最后的点（RemoveTrailingDot）</li>
</ul>
<p>类型系统中没有<code>.endsWith</code>方法，也没有<code>.substr</code>方法，但是可以借助<code>inferred type</code>，看看原类型能不能推断(infer)出一个类型<code>U</code>，这个<code>U</code>类型加上一个<code>.</code>，就等于原来的类型<code>T</code>。如果可以，那么U就是删掉最后的点后的类型。</p>
<p>通过这个Lang类型和语言对象的字面量类型，我们就可以直接获得所有可能的ID，将它用在ID的类型上，我们就实现了强类型的文本ID。借助TS提供的类型信息，VSCode等编辑器可以给出自动完成，极大地提高编程体验。</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="tsx" data-theme="default"><code data-language="tsx" data-theme="default"><span class="line"><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">language</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">login</span><span style="color:#ABB2BF">: { </span><span style="color:#E06C75">button</span><span style="color:#ABB2BF">: { </span><span style="color:#E06C75">text</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Login&quot;</span><span style="color:#ABB2BF"> } } };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">type</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">TextId</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">Lang</span><span style="color:#ABB2BF">&lt;</span><span style="color:#C678DD">typeof</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">language</span><span style="color:#ABB2BF">&gt;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic">// 这个组件通过ID获得当前语言的对应的文本。</span></span>
<span class="line"><span style="color:#C678DD">function</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">LocalizedString</span><span style="color:#ABB2BF">({ </span><span style="color:#E06C75;font-style:italic">id</span><span style="color:#ABB2BF"> }: { </span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">TextId</span><span style="color:#ABB2BF"> }) {</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#7F848E;font-style:italic">// ...</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">LocalizedString</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66;font-style:italic">id</span><span style="color:#56B6C2">=</span><span style="color:#98C379">&quot;a&quot;</span><span style="color:#ABB2BF"> /&gt; </span><span style="color:#7F848E;font-style:italic">// error</span></span>
<span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">LocalizedString</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66;font-style:italic">id</span><span style="color:#56B6C2">=</span><span style="color:#98C379">&quot;login.button&quot;</span><span style="color:#ABB2BF"> /&gt; </span><span style="color:#7F848E;font-style:italic">// error</span></span>
<span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">LocalizedString</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66;font-style:italic">id</span><span style="color:#56B6C2">=</span><span style="color:#98C379">&quot;login.button.text&quot;</span><span style="color:#ABB2BF"> /&gt; </span><span style="color:#7F848E;font-style:italic">// correct</span></span></code></pre></div>
<p><figure><img alt="自动完成体验" loading="lazy" width="1074" height="705" decoding="async" data-nimg="1" style="color:transparent" srcSet="/articles/asset/contents/20210606-typed-i18n-with-template-literal-types/demo.gif?width=1080 1x, /articles/asset/contents/20210606-typed-i18n-with-template-literal-types/demo.gif?width=3840 2x" src="/articles/asset/contents/20210606-typed-i18n-with-template-literal-types/demo.gif?width=3840"/><figcaption class="text-center">自动完成体验</figcaption></figure></p>
<h1 id="id前缀"><a href="#id前缀" class="mr-2"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="inline-block" height="16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a>ID前缀</h1>
<p>随着代码量的增长，UI树越来越复杂，对应的ID的结构也越来越复杂，深度越来越大，这就会使得ID越来越长，但是在同一个UI里用到的各个ID都具有相同的前缀，例如下面这个真实项目中的例子：</p>
<pre><code>app.header.userIndicator.loggedIn.dropdown.login.button.text
app.header.userIndicator.loggedIn.dropdown.username.button.text
app.header.userIndicator.loggedIn.dropdown.logout.button.text
</code></pre>
<p>所以，我们可以将前缀提取出来，然后在真正使用的地，就可以直接输入后面不同的部分就可以了。</p>
<p>当然了这个过程也需要有类型检查。本库提供了<code>prefix</code>这个helper function，在运行<code>createI18n</code>时可以获得。对于上面三个例子，使用<code>prefix</code>函数可以写出如下代码。</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="ts" data-theme="default"><code data-language="ts" data-theme="default"><span class="line"></span>
<span class="line"><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">p</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">prefix</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;app.header.userIndicator.loggedIn.dropdown.&quot;</span><span style="color:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF">p</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;login.button.text&quot;</span><span style="color:#ABB2BF">); </span><span style="color:#7F848E;font-style:italic">// app.header.userIndicator.loggedIn.dropdown.login.button.text</span></span>
<span class="line"><span style="color:#61AFEF">p</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;username.button.text&quot;</span><span style="color:#ABB2BF">) </span><span style="color:#7F848E;font-style:italic">// app.header.userIndicator.loggedIn.dropdown.login.button.text</span></span>
<span class="line"><span style="color:#61AFEF">p</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;logout.button.text&quot;</span><span style="color:#ABB2BF">) </span><span style="color:#7F848E;font-style:italic">// app.header.userIndicator.loggedIn.dropdown.logout.button.tex</span></span></code></pre></div>
<p>这是怎么实现的呢？</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="ts" data-theme="default"><code data-language="ts" data-theme="default"><span class="line"><span style="color:#C678DD">type</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">FullLang</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">extends</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF"> | </span><span style="color:#E5C07B">Definitions</span><span style="color:#ABB2BF">&gt; </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">extends</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">string</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">?</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;&quot;</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">:</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">`</span><span style="color:#C678DD">${</span><span style="color:#E5C07B">ValueOf</span><span style="color:#ABB2BF">&lt;{[</span><span style="color:#E5C07B">k</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">keyof</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF">]: </span><span style="color:#98C379">`</span><span style="color:#C678DD">${</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">StringOnly</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">k</span><span style="color:#ABB2BF">&gt;)</span><span style="color:#C678DD">}</span><span style="color:#98C379">.`</span><span style="color:#ABB2BF"> | </span><span style="color:#E5C07B">Concat</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">k</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">FullLang</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF">[</span><span style="color:#E5C07B">k</span><span style="color:#ABB2BF">]&gt;&gt;}&gt;</span><span style="color:#C678DD">}</span><span style="color:#98C379">`</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">type</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">PartialLangFromFull</span></span>
<span class="line"><span style="color:#ABB2BF">  &lt;</span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">extends</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">Definitions</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">FL</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">extends</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">FullLang</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF">&gt;, </span><span style="color:#E5C07B">L</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">extends</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">Lang</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF">&gt;&gt; </span><span style="color:#56B6C2">=</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E5C07B">FL</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">extends</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">`</span><span style="color:#C678DD">${</span><span style="color:#E5C07B">L</span><span style="color:#C678DD">}</span><span style="color:#98C379">.`</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">?</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">never</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">:</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">FL</span><span style="color:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">export</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">type</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">PartialLang</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">extends</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">Definitions</span><span style="color:#ABB2BF">&gt; </span><span style="color:#56B6C2">=</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E5C07B">PartialLangFromFull</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">FullLang</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF">&gt;, </span><span style="color:#E5C07B">Lang</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF">&gt;&gt;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">export</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">type</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">RestLang</span></span>
<span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">extends</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">Definitions</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">L</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">extends</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">Lang</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF">&gt;, </span><span style="color:#E5C07B">Partial</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">extends</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">PartialLang</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF">&gt;&gt; </span><span style="color:#56B6C2">=</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E5C07B">L</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">extends</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">`</span><span style="color:#C678DD">${</span><span style="color:#E5C07B">Partial</span><span style="color:#C678DD">}${</span><span style="color:#ABB2BF">infer </span><span style="color:#E5C07B">Rest</span><span style="color:#C678DD">}</span><span style="color:#98C379">`</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">?</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">Rest</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">:</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">never</span><span style="color:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">p</span><span style="color:#ABB2BF">: &lt;</span><span style="color:#E5C07B">TPartial</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">extends</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">PartialLang</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF">&gt;, </span><span style="color:#E5C07B">TRest</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">extends</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">RestLang</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">Lang</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF">&gt;, </span><span style="color:#E5C07B">TPartial</span><span style="color:#ABB2BF">&gt;&gt;</span></span>
<span class="line"><span style="color:#ABB2BF">  (</span><span style="color:#E06C75;font-style:italic">t</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">TPartial</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75;font-style:italic">rest</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">TRest</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">`</span><span style="color:#C678DD">${</span><span style="color:#E06C75">TPartial</span><span style="color:#C678DD">}${</span><span style="color:#E06C75">TRest</span><span style="color:#C678DD">}</span><span style="color:#98C379">`</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75;font-style:italic">t</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75;font-style:italic">s</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">t</span><span style="color:#56B6C2">+</span><span style="color:#E06C75">s</span><span style="color:#ABB2BF">;</span></span></code></pre></div>
<p>这看着比上面的获得所有ID要复杂不少，但是简单来说可以分为这几步：</p>
<ol>
<li><code>FullLang</code>类型取得DFS过程中所有中间节点的ID
<ul>
<li><code>Lang</code>只会取得到叶节点的ID，而<code>FullLang</code>会把途径的中间结果的ID也获得</li>
<li>另外还有一个区别是这个得到的所有ID最终的<code>.</code>是没有去掉的</li>
</ul>
</li>
</ol>
<div data-rehype-pretty-code-fragment=""><pre data-language="tsx" data-theme="default"><code data-language="tsx" data-theme="default"><span class="line"><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">language</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">login</span><span style="color:#ABB2BF">: { </span><span style="color:#E06C75">button</span><span style="color:#ABB2BF">: { </span><span style="color:#E06C75">text</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Login&quot;</span><span style="color:#ABB2BF"> } } };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">type</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">typeof</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">language</span><span style="color:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">type</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">FL</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">FullLang</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF">&gt;; </span><span style="color:#7F848E;font-style:italic">// &quot;login.&quot; | &quot;login.button.&quot; | &quot;login.button.text.&quot;;</span></span></code></pre></div>
<ol start="2">
<li><code>PartialLangFromFull</code>类型把到叶节点的ID去掉
<ul>
<li>对于<code>FullLang</code>的每个取值，如果它是某个<code>Lang</code>的取值后面加个<code>.</code>，那么这个其实是到叶节点的ID，不是前缀，是不应该取的(<code>never</code>)</li>
<li>到这里已经获得前缀了</li>
</ul>
</li>
</ol>
<div data-rehype-pretty-code-fragment=""><pre data-language="tsx" data-theme="default"><code data-language="tsx" data-theme="default"><span class="line"><span style="color:#C678DD">type</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">PLFF</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">PartialLangFromFull</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">FullLang</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF">&gt;, </span><span style="color:#E5C07B">PartialLang</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF">&gt;&gt;; </span><span style="color:#7F848E;font-style:italic">// &quot;login.&quot; | &quot;login.button.&quot;</span></span></code></pre></div>
<ol start="3">
<li><code>RestLang</code>是通过前缀来获取可以接受的后缀
<ul>
<li>这个也是通过<code>infer</code>的方式来实现的，看看是否某个<code>Lang</code>的取值可以是传入的前缀和后缀拼起来<code>${Partial}${infer Rest}</code>，如果可以，就把后缀<code>Rest</code>返回</li>
</ul>
</li>
</ol>
<div data-rehype-pretty-code-fragment=""><pre data-language="ts" data-theme="default"><code data-language="ts" data-theme="default"><span class="line"><span style="color:#C678DD">type</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">RestLang</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">RestLang</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">Lang</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">D</span><span style="color:#ABB2BF">&gt;, </span><span style="color:#98C379">&quot;login.&quot;</span><span style="color:#ABB2BF">&gt; </span><span style="color:#7F848E;font-style:italic">// &quot;button.text&quot;</span></span></code></pre></div>
<ol start="4">
<li>最后，<code>p</code>函数的实现其实就是一个<span data-rehype-pretty-code-fragment=""><code data-language="ts" data-theme="default"><span class="line"><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">t</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75;font-style:italic">s</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">t</span><span style="color:#56B6C2">+</span><span style="color:#E06C75">s</span></span></code></span>，非常简单，运行时几乎没有什么开销。</li>
</ol>
<h1 id="总结"><a href="#总结" class="mr-2"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="inline-block" height="16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a>总结</h1>
<p>TS具有现在常见编程语言中最强大的类型系统，而这个类型系统如果能用得好，能够极大地提高编程效率。这个方案借助了TS的强大的类型系统，使得i18n的过程也能享受到较为完善的类型检查，能够在编译器避免很多因为string写错的带来的运行时bug。并且，在运行时就是普通的字符串，和之前的通过proxy截取对象访问路径生成ID的方案相比，不会在运行时产生任何开销。</p>
<p>这个方案也有一个潜在问题，即当语言对象很大很复杂时，编译器的类型运算本身可能会消耗较多运算资源，影响编辑器的流畅度。但是，当前我的网站具有151行的语言定义，ID的自动完成性能还算可以接受（基本不会有可见卡顿），所以对我来说性能已经够用了。</p>
<p>希望有更多用户可以来试试<code>react-typed-i18n</code>（<a href="https://github.com/ddadaal/react-typed-i18n">GitHub</a>）。</p></div><div class="hidden lg:block lg:w-[25%]"><div class="px-1 sticky top-24"><ul class="menu max-w-full overflow-auto"><li><div class="menu-title flex space-x-1 items-center py-2"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z"></path></svg><span>目录</span></div><ul class="menu"><li style="padding-left:0"><a id="tocitem-react-typed-i18n" href="#react-typed-i18n">react-typed-i18n</a></li><li style="padding-left:0"><a id="tocitem-i18n" href="#i18n">i18n</a></li><li style="padding-left:0"><a id="tocitem-定义id和文本的对应关系" href="#定义id和文本的对应关系">定义ID和文本的对应关系</a></li><li style="padding-left:0"><a id="tocitem-通过id取得当前语言的文本" href="#通过id取得当前语言的文本">通过ID取得当前语言的文本</a></li><li style="padding-left:0"><a id="tocitem-强类型地输入id" href="#强类型地输入id">强类型地输入ID</a></li><li style="padding-left:0"><a id="tocitem-使用template-literal-type计算所有可能的id" href="#使用template-literal-type计算所有可能的id">使用Template Literal Type计算所有可能的ID</a></li><li style="padding-left:0"><a id="tocitem-id前缀" href="#id前缀">ID前缀</a></li><li style="padding-left:0"><a id="tocitem-总结" href="#总结">总结</a></li></ul></li></ul></div></div></div></div><div class="max-w-7xl mx-auto p-4"><div><h2 class="text-2xl font-bold mb-2 flex items-center"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"></path></svg><span class="mx-2">相关文章</span></h2><div class="flex flex-wrap gap-2"><div class="card w-96 bg-base-100 shadow-lg hover:shadow-xl transition"><div class="card-body"><span class="text-sm">2019-04-17 09:30:00 UTC+8</span><a href="/articles/strongly-typed-i18n-with-typescript/en"><h2 class="card-title">Strongly Typed i18n with TypeScript</h2></a><p>
# i18n and The &quot;Raw String&quot; Problem

Internationalization, also known as i18n (18 characters betwee</p></div></div></div></div></div><div class="max-w-7xl mx-auto p-4"><div><h2 class="text-2xl font-bold mb-2 flex items-center"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 576 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"></path></svg><span class="mx-2"> 评论</span></h2></div></div></div></article></div><footer class="bg-base-200 text-base-content"><div class="footer py-6 max-w-7xl mx-auto px-4"><div class="space-y-1"><p>👨🏼‍💻 <!-- -->本网站由<a class="link link-hover" href="/about/me/cn">ddadaal</a>自豪地编写</p><p>📝<!-- -->本站文章在<a rel="licene noreferrer" target="_blank" class="link" href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>协议下授权</p><div class="tooltip" data-tip="2018-11-17 06:51:00 UTC+0"><p>📅 <!-- -->博客已经运行 <span class="countdown"><span style="--value:4"></span></span> 年 <span class="countdown"><span style="--value:6"></span></span> 月 <span class="countdown"><span style="--value:26"></span></span> 天 <span class="countdown"><span style="--value:20"></span></span> 时 <span class="countdown"><span style="--value:22"></span></span> 分 <span class="countdown"><span style="--value:31"></span></span> 秒</p></div><p>⏲️ <!-- -->最后更新<!-- -->:  <!-- -->2023-06-11 03:13:31 UTC+0</p><div><p>📲 <!-- -->联系我</p><div class="flex py-2 gap-2"><span><a href="http://wpa.qq.com/msgrd?v=3&amp;uin=540232834&amp;site=qq&amp;menu=yes" title="QQ: 540232834" target="_blank" class="block transition hover:scale-125" rel="noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="22.400000000000002" width="22.400000000000002" xmlns="http://www.w3.org/2000/svg"><path d="M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741 0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792 0 0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704z"></path></svg></a></span><span><a href="mailto://ddadaal.me@outlook.com" title="E-mail: ddadaal@outlook.com" target="_blank" class="block transition hover:scale-125" rel="noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 576 512" height="22.400000000000002" width="22.400000000000002" xmlns="http://www.w3.org/2000/svg"><path d="M160 448c-25.6 0-51.2-22.4-64-32-64-44.8-83.2-60.8-96-70.4V480c0 17.67 14.33 32 32 32h256c17.67 0 32-14.33 32-32V345.6c-12.8 9.6-32 25.6-96 70.4-12.8 9.6-38.4 32-64 32zm128-192H32c-17.67 0-32 14.33-32 32v16c25.6 19.2 22.4 19.2 115.2 86.4 9.6 6.4 28.8 25.6 44.8 25.6s35.2-19.2 44.8-22.4c92.8-67.2 89.6-67.2 115.2-86.4V288c0-17.67-14.33-32-32-32zm256-96H224c-17.67 0-32 14.33-32 32v32h96c33.21 0 60.59 25.42 63.71 57.82l.29-.22V416h192c17.67 0 32-14.33 32-32V192c0-17.67-14.33-32-32-32zm-32 128h-64v-64h64v64zm-352-96c0-35.29 28.71-64 64-64h224V32c0-17.67-14.33-32-32-32H96C78.33 0 64 14.33 64 32v192h96v-32z"></path></svg></a></span><span><a href="https://www.linkedin.com/in/chenjunda/" title="LinkedIn: 陈俊达" target="_blank" class="block transition hover:scale-125" rel="noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="22.400000000000002" width="22.400000000000002" xmlns="http://www.w3.org/2000/svg"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a></span><span><a href="https://github.com/ddadaal" title="GitHub: ddadaal" target="_blank" class="block transition hover:scale-125" rel="noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="22.400000000000002" width="22.400000000000002" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></span><span><a href="https://steamcommunity.com/profiles/76561198104889782" title="Steam: Victor Crubs" target="_blank" class="block transition hover:scale-125" rel="noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="22.400000000000002" width="22.400000000000002" xmlns="http://www.w3.org/2000/svg"><path d="M496 256c0 137-111.2 248-248.4 248-113.8 0-209.6-76.3-239-180.4l95.2 39.3c6.4 32.1 34.9 56.4 68.9 56.4 39.2 0 71.9-32.4 70.2-73.5l84.5-60.2c52.1 1.3 95.8-40.9 95.8-93.5 0-51.6-42-93.5-93.7-93.5s-93.7 42-93.7 93.5v1.2L176.6 279c-15.5-.9-30.7 3.4-43.5 12.1L0 236.1C10.2 108.4 117.1 8 247.6 8 384.8 8 496 119 496 256zM155.7 384.3l-30.5-12.6a52.79 52.79 0 0 0 27.2 25.8c26.9 11.2 57.8-1.6 69-28.4 5.4-13 5.5-27.3.1-40.3-5.4-13-15.5-23.2-28.5-28.6-12.9-5.4-26.7-5.2-38.9-.6l31.5 13c19.8 8.2 29.2 30.9 20.9 50.7-8.3 19.9-31 29.2-50.8 21zm173.8-129.9c-34.4 0-62.4-28-62.4-62.3s28-62.3 62.4-62.3 62.4 28 62.4 62.3-27.9 62.3-62.4 62.3zm.1-15.6c25.9 0 46.9-21 46.9-46.8 0-25.9-21-46.8-46.9-46.8s-46.9 21-46.9 46.8c.1 25.8 21.1 46.8 46.9 46.8z"></path></svg></a></span><span><a href="https://zhihu.com/people/VicCrubs" title="知乎：陈俊达" target="_blank" class="block transition hover:scale-125" rel="noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 640 512" height="22.400000000000002" width="22.400000000000002" xmlns="http://www.w3.org/2000/svg"><path d="M170.54 148.13v217.54l23.43.01 7.71 26.37 42.01-26.37h49.53V148.13H170.54zm97.75 193.93h-27.94l-27.9 17.51-5.08-17.47-11.9-.04V171.75h72.82v170.31zm-118.46-94.39H97.5c1.74-27.1 2.2-51.59 2.2-73.46h51.16s1.97-22.56-8.58-22.31h-88.5c3.49-13.12 7.87-26.66 13.12-40.67 0 0-24.07 0-32.27 21.57-3.39 8.9-13.21 43.14-30.7 78.12 5.89-.64 25.37-1.18 36.84-22.21 2.11-5.89 2.51-6.66 5.14-14.53h28.87c0 10.5-1.2 66.88-1.68 73.44H20.83c-11.74 0-15.56 23.62-15.56 23.62h65.58C66.45 321.1 42.83 363.12 0 396.34c20.49 5.85 40.91-.93 51-9.9 0 0 22.98-20.9 35.59-69.25l53.96 64.94s7.91-26.89-1.24-39.99c-7.58-8.92-28.06-33.06-36.79-41.81L87.9 311.95c4.36-13.98 6.99-27.55 7.87-40.67h61.65s-.09-23.62-7.59-23.62v.01zm412.02-1.6c20.83-25.64 44.98-58.57 44.98-58.57s-18.65-14.8-27.38-4.06c-6 8.15-36.83 48.2-36.83 48.2l19.23 14.43zm-150.09-59.09c-9.01-8.25-25.91 2.13-25.91 2.13s39.52 55.04 41.12 57.45l19.46-13.73s-25.67-37.61-34.66-45.86h-.01zM640 258.35c-19.78 0-130.91.93-131.06.93v-101c4.81 0 12.42-.4 22.85-1.2 40.88-2.41 70.13-4 87.77-4.81 0 0 12.22-27.19-.59-33.44-3.07-1.18-23.17 4.58-23.17 4.58s-165.22 16.49-232.36 18.05c1.6 8.82 7.62 17.08 15.78 19.55 13.31 3.48 22.69 1.7 49.15.89 24.83-1.6 43.68-2.43 56.51-2.43v99.81H351.41s2.82 22.31 25.51 22.85h107.94v70.92c0 13.97-11.19 21.99-24.48 21.12-14.08.11-26.08-1.15-41.69-1.81 1.99 3.97 6.33 14.39 19.31 21.84 9.88 4.81 16.17 6.57 26.02 6.57 29.56 0 45.67-17.28 44.89-45.31v-73.32h122.36c9.68 0 8.7-23.78 8.7-23.78l.03-.01z"></path></svg></a></span><span><a href="https://www.douban.com/people/183064260/" title="豆瓣: ddadaal" target="_blank" class="block transition hover:scale-125" rel="noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" height="22.400000000000002" width="22.400000000000002" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M.51 3.06h22.98V.755H.51V3.06Zm20.976 2.537v9.608h-2.137l-1.669 5.76H24v2.28H0v-2.28h6.32l-1.67-5.76H2.515V5.597h18.972Zm-5.066 9.608H7.58l1.67 5.76h5.501l1.67-5.76ZM18.367 7.9H5.634v5.025h12.733V7.9Z"></path></svg></a></span></div></div><p class="text-center">© <!-- -->2023<!-- --> | <!-- -->用 ❤ 制作</p></div><div><span class="footer-title">🚀 <!-- -->强力驱动</span><a class="link link-hover" target="_blank" href="https://reactjs.org/" rel="noreferrer">React</a><a class="link link-hover" target="_blank" href="https://www.gatsbyjs.org/" rel="noreferrer">Next.js</a><a class="link link-hover" target="_blank" href="https://pages.github.com/" rel="noreferrer">GitHub Pages</a><a class="link link-hover" target="_blank" href="https://www.typescriptlang.org/" rel="noreferrer">TypeScript</a></div><div><span class="footer-title">🎨 <!-- -->描绘主题</span><a class="link link-hover" target="_blank" href="https://reactstrap.github.io/" rel="noreferrer">daisyui</a><a class="link link-hover" target="_blank" href="https://bootswatch.com/flatly/" rel="noreferrer">tailwind</a></div><div><span class="footer-title">🎓 <!-- -->联系我</span><a class="link link-hover" target="_blank" href="https://idealclover.top" rel="noreferrer">idealclover - 翠翠酱的个人网站</a><a class="link link-hover" target="_blank" href="https://sephidator.xyz" rel="noreferrer">Sephidator - Sephidator的个人博客</a><a class="link link-hover" target="_blank" href="https://iznauy.github.io/" rel="noreferrer">iznauy - 个人博客</a><a class="link link-hover" target="_blank" href="https://aironoria.github.io" rel="noreferrer">Aironoria - 陈俊宇的个人博客</a><a class="link link-hover" target="_blank" href="https://jbesu.com/" rel="noreferrer">forewing - 个人主页</a><a class="link link-hover" target="_blank" href="https://weiser.fun" rel="noreferrer">Weiser - 个人主页</a></div></div></footer><script src="/_next/static/chunks/webpack-4c4848671ede32d9.js" async=""></script><script src="/_next/static/chunks/9fed808d-69a30961282abef4.js" async=""></script><script src="/_next/static/chunks/890-9e3be26fb7cfc3a1.js" async=""></script><script src="/_next/static/chunks/main-app-bca969b2b4dec788.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/dc5b98f4c3923695.css\",{\"as\":\"style\"}]\n0:\"$L2\"\n"])</script><script>self.__next_f.push([1,"3:HL[\"/_next/static/css/c61fd82c0ec3c846.css\",{\"as\":\"style\"}]\n4:HL[\"/_next/static/css/550cc6711c036586.css\",{\"as\":\"style\"}]\n"])</script><script>self.__next_f.push([1,"5:I{\"id\":\"7335\",\"chunks\":[\"272:static/chunks/webpack-4c4848671ede32d9.js\",\"159:static/chunks/9fed808d-69a30961282abef4.js\",\"890:static/chunks/890-9e3be26fb7cfc3a1.js\"],\"name\":\"\",\"async\":false}\n7:I{\"id\":\"5\",\"chunks\":[\"272:static/chunks/webpack-4c4848671ede32d9.js\",\"159:static/chunks/9fed808d-69a30961282abef4.js\",\"890:static/chunks/890-9e3be26fb7cfc3a1.js\"],\"name\":\"\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"2:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/dc5b98f4c3923695.css\",\"precedence\":\"next\"}]],[\"$\",\"$L5\",null,{\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/articles/typed-i18n-with-template-literal-types\",\"initialTree\":[\"\",{\"children\":[\"articles\",{\"children\":[[\"params\",\"typed-i18n-with-template-literal-types\",\"oc\"],{\"children\":[\"__PAGE__?{\\\"params\\\":[\\\"typed-i18n-with-template-literal-types\\\"]}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":[\"$L6\",null],\"globalErrorComponent\":\"$7\",\"notFound\":\"$L8\",\"asNotFound\":false,\"children\":[\"$L9\",null]}]]\n"])</script><script>self.__next_f.push([1,"a:I{\"id\":\"686\",\"chunks\":[\"309:static/chunks/70bb1395-8b005f7f53c5ebef.js\",\"270:static/chunks/270-98733365f87156fa.js\",\"647:static/chunks/647-9f8470e794e19f41.js\",\"813:static/chunks/813-cee425865faf8491.js\",\"185:static/chunks/app/layout-991b4e09cefdef2b.js\"],\"name\":\"RootLayout\",\"async\":false}\nb:I{\"id\":\"1895\",\"chunks\":[\"309:static/chunks/70bb1395-8b005f7f53c5ebef.js\",\"270:static/chunks/270-98733365f87156fa.js\",\"647:static/chunks/647-9f8470e794e19f41.js\",\"813:static/chunks/813-cee425865faf8491.js\",\"185:static/"])</script><script>self.__next_f.push([1,"chunks/app/layout-991b4e09cefdef2b.js\"],\"name\":\"Header\",\"async\":false}\nc:I{\"id\":\"9311\",\"chunks\":[\"272:static/chunks/webpack-4c4848671ede32d9.js\",\"159:static/chunks/9fed808d-69a30961282abef4.js\",\"890:static/chunks/890-9e3be26fb7cfc3a1.js\"],\"name\":\"\",\"async\":false}\nd:I{\"id\":\"6467\",\"chunks\":[\"272:static/chunks/webpack-4c4848671ede32d9.js\",\"159:static/chunks/9fed808d-69a30961282abef4.js\",\"890:static/chunks/890-9e3be26fb7cfc3a1.js\"],\"name\":\"\",\"async\":false}\nf:I{\"id\":\"5707\",\"chunks\":[\"309:static/chunks/70bb1395-8"])</script><script>self.__next_f.push([1,"b005f7f53c5ebef.js\",\"975:static/chunks/dc6764d5-18938ac2fbe13f06.js\",\"344:static/chunks/2e69a9b8-691073cd158eaece.js\",\"270:static/chunks/270-98733365f87156fa.js\",\"647:static/chunks/647-9f8470e794e19f41.js\",\"813:static/chunks/813-cee425865faf8491.js\",\"382:static/chunks/382-7084e3b01c16da04.js\",\"94:static/chunks/app/about/[id]/[[...lang]]/page-26b0ace881630605.js\"],\"name\":\"Localized\",\"async\":false}\n10:I{\"id\":\"4375\",\"chunks\":[\"309:static/chunks/70bb1395-8b005f7f53c5ebef.js\",\"270:static/chunks/270-98733365f8715"])</script><script>self.__next_f.push([1,"6fa.js\",\"647:static/chunks/647-9f8470e794e19f41.js\",\"813:static/chunks/813-cee425865faf8491.js\",\"185:static/chunks/app/layout-991b4e09cefdef2b.js\"],\"name\":\"ArticleLink\",\"async\":false}\n11:I{\"id\":\"5298\",\"chunks\":[\"309:static/chunks/70bb1395-8b005f7f53c5ebef.js\",\"270:static/chunks/270-98733365f87156fa.js\",\"647:static/chunks/647-9f8470e794e19f41.js\",\"813:static/chunks/813-cee425865faf8491.js\",\"185:static/chunks/app/layout-991b4e09cefdef2b.js\"],\"name\":\"RunningTime\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"9:[\"$\",\"$La\",null,{\"children\":[[\"$\",\"$Lb\",null,{\"resumeLangs\":[\"cn\",\"en\"]}],[\"$\",\"div\",null,{\"children\":[\"$\",\"$Lc\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Ld\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$Lc\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"articles\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Ld\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$Lc\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"articles\",\"children\",[\"params\",\"typed-i18n-with-template-literal-types\",\"oc\"],\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Ld\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$Le\",null],\"segment\":\"__PAGE__?{\\\"params\\\":[\\\"typed-i18n-with-template-literal-types\\\"]}\"},\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/c61fd82c0ec3c846.css\",\"precedence\":\"next\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/550cc6711c036586.css\",\"precedence\":\"next\"}]]}],\"segment\":[\"params\",\"typed-i18n-with-template-literal-types\",\"oc\"]},\"styles\":[]}],\"segment\":\"articles\"},\"styles\":[]}]}],[\"$\",\"footer\",null,{\"className\":\"bg-base-200 text-base-content\",\"children\":[\"$\",\"div\",null,{\"className\":\"footer py-6 max-w-7xl mx-auto px-4\",\"children\":[[\"$\",\"div\",null,{\"className\":\"space-y-1\",\"children\":[[\"$\",\"p\",null,{\"children\":[\"👨🏼‍💻 \",[\"$\",\"$Lf\",null,{\"id\":\"footer.codeBy\",\"args\":[[\"$\",\"$L10\",\"about/me\",{\"className\":\"link link-hover\",\"baseUrl\":\"/about/me\",\"children\":\"ddadaal\"}]]}]]}],[\"$\",\"p\",null,{\"children\":[\"📝\",[\"$\",\"$Lf\",null,{\"id\":\"footer.license\",\"args\":[[\"$\",\"a\",\"license\",{\"rel\":\"licene noreferrer\",\"target\":\"_blank\",\"className\":\"link\",\"href\":\"https://creativecommons.org/licenses/by-sa/4.0/\",\"children\":\"CC BY-SA 4.0\"}]]}]]}],[\"$\",\"$L11\",null,{\"serverStartTime\":\"2023-06-11T03:13:31.982+00:00\"}],[\"$\",\"p\",null,{\"children\":[\"⏲️ \",[\"$\",\"$Lf\",null,{\"id\":\"statistics.lastUpdated\"}],\":  \",\"2023-06-11 03:13:31 UTC+0\"]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"p\",null,{\"children\":[\"📲 \",[\"$\",\"$Lf\",null,{\"id\":\"footer.contacts\"}]]}],[\"$\",\"div\",null,{\"className\":\"flex py-2 gap-2\",\"children\":[[\"$\",\"span\",\"http://wpa.qq.com/msgrd?v=3\u0026uin=540232834\u0026site=qq\u0026menu=yes\",{\"children\":[\"$\",\"a\",null,{\"href\":\"http://wpa.qq.com/msgrd?v=3\u0026uin=540232834\u0026site=qq\u0026menu=yes\",\"title\":\"QQ: 540232834\",\"target\":\"_blank\",\"className\":\"block transition hover:scale-125\",\"rel\":\"noreferrer\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 448 512\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741 0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792 0 0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704z\",\"children\":\"$undefined\"}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":22.400000000000002,\"width\":22.400000000000002,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}]}],[\"$\",\"span\",\"mailto://ddadaal.me@outlook.com\",{\"children\":[\"$\",\"a\",null,{\"href\":\"mailto://ddadaal.me@outlook.com\",\"title\":\"E-mail: ddadaal@outlook.com\",\"target\":\"_blank\",\"className\":\"block transition hover:scale-125\",\"rel\":\"noreferrer\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 576 512\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M160 448c-25.6 0-51.2-22.4-64-32-64-44.8-83.2-60.8-96-70.4V480c0 17.67 14.33 32 32 32h256c17.67 0 32-14.33 32-32V345.6c-12.8 9.6-32 25.6-96 70.4-12.8 9.6-38.4 32-64 32zm128-192H32c-17.67 0-32 14.33-32 32v16c25.6 19.2 22.4 19.2 115.2 86.4 9.6 6.4 28.8 25.6 44.8 25.6s35.2-19.2 44.8-22.4c92.8-67.2 89.6-67.2 115.2-86.4V288c0-17.67-14.33-32-32-32zm256-96H224c-17.67 0-32 14.33-32 32v32h96c33.21 0 60.59 25.42 63.71 57.82l.29-.22V416h192c17.67 0 32-14.33 32-32V192c0-17.67-14.33-32-32-32zm-32 128h-64v-64h64v64zm-352-96c0-35.29 28.71-64 64-64h224V32c0-17.67-14.33-32-32-32H96C78.33 0 64 14.33 64 32v192h96v-32z\",\"children\":\"$undefined\"}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":22.400000000000002,\"width\":22.400000000000002,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}]}],[\"$\",\"span\",\"https://www.linkedin.com/in/chenjunda/\",{\"children\":[\"$\",\"a\",null,{\"href\":\"https://www.linkedin.com/in/chenjunda/\",\"title\":\"LinkedIn: 陈俊达\",\"target\":\"_blank\",\"className\":\"block transition hover:scale-125\",\"rel\":\"noreferrer\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 448 512\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z\",\"children\":\"$undefined\"}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":22.400000000000002,\"width\":22.400000000000002,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}]}],[\"$\",\"span\",\"https://github.com/ddadaal\",{\"children\":[\"$\",\"a\",null,{\"href\":\"https://github.com/ddadaal\",\"title\":\"GitHub: ddadaal\",\"target\":\"_blank\",\"className\":\"block transition hover:scale-125\",\"rel\":\"noreferrer\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 496 512\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z\",\"children\":\"$undefined\"}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":22.400000000000002,\"width\":22.400000000000002,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}]}],[\"$\",\"span\",\"https://steamcommunity.com/profiles/76561198104889782\",{\"children\":[\"$\",\"a\",null,{\"href\":\"https://steamcommunity.com/profiles/76561198104889782\",\"title\":\"Steam: Victor Crubs\",\"target\":\"_blank\",\"className\":\"block transition hover:scale-125\",\"rel\":\"noreferrer\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 496 512\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M496 256c0 137-111.2 248-248.4 248-113.8 0-209.6-76.3-239-180.4l95.2 39.3c6.4 32.1 34.9 56.4 68.9 56.4 39.2 0 71.9-32.4 70.2-73.5l84.5-60.2c52.1 1.3 95.8-40.9 95.8-93.5 0-51.6-42-93.5-93.7-93.5s-93.7 42-93.7 93.5v1.2L176.6 279c-15.5-.9-30.7 3.4-43.5 12.1L0 236.1C10.2 108.4 117.1 8 247.6 8 384.8 8 496 119 496 256zM155.7 384.3l-30.5-12.6a52.79 52.79 0 0 0 27.2 25.8c26.9 11.2 57.8-1.6 69-28.4 5.4-13 5.5-27.3.1-40.3-5.4-13-15.5-23.2-28.5-28.6-12.9-5.4-26.7-5.2-38.9-.6l31.5 13c19.8 8.2 29.2 30.9 20.9 50.7-8.3 19.9-31 29.2-50.8 21zm173.8-129.9c-34.4 0-62.4-28-62.4-62.3s28-62.3 62.4-62.3 62.4 28 62.4 62.3-27.9 62.3-62.4 62.3zm.1-15.6c25.9 0 46.9-21 46.9-46.8 0-25.9-21-46.8-46.9-46.8s-46.9 21-46.9 46.8c.1 25.8 21.1 46.8 46.9 46.8z\",\"children\":\"$undefined\"}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":22.400000000000002,\"width\":22.400000000000002,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}]}],[\"$\",\"span\",\"https://zhihu.com/people/VicCrubs\",{\"children\":[\"$\",\"a\",null,{\"href\":\"https://zhihu.com/people/VicCrubs\",\"title\":\"知乎：陈俊达\",\"target\":\"_blank\",\"className\":\"block transition hover:scale-125\",\"rel\":\"noreferrer\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 640 512\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M170.54 148.13v217.54l23.43.01 7.71 26.37 42.01-26.37h49.53V148.13H170.54zm97.75 193.93h-27.94l-27.9 17.51-5.08-17.47-11.9-.04V171.75h72.82v170.31zm-118.46-94.39H97.5c1.74-27.1 2.2-51.59 2.2-73.46h51.16s1.97-22.56-8.58-22.31h-88.5c3.49-13.12 7.87-26.66 13.12-40.67 0 0-24.07 0-32.27 21.57-3.39 8.9-13.21 43.14-30.7 78.12 5.89-.64 25.37-1.18 36.84-22.21 2.11-5.89 2.51-6.66 5.14-14.53h28.87c0 10.5-1.2 66.88-1.68 73.44H20.83c-11.74 0-15.56 23.62-15.56 23.62h65.58C66.45 321.1 42.83 363.12 0 396.34c20.49 5.85 40.91-.93 51-9.9 0 0 22.98-20.9 35.59-69.25l53.96 64.94s7.91-26.89-1.24-39.99c-7.58-8.92-28.06-33.06-36.79-41.81L87.9 311.95c4.36-13.98 6.99-27.55 7.87-40.67h61.65s-.09-23.62-7.59-23.62v.01zm412.02-1.6c20.83-25.64 44.98-58.57 44.98-58.57s-18.65-14.8-27.38-4.06c-6 8.15-36.83 48.2-36.83 48.2l19.23 14.43zm-150.09-59.09c-9.01-8.25-25.91 2.13-25.91 2.13s39.52 55.04 41.12 57.45l19.46-13.73s-25.67-37.61-34.66-45.86h-.01zM640 258.35c-19.78 0-130.91.93-131.06.93v-101c4.81 0 12.42-.4 22.85-1.2 40.88-2.41 70.13-4 87.77-4.81 0 0 12.22-27.19-.59-33.44-3.07-1.18-23.17 4.58-23.17 4.58s-165.22 16.49-232.36 18.05c1.6 8.82 7.62 17.08 15.78 19.55 13.31 3.48 22.69 1.7 49.15.89 24.83-1.6 43.68-2.43 56.51-2.43v99.81H351.41s2.82 22.31 25.51 22.85h107.94v70.92c0 13.97-11.19 21.99-24.48 21.12-14.08.11-26.08-1.15-41.69-1.81 1.99 3.97 6.33 14.39 19.31 21.84 9.88 4.81 16.17 6.57 26.02 6.57 29.56 0 45.67-17.28 44.89-45.31v-73.32h122.36c9.68 0 8.7-23.78 8.7-23.78l.03-.01z\",\"children\":\"$undefined\"}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":22.400000000000002,\"width\":22.400000000000002,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}]}],[\"$\",\"span\",\"https://www.douban.com/people/183064260/\",{\"children\":[\"$\",\"a\",null,{\"href\":\"https://www.douban.com/people/183064260/\",\"title\":\"豆瓣: ddadaal\",\"target\":\"_blank\",\"className\":\"block transition hover:scale-125\",\"rel\":\"noreferrer\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"role\":\"img\",\"viewBox\":\"0 0 24 24\",\"children\":[\"$undefined\",[[\"$\",\"title\",\"0\",{\"children\":[]}],[\"$\",\"path\",\"1\",{\"d\":\"M.51 3.06h22.98V.755H.51V3.06Zm20.976 2.537v9.608h-2.137l-1.669 5.76H24v2.28H0v-2.28h6.32l-1.67-5.76H2.515V5.597h18.972Zm-5.066 9.608H7.58l1.67 5.76h5.501l1.67-5.76ZM18.367 7.9H5.634v5.025h12.733V7.9Z\",\"children\":\"$undefined\"}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":22.400000000000002,\"width\":22.400000000000002,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}]}]]}]]}],[\"$\",\"p\",null,{\"className\":\"text-center\",\"children\":[\"© \",2023,\" | \",[\"$\",\"$Lf\",null,{\"id\":\"footer.madeWithLove\"}]]}]]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"footer-title\",\"children\":[\"🚀 \",[\"$\",\"$Lf\",null,{\"id\":\"footer.poweredBy\"}]]}],[[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://reactjs.org/\",\"rel\":\"noreferrer\",\"children\":\"React\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://www.gatsbyjs.org/\",\"rel\":\"noreferrer\",\"children\":\"Next.js\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://pages.github.com/\",\"rel\":\"noreferrer\",\"children\":\"GitHub Pages\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://www.typescriptlang.org/\",\"rel\":\"noreferrer\",\"children\":\"TypeScript\"}]]]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"footer-title\",\"children\":[\"🎨 \",[\"$\",\"$Lf\",null,{\"id\":\"footer.themedWith\"}]]}],[[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://reactstrap.github.io/\",\"rel\":\"noreferrer\",\"children\":\"daisyui\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://bootswatch.com/flatly/\",\"rel\":\"noreferrer\",\"children\":\"tailwind\"}]]]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"footer-title\",\"children\":[\"🎓 \",[\"$\",\"$Lf\",null,{\"id\":\"footer.contacts\"}]]}],[[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://idealclover.top\",\"rel\":\"noreferrer\",\"children\":\"idealclover - 翠翠酱的个人网站\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://sephidator.xyz\",\"rel\":\"noreferrer\",\"children\":\"Sephidator - Sephidator的个人博客\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://iznauy.github.io/\",\"rel\":\"noreferrer\",\"children\":\"iznauy - 个人博客\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://aironoria.github.io\",\"rel\":\"noreferrer\",\"children\":\"Aironoria - 陈俊宇的个人博客\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://jbesu.com/\",\"rel\":\"noreferrer\",\"children\":\"forewing - 个人主页\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://weiser.fun\",\"rel\":\"noreferrer\",\"children\":\"Weiser - 个人主页\"}]]]}]]}]}]]}]\n"])</script><script>self.__next_f.push([1,"8:[\"$\",\"$La\",null,{\"children\":[[\"$\",\"$Lb\",null,{\"resumeLangs\":[\"cn\",\"en\"]}],[\"$\",\"div\",null,{\"children\":[\"$L12\",\"$undefined\",[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]]}],[\"$\",\"footer\",null,{\"className\":\"bg-base-200 text-base-content\",\"children\":[\"$\",\"div\",null,{\"className\":\"footer py-6 max-w-7xl mx-auto px-4\",\"children\":[[\"$\",\"div\",null,{\"className\":\"space-y-1\",\"children\":[[\"$\",\"p\",null,{\"children\":[\"👨🏼‍💻 \",[\"$\",\"$Lf\",null,{\"id\":\"footer.codeBy\",\"args\":[[\"$\",\"$L10\",\"about/me\",{\"className\":\"link link-hover\",\"baseUrl\":\"/about/me\",\"children\":\"ddadaal\"}]]}]]}],[\"$\",\"p\",null,{\"children\":[\"📝\",[\"$\",\"$Lf\",null,{\"id\":\"footer.license\",\"args\":[[\"$\",\"a\",\"license\",{\"rel\":\"licene noreferrer\",\"target\":\"_blank\",\"className\":\"link\",\"href\":\"https://creativecommons.org/licenses/by-sa/4.0/\",\"children\":\"CC BY-SA 4.0\"}]]}]]}],[\"$\",\"$L11\",null,{\"serverStartTime\":\"2023-06-11T03:13:31.982+00:00\"}],[\"$\",\"p\",null,{\"children\":[\"⏲️ \",[\"$\",\"$Lf\",null,{\"id\":\"statistics.lastUpdated\"}],\":  \",\"2023-06-11 03:13:31 UTC+0\"]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"p\",null,{\"children\":[\"📲 \",[\"$\",\"$Lf\",null,{\"id\":\"footer.contacts\"}]]}],[\"$\",\"div\",null,{\"className\":\"flex py-2 gap-2\",\"children\":[[\"$\",\"span\",\"http://wpa.qq.com/msgrd?v=3\u0026uin=540232834\u0026site=qq\u0026menu=yes\",{\"children\":[\"$\",\"a\",null,{\"href\":\"http://wpa.qq.com/msgrd?v=3\u0026uin=540232834\u0026site=qq\u0026menu=yes\",\"title\":\"QQ: 540232834\",\"target\":\"_blank\",\"className\":\"block transition hover:scale-125\",\"rel\":\"noreferrer\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 448 512\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741 0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792 0 0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704z\",\"children\":\"$undefined\"}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":22.400000000000002,\"width\":22.400000000000002,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}]}],[\"$\",\"span\",\"mailto://ddadaal.me@outlook.com\",{\"children\":[\"$\",\"a\",null,{\"href\":\"mailto://ddadaal.me@outlook.com\",\"title\":\"E-mail: ddadaal@outlook.com\",\"target\":\"_blank\",\"className\":\"block transition hover:scale-125\",\"rel\":\"noreferrer\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 576 512\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M160 448c-25.6 0-51.2-22.4-64-32-64-44.8-83.2-60.8-96-70.4V480c0 17.67 14.33 32 32 32h256c17.67 0 32-14.33 32-32V345.6c-12.8 9.6-32 25.6-96 70.4-12.8 9.6-38.4 32-64 32zm128-192H32c-17.67 0-32 14.33-32 32v16c25.6 19.2 22.4 19.2 115.2 86.4 9.6 6.4 28.8 25.6 44.8 25.6s35.2-19.2 44.8-22.4c92.8-67.2 89.6-67.2 115.2-86.4V288c0-17.67-14.33-32-32-32zm256-96H224c-17.67 0-32 14.33-32 32v32h96c33.21 0 60.59 25.42 63.71 57.82l.29-.22V416h192c17.67 0 32-14.33 32-32V192c0-17.67-14.33-32-32-32zm-32 128h-64v-64h64v64zm-352-96c0-35.29 28.71-64 64-64h224V32c0-17.67-14.33-32-32-32H96C78.33 0 64 14.33 64 32v192h96v-32z\",\"children\":\"$undefined\"}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":22.400000000000002,\"width\":22.400000000000002,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}]}],[\"$\",\"span\",\"https://www.linkedin.com/in/chenjunda/\",{\"children\":[\"$\",\"a\",null,{\"href\":\"https://www.linkedin.com/in/chenjunda/\",\"title\":\"LinkedIn: 陈俊达\",\"target\":\"_blank\",\"className\":\"block transition hover:scale-125\",\"rel\":\"noreferrer\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 448 512\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z\",\"children\":\"$undefined\"}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":22.400000000000002,\"width\":22.400000000000002,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}]}],[\"$\",\"span\",\"https://github.com/ddadaal\",{\"children\":[\"$\",\"a\",null,{\"href\":\"https://github.com/ddadaal\",\"title\":\"GitHub: ddadaal\",\"target\":\"_blank\",\"className\":\"block transition hover:scale-125\",\"rel\":\"noreferrer\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 496 512\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z\",\"children\":\"$undefined\"}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":22.400000000000002,\"width\":22.400000000000002,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}]}],[\"$\",\"span\",\"https://steamcommunity.com/profiles/76561198104889782\",{\"children\":[\"$\",\"a\",null,{\"href\":\"https://steamcommunity.com/profiles/76561198104889782\",\"title\":\"Steam: Victor Crubs\",\"target\":\"_blank\",\"className\":\"block transition hover:scale-125\",\"rel\":\"noreferrer\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 496 512\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M496 256c0 137-111.2 248-248.4 248-113.8 0-209.6-76.3-239-180.4l95.2 39.3c6.4 32.1 34.9 56.4 68.9 56.4 39.2 0 71.9-32.4 70.2-73.5l84.5-60.2c52.1 1.3 95.8-40.9 95.8-93.5 0-51.6-42-93.5-93.7-93.5s-93.7 42-93.7 93.5v1.2L176.6 279c-15.5-.9-30.7 3.4-43.5 12.1L0 236.1C10.2 108.4 117.1 8 247.6 8 384.8 8 496 119 496 256zM155.7 384.3l-30.5-12.6a52.79 52.79 0 0 0 27.2 25.8c26.9 11.2 57.8-1.6 69-28.4 5.4-13 5.5-27.3.1-40.3-5.4-13-15.5-23.2-28.5-28.6-12.9-5.4-26.7-5.2-38.9-.6l31.5 13c19.8 8.2 29.2 30.9 20.9 50.7-8.3 19.9-31 29.2-50.8 21zm173.8-129.9c-34.4 0-62.4-28-62.4-62.3s28-62.3 62.4-62.3 62.4 28 62.4 62.3-27.9 62.3-62.4 62.3zm.1-15.6c25.9 0 46.9-21 46.9-46.8 0-25.9-21-46.8-46.9-46.8s-46.9 21-46.9 46.8c.1 25.8 21.1 46.8 46.9 46.8z\",\"children\":\"$undefined\"}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":22.400000000000002,\"width\":22.400000000000002,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}]}],[\"$\",\"span\",\"https://zhihu.com/people/VicCrubs\",{\"children\":[\"$\",\"a\",null,{\"href\":\"https://zhihu.com/people/VicCrubs\",\"title\":\"知乎：陈俊达\",\"target\":\"_blank\",\"className\":\"block transition hover:scale-125\",\"rel\":\"noreferrer\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 640 512\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M170.54 148.13v217.54l23.43.01 7.71 26.37 42.01-26.37h49.53V148.13H170.54zm97.75 193.93h-27.94l-27.9 17.51-5.08-17.47-11.9-.04V171.75h72.82v170.31zm-118.46-94.39H97.5c1.74-27.1 2.2-51.59 2.2-73.46h51.16s1.97-22.56-8.58-22.31h-88.5c3.49-13.12 7.87-26.66 13.12-40.67 0 0-24.07 0-32.27 21.57-3.39 8.9-13.21 43.14-30.7 78.12 5.89-.64 25.37-1.18 36.84-22.21 2.11-5.89 2.51-6.66 5.14-14.53h28.87c0 10.5-1.2 66.88-1.68 73.44H20.83c-11.74 0-15.56 23.62-15.56 23.62h65.58C66.45 321.1 42.83 363.12 0 396.34c20.49 5.85 40.91-.93 51-9.9 0 0 22.98-20.9 35.59-69.25l53.96 64.94s7.91-26.89-1.24-39.99c-7.58-8.92-28.06-33.06-36.79-41.81L87.9 311.95c4.36-13.98 6.99-27.55 7.87-40.67h61.65s-.09-23.62-7.59-23.62v.01zm412.02-1.6c20.83-25.64 44.98-58.57 44.98-58.57s-18.65-14.8-27.38-4.06c-6 8.15-36.83 48.2-36.83 48.2l19.23 14.43zm-150.09-59.09c-9.01-8.25-25.91 2.13-25.91 2.13s39.52 55.04 41.12 57.45l19.46-13.73s-25.67-37.61-34.66-45.86h-.01zM640 258.35c-19.78 0-130.91.93-131.06.93v-101c4.81 0 12.42-.4 22.85-1.2 40.88-2.41 70.13-4 87.77-4.81 0 0 12.22-27.19-.59-33.44-3.07-1.18-23.17 4.58-23.17 4.58s-165.22 16.49-232.36 18.05c1.6 8.82 7.62 17.08 15.78 19.55 13.31 3.48 22.69 1.7 49.15.89 24.83-1.6 43.68-2.43 56.51-2.43v99.81H351.41s2.82 22.31 25.51 22.85h107.94v70.92c0 13.97-11.19 21.99-24.48 21.12-14.08.11-26.08-1.15-41.69-1.81 1.99 3.97 6.33 14.39 19.31 21.84 9.88 4.81 16.17 6.57 26.02 6.57 29.56 0 45.67-17.28 44.89-45.31v-73.32h122.36c9.68 0 8.7-23.78 8.7-23.78l.03-.01z\",\"children\":\"$undefined\"}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":22.400000000000002,\"width\":22.400000000000002,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}]}],[\"$\",\"span\",\"https://www.douban.com/people/183064260/\",{\"children\":[\"$\",\"a\",null,{\"href\":\"https://www.douban.com/people/183064260/\",\"title\":\"豆瓣: ddadaal\",\"target\":\"_blank\",\"className\":\"block transition hover:scale-125\",\"rel\":\"noreferrer\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"role\":\"img\",\"viewBox\":\"0 0 24 24\",\"children\":[\"$undefined\",[[\"$\",\"title\",\"0\",{\"children\":[]}],[\"$\",\"path\",\"1\",{\"d\":\"M.51 3.06h22.98V.755H.51V3.06Zm20.976 2.537v9.608h-2.137l-1.669 5.76H24v2.28H0v-2.28h6.32l-1.67-5.76H2.515V5.597h18.972Zm-5.066 9.608H7.58l1.67 5.76h5.501l1.67-5.76ZM18.367 7.9H5.634v5.025h12.733V7.9Z\",\"children\":\"$undefined\"}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":22.400000000000002,\"width\":22.400000000000002,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}]}]]}]]}],[\"$\",\"p\",null,{\"className\":\"text-center\",\"children\":[\"© \",2023,\" | \",[\"$\",\"$Lf\",null,{\"id\":\"footer.madeWithLove\"}]]}]]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"footer-title\",\"children\":[\"🚀 \",[\"$\",\"$Lf\",null,{\"id\":\"footer.poweredBy\"}]]}],[[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://reactjs.org/\",\"rel\":\"noreferrer\",\"children\":\"React\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://www.gatsbyjs.org/\",\"rel\":\"noreferrer\",\"children\":\"Next.js\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://pages.github.com/\",\"rel\":\"noreferrer\",\"children\":\"GitHub Pages\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://www.typescriptlang.org/\",\"rel\":\"noreferrer\",\"children\":\"TypeScript\"}]]]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"footer-title\",\"children\":[\"🎨 \",[\"$\",\"$Lf\",null,{\"id\":\"footer.themedWith\"}]]}],[[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://reactstrap.github.io/\",\"rel\":\"noreferrer\",\"children\":\"daisyui\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://bootswatch.com/flatly/\",\"rel\":\"noreferrer\",\"children\":\"tailwind\"}]]]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"footer-title\",\"children\":[\"🎓 \",[\"$\",\"$Lf\",null,{\"id\":\"footer.contacts\"}]]}],[[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://idealclover.top\",\"rel\":\"noreferrer\",\"children\":\"idealclover - 翠翠酱的个人网站\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://sephidator.xyz\",\"rel\":\"noreferrer\",\"children\":\"Sephidator - Sephidator的个人博客\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://iznauy.github.io/\",\"rel\":\"noreferrer\",\"children\":\"iznauy - 个人博客\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://aironoria.github.io\",\"rel\":\"noreferrer\",\"children\":\"Aironoria - 陈俊宇的个人博客\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://jbesu.com/\",\"rel\":\"noreferrer\",\"children\":\"forewing - 个人主页\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://weiser.fun\",\"rel\":\"noreferrer\",\"children\":\"Weiser - 个人主页\"}]]]}]]}]}]]}]\n"])</script><script>self.__next_f.push([1,"6:[[[\"$\",\"meta\",null,{\"charSet\":\"utf-8\"}],[\"$\",\"title\",null,{\"children\":\"react-typed-i18n: 使用Template Literal Types实现强类型的i18n - ddadaal.me\"}],[\"$\",\"meta\",null,{\"name\":\"description\",\"content\":\"ddadaal's personal website\"}],null,null,[\"$\",\"link\",null,{\"rel\":\"manifest\",\"href\":\"/site.webmanifest\"}],null,null,null,null,null,[\"$\",\"meta\",null,{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],null,null,null,null,null,null,null,null,null,null,[]],[null,null,null,null],null,null,[null,null,null,null,null],null,null,null,null,[null,[[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"any\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/icon.svg?35be8e76be1c3618\",\"type\":\"image/svg+xml\",\"sizes\":\"500x500\"}]],[[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"href\":\"/apple-icon.png?5334a64f42000bb0\",\"type\":\"image/png\",\"sizes\":\"180x180\"}]],null]]\n"])</script><script>self.__next_f.push([1,"e:\"$L13\"\n12:[[[\"$\",\"meta\",null,{\"charSet\":\"utf-8\"}],null,null,null,null,null,null,null,null,null,null,[\"$\",\"meta\",null,{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],null,null,null,null,null,null,null,null,null,null,[]],[null,null,null,null],null,null,[null,null,null,null,null],null,null,null,null,null]\n"])</script><script>self.__next_f.push([1,"14:I{\"id\":\"6091\",\"chunks\":[\"309:static/chunks/70bb1395-8b005f7f53c5ebef.js\",\"975:static/chunks/dc6764d5-18938ac2fbe13f06.js\",\"344:static/chunks/2e69a9b8-691073cd158eaece.js\",\"270:static/chunks/270-98733365f87156fa.js\",\"647:static/chunks/647-9f8470e794e19f41.js\",\"813:static/chunks/813-cee425865faf8491.js\",\"382:static/chunks/382-7084e3b01c16da04.js\",\"94:static/chunks/app/about/[id]/[[...lang]]/page-26b0ace881630605.js\"],\"name\":\"ArticleFrontmatter\",\"async\":false}\n16:I{\"id\":\"3303\",\"chunks\":[\"309:static/chunks/7"])</script><script>self.__next_f.push([1,"0bb1395-8b005f7f53c5ebef.js\",\"975:static/chunks/dc6764d5-18938ac2fbe13f06.js\",\"344:static/chunks/2e69a9b8-691073cd158eaece.js\",\"270:static/chunks/270-98733365f87156fa.js\",\"647:static/chunks/647-9f8470e794e19f41.js\",\"813:static/chunks/813-cee425865faf8491.js\",\"382:static/chunks/382-7084e3b01c16da04.js\",\"94:static/chunks/app/about/[id]/[[...lang]]/page-26b0ace881630605.js\"],\"name\":\"RelatedArticles\",\"async\":false}\n17:I{\"id\":\"1763\",\"chunks\":[\"309:static/chunks/70bb1395-8b005f7f53c5ebef.js\",\"975:static/chunks/dc"])</script><script>self.__next_f.push([1,"6764d5-18938ac2fbe13f06.js\",\"344:static/chunks/2e69a9b8-691073cd158eaece.js\",\"270:static/chunks/270-98733365f87156fa.js\",\"647:static/chunks/647-9f8470e794e19f41.js\",\"813:static/chunks/813-cee425865faf8491.js\",\"382:static/chunks/382-7084e3b01c16da04.js\",\"94:static/chunks/app/about/[id]/[[...lang]]/page-26b0ace881630605.js\"],\"name\":\"CommentPanelWithCurrentLanguage\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"13:[\"$\",\"article\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"bg-neutral px-4 py-8\",\"children\":[\"$\",\"div\",null,{\"className\":\"max-w-7xl mx-auto min-h-[256px] flex justify-center items-center text-neutral-content\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex flex-col items-center animate-slide-up\",\"children\":[[\"$\",\"div\",null,{\"className\":\"my-2\",\"children\":[\"$\",\"h1\",null,{\"className\":\"text-4xl\",\"children\":\"react-typed-i18n: 使用Template Literal Types实现强类型的i18n\"}]}],[\"$\",\"$L14\",null,{\"articleId\":\"typed-i18n-with-template-literal-types\",\"info\":{\"content\":\"\\n# react-typed-i18n\\n\\n最近学习了一下TypeScript最新的[Template Literal Type](https://www.typescriptlang.org/docs/handbook/2/template-literal-types.html)特性，突然想起来可以使用这个实现一个使用字符串字面量的i18n库，以用来替换之前的使用了一些黑魔法的[`simstate-i18n`](https://github.com/ddadaal/simstate-i18n)库，也在这个新库中解决一些技术债，例如只使用React Context、加入测试、增加一些新功能等。\\n\\n新的库名字叫`react-typed-i18n`（[GitHub](https://github.com/ddadaal/react-typed-i18n)）。花了一个周末将功能和测试写好发到了npm上，并很快把本网站用这个新库重写了，体验比较好。\\n\\n于是通过此文章介绍一下i18n的概念、常见实现方式以及本库的亮点，其中介绍部分的内容使用了之前写过的关于`simstate-i18n`的文章 [Strongly Typed i18n with TypeScript](/articles/strongly-typed-i18n-with-typescript)。要想更详细的了解一些i18n的内容以及当时写`simstate-i18n`的考虑，请查阅此文章。\\n\\n# i18n\\n\\n国际化，英文叫Internationalization，简称i18n（因为首尾字符i和n中间有18个字符），是指让一个软件产品能够显示按多国语言显示。\\n\\n比如你正在访问的我的博客就是支持国际化的网站，你可以尝试在右上角的下拉框中切换不同的语言（当前只中文和英文），切换后，整个网站的将会以被选择的语言来显示。\\n\\n国际化的核心是将网站中的所有文本元素都拿出去单独定义，然后在原本应该硬编码文本的地方，使用对所有语言都一致的元素进行代替。在编译时或者运行时，这种元素将会被替换为实际显示的语言的对应的文本元素。\\n\\n例如说，对于这个p元素`\u003cp\u003eHello World\u003c/p\u003e{:html}`如果我想将它支持多语言显示，那么应该做以下的工作：\\n\\n1. 不能直接硬编码文本，而是应该用一个ID之类的东西（例如`helloWorld`）替代硬编码的文本\\n2. 在其他地方，用不同的语言定义ID和文本的对应关系。例如，定义`helloWorld`对应`你好，世界！`（中文）或者`Hello World`（英文）\\n3. 使用一个机制，在编译时或者在运行时将界面中的ID替换为当前语言的文本\\n\\n# 定义ID和文本的对应关系\\n\\n这种ID和文本的对应关系可以有很多种，最简单的就是**KV**，一个ID对应一个文本。iOS ([示例](https://medium.com/lean-localization/ios-localization-tutorial-938231f9f881)) 和 ASP.NET Core MVC ([示例](https://docs.microsoft.com/en-us/aspnet/core/fundamentals/localization?view=aspnetcore-2.2))其实就是这种对应关系。\\n\\n简单的KV对应虽然很简单，但是当文本信息多起来之后，ID可能会非常长，例如：\\n\\n```\\napp.header.userIndicator.loggedIn.dropdown.login.button.text\\napp.header.userIndicator.loggedIn.dropdown.username.button.text\\napp.header.userIndicator.loggedIn.dropdown.logout.button.text\\n```\\n\\nUI基本都是以树结构组合起来的，所以，我们也可以以树结构组织我们的ID，同一个页面、同一个组件下的文本信息组织在同一层级，每个层级之间使用`.`连接。\\n\\n在JS中，我们可以使用对象表示这样的树结构的定义。例如以下例子，两种语言分别定义对象，其key为每个部分的ID，叶节点的value即是对应的文本信息。所有语言的这个这个对象具有相同的结构。那么，英文下的`login`和中文下`登录`这个文本信息对应的ID就是`login.button.text`。\\n\\n```tsx\\n// en.ts, 定义英文的ID的文本对应关系\\nexport default {\\n  login: {\\n    button: {\\n      text: \\\"Login\\\",\\n    },\\n  },\\n}\\n\\n// cn.ts, 定义中文的对应关系\\nexport default {\\n  login: {\\n    button: {\\n      text: \\\"登录\\\",\\n    },\\n  },\\n}\\n```\\n\\n# 通过ID取得当前语言的文本\\n\\n这个ID其实也是一个访问对象属性的路径。通过这样的ID，我们可以很简单的从当前语言的定义对象中取得当前语言的文本。加上一些状态管理的加持，动态切换语言也是很简单的工作。\\n\\n```tsx\\n// 这个组件通过ID获得当前语言的对应的文本。\\nfunction LocalizedString({ id }: { id: string }) {\\n  // 通过React Context等方式或者当前语言的定义对象currentLanguageObject\\n  // ...\\n\\n  // 把ID以.拆开，然后一层一层访问就可以了。\\n  const value = currentLanguageObject;\\n  id.split(\\\".\\\").forEach((k) =\u003e {\\n    value = value[k];\\n  });\\n  return value;\\n}\\n\\n// 一开始我们是把文本硬编码在组件里……\\n\u003cButton\u003eLogin\u003c/Button\u003e\\n\\n// 现在使用LocalizedString来动态获取文本\\n\u003cButton\u003e\u003cLocalizedString id=\\\"login.button.text\\\" /\u003e\u003c/Button\u003e\\n\\n```\\n\\n# 强类型地输入ID\\n\\n上述方式已经能够完成任务了，但是有一个很大的问题：**写id的时候没有类型检查，容易写错**。\\n\\n除了字符串，也有一些其他方式可以来定位，其他方式在我的[simstate-i18n的文章中](/articles/strongly-typed-i18n-with-typescript#make-it-strongly-typed)中有介绍，最后还是认为上一节的字符串和组件的方案具有优势。\\n\\n所以现在的问题变成了**如何强类型地生成ID**。我之前的库[`simstate-i18n`](https://github.com/ddadaal/simstate-i18n)使用`Proxy`来截取对对象的访问路径来生成ID。这个点子比较新奇，也能很好地完成工作，但是总感觉有点奇技淫巧，而且使用Proxy总会对性能产生一些影响。\\n\\n# 使用Template Literal Type计算所有可能的ID\\n\\n[Template Literal Type](https://www.typescriptlang.org/docs/handbook/2/template-literal-types.html)的出现使得我们可以直接使用字符串字面量作为ID，并通过一些类型计算，使得TypeScript可以确定出所有可能的ID，并在编辑器实现自动完成和错误检查。\\n\\nTypeScript支持**字面量类型(literal type)**和**联合类型(union type)**。\\n\\n- 借助字面量类型，TS可以将对象和字符串字面量推断出非常精确的类型：例如，TS可以推断出上面的对象的类型为`{ login: { button: { text: string }}}{:typescript}`。而字符串字面量的类型也可以推断地非常精确，例如`\\\"123\\\"{:typescript}`的类型就是`\\\"123\\\"{:typescript}`。\\n- 通过联合类型，具有多种但是有限种可能取值的值的类型也可以限制地非常精确：例如如果一个变量可能取值`\\\"1\\\"`或者`\\\"2\\\"`，那么这个变量的类型就是`\\\"1\\\" | \\\"2\\\"`\\n\\n而新支持的`Template Literal Type`简单来说，支持了字符串字面量类型的拼接。并且，在拼接的时候，如果有一个操作数是联合类型，将会运用分配律将字符串展开：\\n\\n```ts\\ntype A = \\\"A1\\\" | \\\"A2\\\" ;\\ntype B = \\\"B1\\\" | \\\"B2\\\" ;\\n\\ntype C = `${A}.${B}` // type C = \\\"A1.B1\\\" | \\\"A1.B2\\\" | \\\"A2.B1\\\" | \\\"A2.B2\\\"\\n```\\n\\n在这个功能的基础上，再加上一些TS的高级类型（例如`Mapped types`, `keyof`等等等）我们就可以实现从对象字面量推断出所有可能的ID了。\\n\\n在JS代码中，我们要生成这样的ID是很简单的：对对象做一个DFS就可以了\\n\\n```js\\nconst a = { login: { button: { text: \\\"Login\\\" } } };\\n\\nconst dfs = (obj) =\u003e {\\n  if (typeof obj === \\\"string\\\") {\\n    // 已经到了文本，下一层的key就是\\\"\\\"\\n    return [\\\"\\\"];\\n  }\\n\\n  // 保存至这一层的所有ID\\n  const ids = [];\\n\\n  // 遍历obj的所有key\\n  for (const key in obj) {\\n    // 获得下一层的所有key\\n    const nextLevel = dfs(obj[key]);\\n\\n    // 将本key加到所有下一层key的前面\\n    ids.push(...nextLevel.map((x) =\u003e `${key}.${x}`));\\n  }\\n\\n  return ids;\\n};\\n\\n// 按上述方案写出来的ID最后会多出一个.，使用这个函数把最后的.去掉\\nconst removeTrailingDot = (str) =\u003e str.endsWith(\\\".\\\") ? str.substr(0, str.length-1) : str;\\n\\ndfs(a).map(removeTrailingDot); // [\\\"login.button.text\\\"]\\n```\\n\\n当然，我们可以使用一个更FP的方式写这个`dfs`函数：\\n\\n```js\\nconst flattenArray = (arr) =\u003e arr.reduce((prev, curr) =\u003e {\\n  prev.push(...curr);\\n  return prev;\\n}, []);\\n\\nconst dfs = (obj) =\u003e typeof obj === \\\"string\\\"\\n  ? [\\\"\\\"]\\n  : flattenArray(Object.keys(obj).map((k) =\u003e dfs(obj[k]).map((sk) =\u003e `${k}.${sk}`)));\\n```\\n\\n现在我们要做的，就是在类型的层面、借助TS的类型系统，完成同样的工作。这里先放代码：\\n\\n```ts\\ntype ValueOf\u003cT\u003e = T[keyof T];\\n\\ntype Concat\u003cT, U\u003e = `${string \u0026 T}.${string \u0026 U}`\\n\\ntype LangRec\u003cD extends string | Definitions\u003e = D extends string\\n  ? \\\"\\\"\\n  : `${ValueOf\u003c{[k in keyof D]: Concat\u003ck, LangRec\u003cD[k]\u003e\u003e}\u003e}`\\n\\ntype RemoveTrailingDot\u003cT extends string\u003e = T extends `${infer U}.` ? U : T;\\n\\nexport type Lang\u003cD extends Definitions\u003e = RemoveTrailingDot\u003cLangRec\u003cD\u003e\u003e;\\n\\ntype A = Lang\u003c{ a: \\\"2\\\", b: { c: \\\"4\\\" } }\u003e; // type A = \\\"a\\\" | \\\"b.c\\\"\\n```\\n\\n这段代码看起来很唬人，但是如果我们把类型看成函数，类型参数看作函数参数，就可以看出来，这个代码基本就是JS代码的直接翻译。其中有几点可以提一下：\\n\\n- 递归类型\\n\\n`LangRec`是一个递归类型，可以理解成递归函数，其中`LangRec`是函数名，类型变量`D`为函数的变量。为了使得递归类型能够递归结束，必须需要使用`条件类型 conditional type`判断当前D的实际类型，并当它是字符串（即已经到达对象的叶节点）时，结束递归\\n\\n- Mapped type\\n\\n`ValueOf\u003c{[k in keyof D]: Concat\u003ck, LangRec\u003cD[k]\u003e\u003e}\u003e{:typescript}`处运用了mapped type，将D的每个key（`k in typeof D{:typescript}`）映射成一个新的类型`Concat\u003ck, LangRec\u003cD[k]\u003e\u003e{:typescript}`。\\n\\n本来mapped type只支持映射把对象映射到对象（如`{a: string; b: string}{:typescript}`到`{ a: number; b: number; }{:typescript}`），但是我们只关系值的类型（映射后的类型），不关心原来的key的类型，那么可以使用`ValueOf`取得所有值的类型。\\n\\n- 分配律\\n\\n在原来的JS代码中，下一级生成的key是一个`string[]`，而本级的key是一个`string`，要将本级的key加到所有下一级key的前面，就需要使用`map`方法，并在最后使用`flatten`方法，把`string[][]`打平成`string[]`。\\n\\n对应到在我们的类型代码中，下一级生成的key是一个联合类型（`\\\"a\\\" | \\\"b\\\"{:typescript}`），本级的key是一个字符串字面量`\\\"a\\\"{:typescript}`。但是，借助分配律，我们可以直接得到拼接后的联合类型`\\\"a.a\\\" | \\\"a.b\\\"{:typescript}`。\\n\\n- 去掉最后的点（RemoveTrailingDot）\\n\\n类型系统中没有`.endsWith`方法，也没有`.substr`方法，但是可以借助`inferred type`，看看原类型能不能推断(infer)出一个类型`U`，这个`U`类型加上一个`.`，就等于原来的类型`T`。如果可以，那么U就是删掉最后的点后的类型。\\n\\n通过这个Lang类型和语言对象的字面量类型，我们就可以直接获得所有可能的ID，将它用在ID的类型上，我们就实现了强类型的文本ID。借助TS提供的类型信息，VSCode等编辑器可以给出自动完成，极大地提高编程体验。\\n\\n```tsx\\nconst language = { login: { button: { text: \\\"Login\\\" } } };\\n\\ntype TextId = Lang\u003ctypeof language\u003e;\\n\\n// 这个组件通过ID获得当前语言的对应的文本。\\nfunction LocalizedString({ id }: { id: TextId }) {\\n  // ...\\n}\\n\\n\u003cLocalizedString id=\\\"a\\\" /\u003e // error\\n\u003cLocalizedString id=\\\"login.button\\\" /\u003e // error\\n\u003cLocalizedString id=\\\"login.button.text\\\" /\u003e // correct\\n```\\n\\n![自动完成体验](demo.gif)\\n\\n# ID前缀\\n\\n随着代码量的增长，UI树越来越复杂，对应的ID的结构也越来越复杂，深度越来越大，这就会使得ID越来越长，但是在同一个UI里用到的各个ID都具有相同的前缀，例如下面这个真实项目中的例子：\\n\\n```\\napp.header.userIndicator.loggedIn.dropdown.login.button.text\\napp.header.userIndicator.loggedIn.dropdown.username.button.text\\napp.header.userIndicator.loggedIn.dropdown.logout.button.text\\n```\\n\\n所以，我们可以将前缀提取出来，然后在真正使用的地，就可以直接输入后面不同的部分就可以了。\\n\\n当然了这个过程也需要有类型检查。本库提供了`prefix`这个helper function，在运行`createI18n`时可以获得。对于上面三个例子，使用`prefix`函数可以写出如下代码。\\n\\n```ts\\n\\nconst p = prefix(\\\"app.header.userIndicator.loggedIn.dropdown.\\\");\\n\\np(\\\"login.button.text\\\"); // app.header.userIndicator.loggedIn.dropdown.login.button.text\\np(\\\"username.button.text\\\") // app.header.userIndicator.loggedIn.dropdown.login.button.text\\np(\\\"logout.button.text\\\") // app.header.userIndicator.loggedIn.dropdown.logout.button.tex\\n```\\n\\n这是怎么实现的呢？\\n\\n```ts\\ntype FullLang\u003cD extends string | Definitions\u003e = D extends string\\n  ? \\\"\\\"\\n  : `${ValueOf\u003c{[k in keyof D]: `${(StringOnly\u003ck\u003e)}.` | Concat\u003ck, FullLang\u003cD[k]\u003e\u003e}\u003e}`\\n\\ntype PartialLangFromFull\\n  \u003cD extends Definitions, FL extends FullLang\u003cD\u003e, L extends Lang\u003cD\u003e\u003e =\\n  FL extends `${L}.` ? never : FL;\\n\\nexport type PartialLang\u003cD extends Definitions\u003e =\\n  PartialLangFromFull\u003cD, FullLang\u003cD\u003e, Lang\u003cD\u003e\u003e;\\n\\nexport type RestLang\\n\u003cD extends Definitions, L extends Lang\u003cD\u003e, Partial extends PartialLang\u003cD\u003e\u003e =\\n  L extends `${Partial}${infer Rest}` ? Rest : never;\\n\\nconst p: \u003cTPartial extends PartialLang\u003cD\u003e, TRest extends RestLang\u003cD, Lang\u003cD\u003e, TPartial\u003e\u003e\\n  (t: TPartial) =\u003e (rest: TRest) =\u003e `${TPartial}${TRest}` = (t) =\u003e (s) =\u003e t+s;\\n```\\n\\n这看着比上面的获得所有ID要复杂不少，但是简单来说可以分为这几步：\\n\\n1. `FullLang`类型取得DFS过程中所有中间节点的ID\\n    - `Lang`只会取得到叶节点的ID，而`FullLang`会把途径的中间结果的ID也获得\\n    - 另外还有一个区别是这个得到的所有ID最终的`.`是没有去掉的\\n\\n\\n```tsx\\nconst language = { login: { button: { text: \\\"Login\\\" } } };\\n\\ntype D = typeof language;\\n\\ntype FL = FullLang\u003cD\u003e; // \\\"login.\\\" | \\\"login.button.\\\" | \\\"login.button.text.\\\";\\n```\\n\\n2. `PartialLangFromFull`类型把到叶节点的ID去掉\\n    - 对于`FullLang`的每个取值，如果它是某个`Lang`的取值后面加个`.`，那么这个其实是到叶节点的ID，不是前缀，是不应该取的(`never`)\\n    - 到这里已经获得前缀了\\n\\n```tsx\\ntype PLFF = PartialLangFromFull\u003cD, FullLang\u003cD\u003e, PartialLang\u003cD\u003e\u003e; // \\\"login.\\\" | \\\"login.button.\\\"\\n```\\n\\n3. `RestLang`是通过前缀来获取可以接受的后缀\\n    - 这个也是通过`infer`的方式来实现的，看看是否某个`Lang`的取值可以是传入的前缀和后缀拼起来`${Partial}${infer Rest}`，如果可以，就把后缀`Rest`返回\\n\\n```ts\\ntype RestLang = RestLang\u003cD, Lang\u003cD\u003e, \\\"login.\\\"\u003e // \\\"button.text\\\"\\n```\\n\\n4. 最后，`p`函数的实现其实就是一个`(t) =\u003e (s) =\u003e t+s{:ts}`，非常简单，运行时几乎没有什么开销。\\n\\n# 总结\\n\\nTS具有现在常见编程语言中最强大的类型系统，而这个类型系统如果能用得好，能够极大地提高编程效率。这个方案借助了TS的强大的类型系统，使得i18n的过程也能享受到较为完善的类型检查，能够在编译器避免很多因为string写错的带来的运行时bug。并且，在运行时就是普通的字符串，和之前的通过proxy截取对象访问路径生成ID的方案相比，不会在运行时产生任何开销。\\n\\n这个方案也有一个潜在问题，即当语言对象很大很复杂时，编译器的类型运算本身可能会消耗较多运算资源，影响编辑器的流畅度。但是，当前我的网站具有151行的语言定义，ID的自动完成性能还算可以接受（基本不会有可见卡顿），所以对我来说性能已经够用了。\\n\\n希望有更多用户可以来试试`react-typed-i18n`（[GitHub](https://github.com/ddadaal/react-typed-i18n)）。\\n\",\"title\":\"react-typed-i18n: 使用Template Literal Types实现强类型的i18n\",\"date\":\"2021-06-06 15:27\",\"id\":\"typed-i18n-with-template-literal-types\",\"lang\":\"cn\",\"tags\":[\"web-frontend\",\"code-trick\",\"TypeScript\",\"project\"],\"related\":[\"strongly-typed-i18n-with-typescript\"],\"ignored_in_list\":\"$undefined\",\"hide_heading\":\"$undefined\",\"no_toc\":\"$undefined\",\"absolute_path\":\"$undefined\",\"wordCount\":3592,\"readingTime\":17.96,\"filePath\":\"contents/20210606-typed-i18n-with-template-literal-types/cn.md\"},\"langVersions\":[\"cn\"]}]]}]}]}],[\"$\",\"div\",null,{\"className\":\"animate-slide-up\",\"children\":[[\"$\",\"div\",null,{\"className\":\"max-w-7xl mx-auto p-4\",\"children\":\"$L15\"}],[\"$\",\"div\",null,{\"className\":\"max-w-7xl mx-auto p-4\",\"children\":[\"$\",\"$L16\",null,{\"relatedArticles\":[{\"id\":\"strongly-typed-i18n-with-typescript\",\"langVersions\":[{\"excerpt\":\"\\n# i18n and The \\\"Raw String\\\" Problem\\n\\nInternationalization, also known as i18n (18 characters betwee\",\"lang\":\"en\",\"time\":\"2019-04-17 09:30:00 UTC+8\",\"title\":\"Strongly Typed i18n with TypeScript\"}]}]}]}],[\"$\",\"div\",null,{\"className\":\"max-w-7xl mx-auto p-4\",\"children\":[\"$\",\"$L17\",null,{\"articleId\":\"typed-i18n-with-template-literal-types\",\"articleTitle\":\"react-typed-i18n: 使用Template Literal Types实现强类型的i18n\"}]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"19:I{\"id\":\"6707\",\"chunks\":[\"309:static/chunks/70bb1395-8b005f7f53c5ebef.js\",\"975:static/chunks/dc6764d5-18938ac2fbe13f06.js\",\"344:static/chunks/2e69a9b8-691073cd158eaece.js\",\"270:static/chunks/270-98733365f87156fa.js\",\"647:static/chunks/647-9f8470e794e19f41.js\",\"813:static/chunks/813-cee425865faf8491.js\",\"382:static/chunks/382-7084e3b01c16da04.js\",\"94:static/chunks/app/about/[id]/[[...lang]]/page-26b0ace881630605.js\"],\"name\":\"ArticleToc\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"15:[\"$\",\"div\",null,{\"className\":\"flex flex-row space-x-4\",\"children\":[[\"$\",\"div\",null,{\"className\":\"prose max-w-full lg:w-[75%]\",\"children\":[[\"$\",\"h1\",null,{\"id\":\"react-typed-i18n\",\"children\":[[\"$\",\"a\",\"react-typed-i18n\",{\"href\":\"#react-typed-i18n\",\"className\":\"mr-2\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 512 512\",\"className\":\"inline-block\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z\",\"children\":\"$undefined\"}]]],\"style\":{\"color\":\"$undefined\"},\"height\":16,\"width\":16,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}],[\"react-typed-i18n\"]]}],\"\\n\",[\"$\",\"p\",\"h-3\",{\"children\":[\"最近学习了一下TypeScript最新的\",[\"$\",\"a\",\"h-4\",{\"href\":\"https://www.typescriptlang.org/docs/handbook/2/template-literal-types.html\",\"children\":[\"Template Literal Type\"]}],\"特性，突然想起来可以使用这个实现一个使用字符串字面量的i18n库，以用来替换之前的使用了一些黑魔法的\",[\"$\",\"a\",\"h-5\",{\"href\":\"https://github.com/ddadaal/simstate-i18n\",\"children\":[[\"$\",\"code\",\"h-6\",{\"children\":[\"simstate-i18n\"]}]]}],\"库，也在这个新库中解决一些技术债，例如只使用React Context、加入测试、增加一些新功能等。\"]}],\"\\n\",[\"$\",\"p\",\"h-7\",{\"children\":[\"新的库名字叫\",[\"$\",\"code\",\"h-8\",{\"children\":[\"react-typed-i18n\"]}],\"（\",[\"$\",\"a\",\"h-9\",{\"href\":\"https://github.com/ddadaal/react-typed-i18n\",\"children\":[\"GitHub\"]}],\"）。花了一个周末将功能和测试写好发到了npm上，并很快把本网站用这个新库重写了，体验比较好。\"]}],\"\\n\",[\"$\",\"p\",\"h-10\",{\"children\":[\"于是通过此文章介绍一下i18n的概念、常见实现方式以及本库的亮点，其中介绍部分的内容使用了之前写过的关于\",[\"$\",\"code\",\"h-11\",{\"children\":[\"simstate-i18n\"]}],\"的文章 \",[\"$\",\"a\",\"h-12\",{\"href\":\"/articles/strongly-typed-i18n-with-typescript\",\"children\":[\"Strongly Typed i18n with TypeScript\"]}],\"。要想更详细的了解一些i18n的内容以及当时写\",[\"$\",\"code\",\"h-13\",{\"children\":[\"simstate-i18n\"]}],\"的考虑，请查阅此文章。\"]}],\"\\n\",[\"$\",\"h1\",null,{\"id\":\"i18n\",\"children\":[[\"$\",\"a\",\"i18n\",{\"href\":\"#i18n\",\"className\":\"mr-2\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 512 512\",\"className\":\"inline-block\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z\",\"children\":\"$undefined\"}]]],\"style\":{\"color\":\"$undefined\"},\"height\":16,\"width\":16,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}],[\"i18n\"]]}],\"\\n\",[\"$\",\"p\",\"h-15\",{\"children\":[\"国际化，英文叫Internationalization，简称i18n（因为首尾字符i和n中间有18个字符），是指让一个软件产品能够显示按多国语言显示。\"]}],\"\\n\",[\"$\",\"p\",\"h-16\",{\"children\":[\"比如你正在访问的我的博客就是支持国际化的网站，你可以尝试在右上角的下拉框中切换不同的语言（当前只中文和英文），切换后，整个网站的将会以被选择的语言来显示。\"]}],\"\\n\",[\"$\",\"p\",\"h-17\",{\"children\":[\"国际化的核心是将网站中的所有文本元素都拿出去单独定义，然后在原本应该硬编码文本的地方，使用对所有语言都一致的元素进行代替。在编译时或者运行时，这种元素将会被替换为实际显示的语言的对应的文本元素。\"]}],\"\\n\",[\"$\",\"p\",\"h-18\",{\"children\":[\"例如说，对于这个p元素\",[\"$\",\"span\",\"h-19\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"code\",\"h-20\",{\"data-language\":\"html\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-21\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-22\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-23\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"p\"]}],[\"$\",\"span\",\"h-24\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003eHello World\u003c/\"]}],[\"$\",\"span\",\"h-25\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"p\"]}],[\"$\",\"span\",\"h-26\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e\"]}]]}]]}]]}],\"如果我想将它支持多语言显示，那么应该做以下的工作：\"]}],\"\\n\",[\"$\",\"ol\",\"h-27\",{\"children\":[\"\\n\",[\"$\",\"li\",\"h-28\",{\"children\":[\"不能直接硬编码文本，而是应该用一个ID之类的东西（例如\",[\"$\",\"code\",\"h-29\",{\"children\":[\"helloWorld\"]}],\"）替代硬编码的文本\"]}],\"\\n\",[\"$\",\"li\",\"h-30\",{\"children\":[\"在其他地方，用不同的语言定义ID和文本的对应关系。例如，定义\",[\"$\",\"code\",\"h-31\",{\"children\":[\"helloWorld\"]}],\"对应\",[\"$\",\"code\",\"h-32\",{\"children\":[\"你好，世界！\"]}],\"（中文）或者\",[\"$\",\"code\",\"h-33\",{\"children\":[\"Hello World\"]}],\"（英文）\"]}],\"\\n\",[\"$\",\"li\",\"h-34\",{\"children\":[\"使用一个机制，在编译时或者在运行时将界面中的ID替换为当前语言的文本\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h1\",null,{\"id\":\"定义id和文本的对应关系\",\"children\":[[\"$\",\"a\",\"定义id和文本的对应关系\",{\"href\":\"#定义id和文本的对应关系\",\"className\":\"mr-2\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 512 512\",\"className\":\"inline-block\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z\",\"children\":\"$undefined\"}]]],\"style\":{\"color\":\"$undefined\"},\"height\":16,\"width\":16,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}],[\"定义ID和文本的对应关系\"]]}],\"\\n\",[\"$\",\"p\",\"h-36\",{\"children\":[\"这种ID和文本的对应关系可以有很多种，最简单的就是\",[\"$\",\"strong\",\"h-37\",{\"children\":[\"KV\"]}],\"，一个ID对应一个文本。iOS (\",[\"$\",\"a\",\"h-38\",{\"href\":\"https://medium.com/lean-localization/ios-localization-tutorial-938231f9f881\",\"children\":[\"示例\"]}],\") 和 ASP.NET Core MVC (\",[\"$\",\"a\",\"h-39\",{\"href\":\"https://docs.microsoft.com/en-us/aspnet/core/fundamentals/localization?view=aspnetcore-2.2\",\"children\":[\"示例\"]}],\")其实就是这种对应关系。\"]}],\"\\n\",[\"$\",\"p\",\"h-40\",{\"children\":[\"简单的KV对应虽然很简单，但是当文本信息多起来之后，ID可能会非常长，例如：\"]}],\"\\n\",[\"$\",\"pre\",\"h-41\",{\"children\":[[\"$\",\"code\",\"h-42\",{\"children\":[\"app.header.userIndicator.loggedIn.dropdown.login.button.text\\napp.header.userIndicator.loggedIn.dropdown.username.button.text\\napp.header.userIndicator.loggedIn.dropdown.logout.button.text\\n\"]}]]}],\"\\n\",[\"$\",\"p\",\"h-43\",{\"children\":[\"UI基本都是以树结构组合起来的，所以，我们也可以以树结构组织我们的ID，同一个页面、同一个组件下的文本信息组织在同一层级，每个层级之间使用\",[\"$\",\"code\",\"h-44\",{\"children\":[\".\"]}],\"连接。\"]}],\"\\n\",[\"$\",\"p\",\"h-45\",{\"children\":[\"在JS中，我们可以使用对象表示这样的树结构的定义。例如以下例子，两种语言分别定义对象，其key为每个部分的ID，叶节点的value即是对应的文本信息。所有语言的这个这个对象具有相同的结构。那么，英文下的\",[\"$\",\"code\",\"h-46\",{\"children\":[\"login\"]}],\"和中文下\",[\"$\",\"code\",\"h-47\",{\"children\":[\"登录\"]}],\"这个文本信息对应的ID就是\",[\"$\",\"code\",\"h-48\",{\"children\":[\"login.button.text\"]}],\"。\"]}],\"\\n\",[\"$\",\"div\",\"h-49\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"pre\",\"h-50\",{\"data-language\":\"tsx\",\"data-theme\":\"default\",\"children\":[[\"$\",\"code\",\"h-51\",{\"data-language\":\"tsx\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-52\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-53\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// en.ts, 定义英文的ID的文本对应关系\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-54\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-55\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"export\"]}],[\"$\",\"span\",\"h-56\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-57\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"default\"]}],[\"$\",\"span\",\"h-58\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-59\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-60\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-61\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"login\"]}],[\"$\",\"span\",\"h-62\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-63\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-64\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    \"]}],[\"$\",\"span\",\"h-65\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"button\"]}],[\"$\",\"span\",\"h-66\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-67\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-68\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"      \"]}],[\"$\",\"span\",\"h-69\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"text\"]}],[\"$\",\"span\",\"h-70\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": \"]}],[\"$\",\"span\",\"h-71\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"Login\\\"\"]}],[\"$\",\"span\",\"h-72\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\",\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-73\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-74\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    },\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-75\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-76\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  },\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-77\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-78\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"}\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-79\",{\"className\":\"line\",\"children\":\"$undefined\"}],\"\\n\",[\"$\",\"span\",\"h-80\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-81\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// cn.ts, 定义中文的对应关系\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-82\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-83\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"export\"]}],[\"$\",\"span\",\"h-84\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-85\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"default\"]}],[\"$\",\"span\",\"h-86\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-87\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-88\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-89\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"login\"]}],[\"$\",\"span\",\"h-90\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-91\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-92\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    \"]}],[\"$\",\"span\",\"h-93\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"button\"]}],[\"$\",\"span\",\"h-94\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-95\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-96\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"      \"]}],[\"$\",\"span\",\"h-97\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"text\"]}],[\"$\",\"span\",\"h-98\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": \"]}],[\"$\",\"span\",\"h-99\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"登录\\\"\"]}],[\"$\",\"span\",\"h-100\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\",\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-101\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-102\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    },\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-103\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-104\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  },\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-105\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-106\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"}\"]}]]}]]}]]}]]}],\"\\n\",[\"$\",\"h1\",null,{\"id\":\"通过id取得当前语言的文本\",\"children\":[[\"$\",\"a\",\"通过id取得当前语言的文本\",{\"href\":\"#通过id取得当前语言的文本\",\"className\":\"mr-2\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 512 512\",\"className\":\"inline-block\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z\",\"children\":\"$undefined\"}]]],\"style\":{\"color\":\"$undefined\"},\"height\":16,\"width\":16,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}],[\"通过ID取得当前语言的文本\"]]}],\"\\n\",[\"$\",\"p\",\"h-108\",{\"children\":[\"这个ID其实也是一个访问对象属性的路径。通过这样的ID，我们可以很简单的从当前语言的定义对象中取得当前语言的文本。加上一些状态管理的加持，动态切换语言也是很简单的工作。\"]}],\"\\n\",[\"$\",\"div\",\"h-109\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"pre\",\"h-110\",{\"data-language\":\"tsx\",\"data-theme\":\"default\",\"children\":[[\"$\",\"code\",\"h-111\",{\"data-language\":\"tsx\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-112\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-113\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// 这个组件通过ID获得当前语言的对应的文本。\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-114\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-115\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"function\"]}],[\"$\",\"span\",\"h-116\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-117\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"LocalizedString\"]}],[\"$\",\"span\",\"h-118\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"({ \"]}],[\"$\",\"span\",\"h-119\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"id\"]}],[\"$\",\"span\",\"h-120\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" }: { \"]}],[\"$\",\"span\",\"h-121\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"id\"]}],[\"$\",\"span\",\"h-122\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": \"]}],[\"$\",\"span\",\"h-123\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"string\"]}],[\"$\",\"span\",\"h-124\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" }) {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-125\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-126\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-127\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// 通过React Context等方式或者当前语言的定义对象currentLanguageObject\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-128\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-129\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-130\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// ...\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-131\",{\"className\":\"line\",\"children\":\"$undefined\"}],\"\\n\",[\"$\",\"span\",\"h-132\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-133\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-134\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// 把ID以.拆开，然后一层一层访问就可以了。\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-135\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-136\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-137\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"const\"]}],[\"$\",\"span\",\"h-138\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-139\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"value\"]}],[\"$\",\"span\",\"h-140\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-141\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-142\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-143\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"currentLanguageObject\"]}],[\"$\",\"span\",\"h-144\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\";\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-145\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-146\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-147\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"id\"]}],[\"$\",\"span\",\"h-148\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-149\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"split\"]}],[\"$\",\"span\",\"h-150\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-151\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\".\\\"\"]}],[\"$\",\"span\",\"h-152\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\").\"]}],[\"$\",\"span\",\"h-153\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"forEach\"]}],[\"$\",\"span\",\"h-154\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"((\"]}],[\"$\",\"span\",\"h-155\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"k\"]}],[\"$\",\"span\",\"h-156\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") \"]}],[\"$\",\"span\",\"h-157\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"=\u003e\"]}],[\"$\",\"span\",\"h-158\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-159\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-160\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    \"]}],[\"$\",\"span\",\"h-161\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"value\"]}],[\"$\",\"span\",\"h-162\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-163\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-164\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-165\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"value\"]}],[\"$\",\"span\",\"h-166\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"[\"]}],[\"$\",\"span\",\"h-167\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"k\"]}],[\"$\",\"span\",\"h-168\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"];\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-169\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-170\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  });\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-171\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-172\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-173\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"return\"]}],[\"$\",\"span\",\"h-174\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-175\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"value\"]}],[\"$\",\"span\",\"h-176\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\";\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-177\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-178\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"}\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-179\",{\"className\":\"line\",\"children\":\"$undefined\"}],\"\\n\",[\"$\",\"span\",\"h-180\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-181\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// 一开始我们是把文本硬编码在组件里……\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-182\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-183\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-184\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Button\"]}],[\"$\",\"span\",\"h-185\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003eLogin\u003c/\"]}],[\"$\",\"span\",\"h-186\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Button\"]}],[\"$\",\"span\",\"h-187\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-188\",{\"className\":\"line\",\"children\":\"$undefined\"}],\"\\n\",[\"$\",\"span\",\"h-189\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-190\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// 现在使用LocalizedString来动态获取文本\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-191\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-192\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-193\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Button\"]}],[\"$\",\"span\",\"h-194\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e\u003c\"]}],[\"$\",\"span\",\"h-195\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"LocalizedString\"]}],[\"$\",\"span\",\"h-196\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-197\",{\"style\":{\"color\":\"#D19A66\",\"fontStyle\":\"italic\"},\"children\":[\"id\"]}],[\"$\",\"span\",\"h-198\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-199\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"login.button.text\\\"\"]}],[\"$\",\"span\",\"h-200\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" /\u003e\u003c/\"]}],[\"$\",\"span\",\"h-201\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Button\"]}],[\"$\",\"span\",\"h-202\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-203\",{\"className\":\"line\",\"children\":\"$undefined\"}]]}]]}]]}],\"\\n\",[\"$\",\"h1\",null,{\"id\":\"强类型地输入id\",\"children\":[[\"$\",\"a\",\"强类型地输入id\",{\"href\":\"#强类型地输入id\",\"className\":\"mr-2\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 512 512\",\"className\":\"inline-block\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z\",\"children\":\"$undefined\"}]]],\"style\":{\"color\":\"$undefined\"},\"height\":16,\"width\":16,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}],[\"强类型地输入ID\"]]}],\"\\n\",[\"$\",\"p\",\"h-205\",{\"children\":[\"上述方式已经能够完成任务了，但是有一个很大的问题：\",[\"$\",\"strong\",\"h-206\",{\"children\":[\"写id的时候没有类型检查，容易写错\"]}],\"。\"]}],\"\\n\",[\"$\",\"p\",\"h-207\",{\"children\":[\"除了字符串，也有一些其他方式可以来定位，其他方式在我的\",[\"$\",\"a\",\"h-208\",{\"href\":\"/articles/strongly-typed-i18n-with-typescript#make-it-strongly-typed\",\"children\":[\"simstate-i18n的文章中\"]}],\"中有介绍，最后还是认为上一节的字符串和组件的方案具有优势。\"]}],\"\\n\",[\"$\",\"p\",\"h-209\",{\"children\":[\"所以现在的问题变成了\",[\"$\",\"strong\",\"h-210\",{\"children\":[\"如何强类型地生成ID\"]}],\"。我之前的库\",[\"$\",\"a\",\"h-211\",{\"href\":\"https://github.com/ddadaal/simstate-i18n\",\"children\":[[\"$\",\"code\",\"h-212\",{\"children\":[\"simstate-i18n\"]}]]}],\"使用\",[\"$\",\"code\",\"h-213\",{\"children\":[\"Proxy\"]}],\"来截取对对象的访问路径来生成ID。这个点子比较新奇，也能很好地完成工作，但是总感觉有点奇技淫巧，而且使用Proxy总会对性能产生一些影响。\"]}],\"\\n\",[\"$\",\"h1\",null,{\"id\":\"使用template-literal-type计算所有可能的id\",\"children\":[[\"$\",\"a\",\"使用template-literal-type计算所有可能的id\",{\"href\":\"#使用template-literal-type计算所有可能的id\",\"className\":\"mr-2\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 512 512\",\"className\":\"inline-block\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z\",\"children\":\"$undefined\"}]]],\"style\":{\"color\":\"$undefined\"},\"height\":16,\"width\":16,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}],[\"使用Template Literal Type计算所有可能的ID\"]]}],\"\\n\",[\"$\",\"p\",\"h-215\",{\"children\":[[\"$\",\"a\",\"h-216\",{\"href\":\"https://www.typescriptlang.org/docs/handbook/2/template-literal-types.html\",\"children\":[\"Template Literal Type\"]}],\"的出现使得我们可以直接使用字符串字面量作为ID，并通过一些类型计算，使得TypeScript可以确定出所有可能的ID，并在编辑器实现自动完成和错误检查。\"]}],\"\\n\",[\"$\",\"p\",\"h-217\",{\"children\":[\"TypeScript支持\",[\"$\",\"strong\",\"h-218\",{\"children\":[\"字面量类型(literal type)\",[\"$\",\"strong\",\"h-219\",{\"children\":[\"和\"]}],\"联合类型(union type)\"]}],\"。\"]}],\"\\n\",[\"$\",\"ul\",\"h-220\",{\"children\":[\"\\n\",[\"$\",\"li\",\"h-221\",{\"children\":[\"借助字面量类型，TS可以将对象和字符串字面量推断出非常精确的类型：例如，TS可以推断出上面的对象的类型为\",[\"$\",\"span\",\"h-222\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"code\",\"h-223\",{\"data-language\":\"typescript\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-224\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-225\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"{ login: { button: { text: \"]}],[\"$\",\"span\",\"h-226\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"string\"]}],[\"$\",\"span\",\"h-227\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" }}}\"]}]]}]]}]]}],\"。而字符串字面量的类型也可以推断地非常精确，例如\",[\"$\",\"span\",\"h-228\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"code\",\"h-229\",{\"data-language\":\"typescript\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-230\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-231\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"123\\\"\"]}]]}]]}]]}],\"的类型就是\",[\"$\",\"span\",\"h-232\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"code\",\"h-233\",{\"data-language\":\"typescript\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-234\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-235\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"123\\\"\"]}]]}]]}]]}],\"。\"]}],\"\\n\",[\"$\",\"li\",\"h-236\",{\"children\":[\"通过联合类型，具有多种但是有限种可能取值的值的类型也可以限制地非常精确：例如如果一个变量可能取值\",[\"$\",\"code\",\"h-237\",{\"children\":[\"\\\"1\\\"\"]}],\"或者\",[\"$\",\"code\",\"h-238\",{\"children\":[\"\\\"2\\\"\"]}],\"，那么这个变量的类型就是\",[\"$\",\"code\",\"h-239\",{\"children\":[\"\\\"1\\\" | \\\"2\\\"\"]}]]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"h-240\",{\"children\":[\"而新支持的\",[\"$\",\"code\",\"h-241\",{\"children\":[\"Template Literal Type\"]}],\"简单来说，支持了字符串字面量类型的拼接。并且，在拼接的时候，如果有一个操作数是联合类型，将会运用分配律将字符串展开：\"]}],\"\\n\",[\"$\",\"div\",\"h-242\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"pre\",\"h-243\",{\"data-language\":\"ts\",\"data-theme\":\"default\",\"children\":[[\"$\",\"code\",\"h-244\",{\"data-language\":\"ts\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-245\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-246\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"type\"]}],[\"$\",\"span\",\"h-247\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-248\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"A\"]}],[\"$\",\"span\",\"h-249\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-250\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-251\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-252\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"A1\\\"\"]}],[\"$\",\"span\",\"h-253\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" | \"]}],[\"$\",\"span\",\"h-254\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"A2\\\"\"]}],[\"$\",\"span\",\"h-255\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" ;\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-256\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-257\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"type\"]}],[\"$\",\"span\",\"h-258\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-259\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"B\"]}],[\"$\",\"span\",\"h-260\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-261\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-262\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-263\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"B1\\\"\"]}],[\"$\",\"span\",\"h-264\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" | \"]}],[\"$\",\"span\",\"h-265\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"B2\\\"\"]}],[\"$\",\"span\",\"h-266\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" ;\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-267\",{\"className\":\"line\",\"children\":\"$undefined\"}],\"\\n\",[\"$\",\"span\",\"h-268\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-269\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"type\"]}],[\"$\",\"span\",\"h-270\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-271\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"C\"]}],[\"$\",\"span\",\"h-272\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-273\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-274\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-275\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"`\"]}],[\"$\",\"span\",\"h-276\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"$${\"]}],[\"$\",\"span\",\"h-277\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"A\"]}],[\"$\",\"span\",\"h-278\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"}\"]}],[\"$\",\"span\",\"h-279\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-280\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"$${\"]}],[\"$\",\"span\",\"h-281\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"B\"]}],[\"$\",\"span\",\"h-282\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"}\"]}],[\"$\",\"span\",\"h-283\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"`\"]}],[\"$\",\"span\",\"h-284\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-285\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// type C = \\\"A1.B1\\\" | \\\"A1.B2\\\" | \\\"A2.B1\\\" | \\\"A2.B2\\\"\"]}]]}]]}]]}]]}],\"\\n\",[\"$\",\"p\",\"h-286\",{\"children\":[\"在这个功能的基础上，再加上一些TS的高级类型（例如\",[\"$\",\"code\",\"h-287\",{\"children\":[\"Mapped types\"]}],\", \",[\"$\",\"code\",\"h-288\",{\"children\":[\"keyof\"]}],\"等等等）我们就可以实现从对象字面量推断出所有可能的ID了。\"]}],\"\\n\",[\"$\",\"p\",\"h-289\",{\"children\":[\"在JS代码中，我们要生成这样的ID是很简单的：对对象做一个DFS就可以了\"]}],\"\\n\",[\"$\",\"div\",\"h-290\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"pre\",\"h-291\",{\"data-language\":\"js\",\"data-theme\":\"default\",\"children\":[[\"$\",\"code\",\"h-292\",{\"data-language\":\"js\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-293\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-294\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"const\"]}],[\"$\",\"span\",\"h-295\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-296\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"a\"]}],[\"$\",\"span\",\"h-297\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-298\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-299\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" { \"]}],[\"$\",\"span\",\"h-300\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"login\"]}],[\"$\",\"span\",\"h-301\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": { \"]}],[\"$\",\"span\",\"h-302\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"button\"]}],[\"$\",\"span\",\"h-303\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": { \"]}],[\"$\",\"span\",\"h-304\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"text\"]}],[\"$\",\"span\",\"h-305\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": \"]}],[\"$\",\"span\",\"h-306\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"Login\\\"\"]}],[\"$\",\"span\",\"h-307\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" } } };\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-308\",{\"className\":\"line\",\"children\":\"$undefined\"}],\"\\n\",[\"$\",\"span\",\"h-309\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-310\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"const\"]}],[\"$\",\"span\",\"h-311\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-312\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"dfs\"]}],[\"$\",\"span\",\"h-313\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-314\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-315\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" (\"]}],[\"$\",\"span\",\"h-316\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"obj\"]}],[\"$\",\"span\",\"h-317\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") \"]}],[\"$\",\"span\",\"h-318\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"=\u003e\"]}],[\"$\",\"span\",\"h-319\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-320\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-321\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-322\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"if\"]}],[\"$\",\"span\",\"h-323\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" (\"]}],[\"$\",\"span\",\"h-324\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"typeof\"]}],[\"$\",\"span\",\"h-325\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-326\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"obj\"]}],[\"$\",\"span\",\"h-327\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-328\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"===\"]}],[\"$\",\"span\",\"h-329\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-330\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"string\\\"\"]}],[\"$\",\"span\",\"h-331\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-332\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-333\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    \"]}],[\"$\",\"span\",\"h-334\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// 已经到了文本，下一层的key就是\\\"\\\"\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-335\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-336\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    \"]}],[\"$\",\"span\",\"h-337\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"return\"]}],[\"$\",\"span\",\"h-338\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" [\"]}],[\"$\",\"span\",\"h-339\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"\\\"\"]}],[\"$\",\"span\",\"h-340\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"];\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-341\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-342\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  }\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-343\",{\"className\":\"line\",\"children\":\"$undefined\"}],\"\\n\",[\"$\",\"span\",\"h-344\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-345\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-346\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// 保存至这一层的所有ID\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-347\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-348\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-349\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"const\"]}],[\"$\",\"span\",\"h-350\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-351\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"ids\"]}],[\"$\",\"span\",\"h-352\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-353\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-354\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" [];\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-355\",{\"className\":\"line\",\"children\":\"$undefined\"}],\"\\n\",[\"$\",\"span\",\"h-356\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-357\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-358\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// 遍历obj的所有key\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-359\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-360\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-361\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"for\"]}],[\"$\",\"span\",\"h-362\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" (\"]}],[\"$\",\"span\",\"h-363\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"const\"]}],[\"$\",\"span\",\"h-364\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-365\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"key\"]}],[\"$\",\"span\",\"h-366\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-367\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"in\"]}],[\"$\",\"span\",\"h-368\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-369\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"obj\"]}],[\"$\",\"span\",\"h-370\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-371\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-372\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    \"]}],[\"$\",\"span\",\"h-373\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// 获得下一层的所有key\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-374\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-375\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    \"]}],[\"$\",\"span\",\"h-376\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"const\"]}],[\"$\",\"span\",\"h-377\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-378\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"nextLevel\"]}],[\"$\",\"span\",\"h-379\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-380\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-381\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-382\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"dfs\"]}],[\"$\",\"span\",\"h-383\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-384\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"obj\"]}],[\"$\",\"span\",\"h-385\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"[\"]}],[\"$\",\"span\",\"h-386\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"key\"]}],[\"$\",\"span\",\"h-387\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"]);\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-388\",{\"className\":\"line\",\"children\":\"$undefined\"}],\"\\n\",[\"$\",\"span\",\"h-389\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-390\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    \"]}],[\"$\",\"span\",\"h-391\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// 将本key加到所有下一层key的前面\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-392\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-393\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    \"]}],[\"$\",\"span\",\"h-394\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"ids\"]}],[\"$\",\"span\",\"h-395\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-396\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"push\"]}],[\"$\",\"span\",\"h-397\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(...\"]}],[\"$\",\"span\",\"h-398\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"nextLevel\"]}],[\"$\",\"span\",\"h-399\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-400\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"map\"]}],[\"$\",\"span\",\"h-401\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"((\"]}],[\"$\",\"span\",\"h-402\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"x\"]}],[\"$\",\"span\",\"h-403\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") \"]}],[\"$\",\"span\",\"h-404\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"=\u003e\"]}],[\"$\",\"span\",\"h-405\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-406\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"`\"]}],[\"$\",\"span\",\"h-407\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"$${\"]}],[\"$\",\"span\",\"h-408\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"key\"]}],[\"$\",\"span\",\"h-409\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"}\"]}],[\"$\",\"span\",\"h-410\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-411\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"$${\"]}],[\"$\",\"span\",\"h-412\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"x\"]}],[\"$\",\"span\",\"h-413\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"}\"]}],[\"$\",\"span\",\"h-414\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"`\"]}],[\"$\",\"span\",\"h-415\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"));\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-416\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-417\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  }\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-418\",{\"className\":\"line\",\"children\":\"$undefined\"}],\"\\n\",[\"$\",\"span\",\"h-419\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-420\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-421\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"return\"]}],[\"$\",\"span\",\"h-422\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-423\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"ids\"]}],[\"$\",\"span\",\"h-424\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\";\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-425\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-426\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"};\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-427\",{\"className\":\"line\",\"children\":\"$undefined\"}],\"\\n\",[\"$\",\"span\",\"h-428\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-429\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// 按上述方案写出来的ID最后会多出一个.，使用这个函数把最后的.去掉\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-430\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-431\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"const\"]}],[\"$\",\"span\",\"h-432\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-433\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"removeTrailingDot\"]}],[\"$\",\"span\",\"h-434\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-435\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-436\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" (\"]}],[\"$\",\"span\",\"h-437\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"str\"]}],[\"$\",\"span\",\"h-438\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") \"]}],[\"$\",\"span\",\"h-439\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"=\u003e\"]}],[\"$\",\"span\",\"h-440\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-441\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"str\"]}],[\"$\",\"span\",\"h-442\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-443\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"endsWith\"]}],[\"$\",\"span\",\"h-444\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-445\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\".\\\"\"]}],[\"$\",\"span\",\"h-446\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") \"]}],[\"$\",\"span\",\"h-447\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"?\"]}],[\"$\",\"span\",\"h-448\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-449\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"str\"]}],[\"$\",\"span\",\"h-450\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-451\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"substr\"]}],[\"$\",\"span\",\"h-452\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-453\",{\"style\":{\"color\":\"#D19A66\"},\"children\":[\"0\"]}],[\"$\",\"span\",\"h-454\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\", \"]}],[\"$\",\"span\",\"h-455\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"str\"]}],[\"$\",\"span\",\"h-456\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-457\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"length\"]}],[\"$\",\"span\",\"h-458\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"-\"]}],[\"$\",\"span\",\"h-459\",{\"style\":{\"color\":\"#D19A66\"},\"children\":[\"1\"]}],[\"$\",\"span\",\"h-460\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") \"]}],[\"$\",\"span\",\"h-461\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\":\"]}],[\"$\",\"span\",\"h-462\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-463\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"str\"]}],[\"$\",\"span\",\"h-464\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\";\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-465\",{\"className\":\"line\",\"children\":\"$undefined\"}],\"\\n\",[\"$\",\"span\",\"h-466\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-467\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"dfs\"]}],[\"$\",\"span\",\"h-468\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-469\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"a\"]}],[\"$\",\"span\",\"h-470\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\").\"]}],[\"$\",\"span\",\"h-471\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"map\"]}],[\"$\",\"span\",\"h-472\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-473\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"removeTrailingDot\"]}],[\"$\",\"span\",\"h-474\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"); \"]}],[\"$\",\"span\",\"h-475\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// [\\\"login.button.text\\\"]\"]}]]}]]}]]}]]}],\"\\n\",[\"$\",\"p\",\"h-476\",{\"children\":[\"当然，我们可以使用一个更FP的方式写这个\",[\"$\",\"code\",\"h-477\",{\"children\":[\"dfs\"]}],\"函数：\"]}],\"\\n\",[\"$\",\"div\",\"h-478\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"pre\",\"h-479\",{\"data-language\":\"js\",\"data-theme\":\"default\",\"children\":[[\"$\",\"code\",\"h-480\",{\"data-language\":\"js\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-481\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-482\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"const\"]}],[\"$\",\"span\",\"h-483\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-484\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"flattenArray\"]}],[\"$\",\"span\",\"h-485\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-486\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-487\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" (\"]}],[\"$\",\"span\",\"h-488\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"arr\"]}],[\"$\",\"span\",\"h-489\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") \"]}],[\"$\",\"span\",\"h-490\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"=\u003e\"]}],[\"$\",\"span\",\"h-491\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-492\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"arr\"]}],[\"$\",\"span\",\"h-493\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-494\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"reduce\"]}],[\"$\",\"span\",\"h-495\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"((\"]}],[\"$\",\"span\",\"h-496\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"prev\"]}],[\"$\",\"span\",\"h-497\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\", \"]}],[\"$\",\"span\",\"h-498\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"curr\"]}],[\"$\",\"span\",\"h-499\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") \"]}],[\"$\",\"span\",\"h-500\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"=\u003e\"]}],[\"$\",\"span\",\"h-501\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-502\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-503\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-504\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"prev\"]}],[\"$\",\"span\",\"h-505\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-506\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"push\"]}],[\"$\",\"span\",\"h-507\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(...\"]}],[\"$\",\"span\",\"h-508\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"curr\"]}],[\"$\",\"span\",\"h-509\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\");\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-510\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-511\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-512\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"return\"]}],[\"$\",\"span\",\"h-513\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-514\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"prev\"]}],[\"$\",\"span\",\"h-515\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\";\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-516\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-517\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"}, []);\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-518\",{\"className\":\"line\",\"children\":\"$undefined\"}],\"\\n\",[\"$\",\"span\",\"h-519\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-520\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"const\"]}],[\"$\",\"span\",\"h-521\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-522\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"dfs\"]}],[\"$\",\"span\",\"h-523\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-524\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-525\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" (\"]}],[\"$\",\"span\",\"h-526\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"obj\"]}],[\"$\",\"span\",\"h-527\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") \"]}],[\"$\",\"span\",\"h-528\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"=\u003e\"]}],[\"$\",\"span\",\"h-529\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-530\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"typeof\"]}],[\"$\",\"span\",\"h-531\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-532\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"obj\"]}],[\"$\",\"span\",\"h-533\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-534\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"===\"]}],[\"$\",\"span\",\"h-535\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-536\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"string\\\"\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-537\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-538\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-539\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"?\"]}],[\"$\",\"span\",\"h-540\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" [\"]}],[\"$\",\"span\",\"h-541\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"\\\"\"]}],[\"$\",\"span\",\"h-542\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"]\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-543\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-544\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-545\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\":\"]}],[\"$\",\"span\",\"h-546\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-547\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"flattenArray\"]}],[\"$\",\"span\",\"h-548\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-549\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Object\"]}],[\"$\",\"span\",\"h-550\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-551\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"keys\"]}],[\"$\",\"span\",\"h-552\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-553\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"obj\"]}],[\"$\",\"span\",\"h-554\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\").\"]}],[\"$\",\"span\",\"h-555\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"map\"]}],[\"$\",\"span\",\"h-556\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"((\"]}],[\"$\",\"span\",\"h-557\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"k\"]}],[\"$\",\"span\",\"h-558\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") \"]}],[\"$\",\"span\",\"h-559\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"=\u003e\"]}],[\"$\",\"span\",\"h-560\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-561\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"dfs\"]}],[\"$\",\"span\",\"h-562\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-563\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"obj\"]}],[\"$\",\"span\",\"h-564\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"[\"]}],[\"$\",\"span\",\"h-565\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"k\"]}],[\"$\",\"span\",\"h-566\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"]).\"]}],[\"$\",\"span\",\"h-567\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"map\"]}],[\"$\",\"span\",\"h-568\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"((\"]}],[\"$\",\"span\",\"h-569\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"sk\"]}],[\"$\",\"span\",\"h-570\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") \"]}],[\"$\",\"span\",\"h-571\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"=\u003e\"]}],[\"$\",\"span\",\"h-572\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-573\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"`\"]}],[\"$\",\"span\",\"h-574\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"$${\"]}],[\"$\",\"span\",\"h-575\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"k\"]}],[\"$\",\"span\",\"h-576\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"}\"]}],[\"$\",\"span\",\"h-577\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-578\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"$${\"]}],[\"$\",\"span\",\"h-579\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"sk\"]}],[\"$\",\"span\",\"h-580\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"}\"]}],[\"$\",\"span\",\"h-581\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"`\"]}],[\"$\",\"span\",\"h-582\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\")));\"]}]]}]]}]]}]]}],\"\\n\",[\"$\",\"p\",\"h-583\",{\"children\":[\"现在我们要做的，就是在类型的层面、借助TS的类型系统，完成同样的工作。这里先放代码：\"]}],\"\\n\",[\"$\",\"div\",\"h-584\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"pre\",\"h-585\",{\"data-language\":\"ts\",\"data-theme\":\"default\",\"children\":[[\"$\",\"code\",\"h-586\",{\"data-language\":\"ts\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-587\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-588\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"type\"]}],[\"$\",\"span\",\"h-589\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-590\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"ValueOf\"]}],[\"$\",\"span\",\"h-591\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-592\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"T\"]}],[\"$\",\"span\",\"h-593\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e \"]}],[\"$\",\"span\",\"h-594\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-595\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-596\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"T\"]}],[\"$\",\"span\",\"h-597\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"[\"]}],[\"$\",\"span\",\"h-598\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"keyof\"]}],[\"$\",\"span\",\"h-599\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-600\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"T\"]}],[\"$\",\"span\",\"h-601\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"];\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-602\",{\"className\":\"line\",\"children\":\"$undefined\"}],\"\\n\",[\"$\",\"span\",\"h-603\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-604\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"type\"]}],[\"$\",\"span\",\"h-605\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-606\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Concat\"]}],[\"$\",\"span\",\"h-607\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-608\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"T\"]}],[\"$\",\"span\",\"h-609\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\", \"]}],[\"$\",\"span\",\"h-610\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"U\"]}],[\"$\",\"span\",\"h-611\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e \"]}],[\"$\",\"span\",\"h-612\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-613\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-614\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"`\"]}],[\"$\",\"span\",\"h-615\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"$${\"]}],[\"$\",\"span\",\"h-616\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"string\"]}],[\"$\",\"span\",\"h-617\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \u0026 \"]}],[\"$\",\"span\",\"h-618\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"T\"]}],[\"$\",\"span\",\"h-619\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"}\"]}],[\"$\",\"span\",\"h-620\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-621\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"$${\"]}],[\"$\",\"span\",\"h-622\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"string\"]}],[\"$\",\"span\",\"h-623\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \u0026 \"]}],[\"$\",\"span\",\"h-624\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"U\"]}],[\"$\",\"span\",\"h-625\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"}\"]}],[\"$\",\"span\",\"h-626\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"`\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-627\",{\"className\":\"line\",\"children\":\"$undefined\"}],\"\\n\",[\"$\",\"span\",\"h-628\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-629\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"type\"]}],[\"$\",\"span\",\"h-630\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-631\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"LangRec\"]}],[\"$\",\"span\",\"h-632\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-633\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-634\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-635\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"extends\"]}],[\"$\",\"span\",\"h-636\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-637\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"string\"]}],[\"$\",\"span\",\"h-638\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" | \"]}],[\"$\",\"span\",\"h-639\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Definitions\"]}],[\"$\",\"span\",\"h-640\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e \"]}],[\"$\",\"span\",\"h-641\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-642\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-643\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-644\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-645\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"extends\"]}],[\"$\",\"span\",\"h-646\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-647\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"string\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-648\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-649\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-650\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"?\"]}],[\"$\",\"span\",\"h-651\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-652\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"\\\"\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-653\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-654\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-655\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\":\"]}],[\"$\",\"span\",\"h-656\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-657\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"`\"]}],[\"$\",\"span\",\"h-658\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"$${\"]}],[\"$\",\"span\",\"h-659\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"ValueOf\"]}],[\"$\",\"span\",\"h-660\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c{[\"]}],[\"$\",\"span\",\"h-661\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"k\"]}],[\"$\",\"span\",\"h-662\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-663\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"in\"]}],[\"$\",\"span\",\"h-664\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-665\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"keyof\"]}],[\"$\",\"span\",\"h-666\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-667\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-668\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"]: \"]}],[\"$\",\"span\",\"h-669\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Concat\"]}],[\"$\",\"span\",\"h-670\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-671\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"k\"]}],[\"$\",\"span\",\"h-672\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\", \"]}],[\"$\",\"span\",\"h-673\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"LangRec\"]}],[\"$\",\"span\",\"h-674\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-675\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-676\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"[\"]}],[\"$\",\"span\",\"h-677\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"k\"]}],[\"$\",\"span\",\"h-678\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"]\u003e\u003e}\u003e\"]}],[\"$\",\"span\",\"h-679\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"}\"]}],[\"$\",\"span\",\"h-680\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"`\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-681\",{\"className\":\"line\",\"children\":\"$undefined\"}],\"\\n\",[\"$\",\"span\",\"h-682\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-683\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"type\"]}],[\"$\",\"span\",\"h-684\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-685\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"RemoveTrailingDot\"]}],[\"$\",\"span\",\"h-686\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-687\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"T\"]}],[\"$\",\"span\",\"h-688\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-689\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"extends\"]}],[\"$\",\"span\",\"h-690\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-691\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"string\"]}],[\"$\",\"span\",\"h-692\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e \"]}],[\"$\",\"span\",\"h-693\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-694\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-695\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"T\"]}],[\"$\",\"span\",\"h-696\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-697\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"extends\"]}],[\"$\",\"span\",\"h-698\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-699\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"`\"]}],[\"$\",\"span\",\"h-700\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"$${\"]}],[\"$\",\"span\",\"h-701\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"infer \"]}],[\"$\",\"span\",\"h-702\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"U\"]}],[\"$\",\"span\",\"h-703\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"}\"]}],[\"$\",\"span\",\"h-704\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\".`\"]}],[\"$\",\"span\",\"h-705\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-706\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"?\"]}],[\"$\",\"span\",\"h-707\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-708\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"U\"]}],[\"$\",\"span\",\"h-709\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-710\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\":\"]}],[\"$\",\"span\",\"h-711\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-712\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"T\"]}],[\"$\",\"span\",\"h-713\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\";\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-714\",{\"className\":\"line\",\"children\":\"$undefined\"}],\"\\n\",[\"$\",\"span\",\"h-715\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-716\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"export\"]}],[\"$\",\"span\",\"h-717\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-718\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"type\"]}],[\"$\",\"span\",\"h-719\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-720\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Lang\"]}],[\"$\",\"span\",\"h-721\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-722\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-723\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-724\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"extends\"]}],[\"$\",\"span\",\"h-725\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-726\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Definitions\"]}],[\"$\",\"span\",\"h-727\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e \"]}],[\"$\",\"span\",\"h-728\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-729\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-730\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"RemoveTrailingDot\"]}],[\"$\",\"span\",\"h-731\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-732\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"LangRec\"]}],[\"$\",\"span\",\"h-733\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-734\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-735\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e\u003e;\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-736\",{\"className\":\"line\",\"children\":\"$undefined\"}],\"\\n\",[\"$\",\"span\",\"h-737\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-738\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"type\"]}],[\"$\",\"span\",\"h-739\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-740\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"A\"]}],[\"$\",\"span\",\"h-741\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-742\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-743\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-744\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Lang\"]}],[\"$\",\"span\",\"h-745\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c{ \"]}],[\"$\",\"span\",\"h-746\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"a\"]}],[\"$\",\"span\",\"h-747\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": \"]}],[\"$\",\"span\",\"h-748\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"2\\\"\"]}],[\"$\",\"span\",\"h-749\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\", \"]}],[\"$\",\"span\",\"h-750\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"b\"]}],[\"$\",\"span\",\"h-751\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": { \"]}],[\"$\",\"span\",\"h-752\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"c\"]}],[\"$\",\"span\",\"h-753\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": \"]}],[\"$\",\"span\",\"h-754\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"4\\\"\"]}],[\"$\",\"span\",\"h-755\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" } }\u003e; \"]}],[\"$\",\"span\",\"h-756\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// type A = \\\"a\\\" | \\\"b.c\\\"\"]}]]}]]}]]}]]}],\"\\n\",[\"$\",\"p\",\"h-757\",{\"children\":[\"这段代码看起来很唬人，但是如果我们把类型看成函数，类型参数看作函数参数，就可以看出来，这个代码基本就是JS代码的直接翻译。其中有几点可以提一下：\"]}],\"\\n\",[\"$\",\"ul\",\"h-758\",{\"children\":[\"\\n\",[\"$\",\"li\",\"h-759\",{\"children\":[\"递归类型\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"h-760\",{\"children\":[[\"$\",\"code\",\"h-761\",{\"children\":[\"LangRec\"]}],\"是一个递归类型，可以理解成递归函数，其中\",[\"$\",\"code\",\"h-762\",{\"children\":[\"LangRec\"]}],\"是函数名，类型变量\",[\"$\",\"code\",\"h-763\",{\"children\":[\"D\"]}],\"为函数的变量。为了使得递归类型能够递归结束，必须需要使用\",[\"$\",\"code\",\"h-764\",{\"children\":[\"条件类型 conditional type\"]}],\"判断当前D的实际类型，并当它是字符串（即已经到达对象的叶节点）时，结束递归\"]}],\"\\n\",[\"$\",\"ul\",\"h-765\",{\"children\":[\"\\n\",[\"$\",\"li\",\"h-766\",{\"children\":[\"Mapped type\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"h-767\",{\"children\":[[\"$\",\"span\",\"h-768\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"code\",\"h-769\",{\"data-language\":\"typescript\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-770\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-771\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"ValueOf\"]}],[\"$\",\"span\",\"h-772\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-773\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"{[\"]}],[\"$\",\"span\",\"h-774\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"k\"]}],[\"$\",\"span\",\"h-775\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-776\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"in\"]}],[\"$\",\"span\",\"h-777\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-778\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"keyof\"]}],[\"$\",\"span\",\"h-779\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-780\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-781\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"]: \"]}],[\"$\",\"span\",\"h-782\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"Concat\"]}],[\"$\",\"span\",\"h-783\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-784\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"k\"]}],[\"$\",\"span\",\"h-785\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\", \"]}],[\"$\",\"span\",\"h-786\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"LangRec\"]}],[\"$\",\"span\",\"h-787\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-788\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-789\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"[\"]}],[\"$\",\"span\",\"h-790\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"k\"]}],[\"$\",\"span\",\"h-791\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"]\"]}],[\"$\",\"span\",\"h-792\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"\u003e\u003e\"]}],[\"$\",\"span\",\"h-793\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"}\"]}],[\"$\",\"span\",\"h-794\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"\u003e\"]}]]}]]}]]}],\"处运用了mapped type，将D的每个key（\",[\"$\",\"span\",\"h-795\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"code\",\"h-796\",{\"data-language\":\"typescript\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-797\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-798\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"k\"]}],[\"$\",\"span\",\"h-799\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-800\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"in\"]}],[\"$\",\"span\",\"h-801\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-802\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"typeof\"]}],[\"$\",\"span\",\"h-803\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-804\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}]]}]]}]]}],\"）映射成一个新的类型\",[\"$\",\"span\",\"h-805\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"code\",\"h-806\",{\"data-language\":\"typescript\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-807\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-808\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"Concat\"]}],[\"$\",\"span\",\"h-809\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-810\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"k\"]}],[\"$\",\"span\",\"h-811\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\", \"]}],[\"$\",\"span\",\"h-812\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"LangRec\"]}],[\"$\",\"span\",\"h-813\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-814\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-815\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"[\"]}],[\"$\",\"span\",\"h-816\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"k\"]}],[\"$\",\"span\",\"h-817\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"]\"]}],[\"$\",\"span\",\"h-818\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"\u003e\u003e\"]}]]}]]}]]}],\"。\"]}],\"\\n\",[\"$\",\"p\",\"h-819\",{\"children\":[\"本来mapped type只支持映射把对象映射到对象（如\",[\"$\",\"span\",\"h-820\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"code\",\"h-821\",{\"data-language\":\"typescript\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-822\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-823\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"{a: \"]}],[\"$\",\"span\",\"h-824\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"string\"]}],[\"$\",\"span\",\"h-825\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"; b: \"]}],[\"$\",\"span\",\"h-826\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"string\"]}],[\"$\",\"span\",\"h-827\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"}\"]}]]}]]}]]}],\"到\",[\"$\",\"span\",\"h-828\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"code\",\"h-829\",{\"data-language\":\"typescript\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-830\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-831\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"{ a: \"]}],[\"$\",\"span\",\"h-832\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"number\"]}],[\"$\",\"span\",\"h-833\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"; b: \"]}],[\"$\",\"span\",\"h-834\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"number\"]}],[\"$\",\"span\",\"h-835\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"; }\"]}]]}]]}]]}],\"），但是我们只关系值的类型（映射后的类型），不关心原来的key的类型，那么可以使用\",[\"$\",\"code\",\"h-836\",{\"children\":[\"ValueOf\"]}],\"取得所有值的类型。\"]}],\"\\n\",[\"$\",\"ul\",\"h-837\",{\"children\":[\"\\n\",[\"$\",\"li\",\"h-838\",{\"children\":[\"分配律\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"h-839\",{\"children\":[\"在原来的JS代码中，下一级生成的key是一个\",[\"$\",\"code\",\"h-840\",{\"children\":[\"string[]\"]}],\"，而本级的key是一个\",[\"$\",\"code\",\"h-841\",{\"children\":[\"string\"]}],\"，要将本级的key加到所有下一级key的前面，就需要使用\",[\"$\",\"code\",\"h-842\",{\"children\":[\"map\"]}],\"方法，并在最后使用\",[\"$\",\"code\",\"h-843\",{\"children\":[\"flatten\"]}],\"方法，把\",[\"$\",\"code\",\"h-844\",{\"children\":[\"string[][]\"]}],\"打平成\",[\"$\",\"code\",\"h-845\",{\"children\":[\"string[]\"]}],\"。\"]}],\"\\n\",[\"$\",\"p\",\"h-846\",{\"children\":[\"对应到在我们的类型代码中，下一级生成的key是一个联合类型（\",[\"$\",\"span\",\"h-847\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"code\",\"h-848\",{\"data-language\":\"typescript\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-849\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-850\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"a\\\"\"]}],[\"$\",\"span\",\"h-851\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-852\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"|\"]}],[\"$\",\"span\",\"h-853\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-854\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"b\\\"\"]}]]}]]}]]}],\"），本级的key是一个字符串字面量\",[\"$\",\"span\",\"h-855\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"code\",\"h-856\",{\"data-language\":\"typescript\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-857\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-858\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"a\\\"\"]}]]}]]}]]}],\"。但是，借助分配律，我们可以直接得到拼接后的联合类型\",[\"$\",\"span\",\"h-859\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"code\",\"h-860\",{\"data-language\":\"typescript\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-861\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-862\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"a.a\\\"\"]}],[\"$\",\"span\",\"h-863\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-864\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"|\"]}],[\"$\",\"span\",\"h-865\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-866\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"a.b\\\"\"]}]]}]]}]]}],\"。\"]}],\"\\n\",[\"$\",\"ul\",\"h-867\",{\"children\":[\"\\n\",[\"$\",\"li\",\"h-868\",{\"children\":[\"去掉最后的点（RemoveTrailingDot）\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"h-869\",{\"children\":[\"类型系统中没有\",[\"$\",\"code\",\"h-870\",{\"children\":[\".endsWith\"]}],\"方法，也没有\",[\"$\",\"code\",\"h-871\",{\"children\":[\".substr\"]}],\"方法，但是可以借助\",[\"$\",\"code\",\"h-872\",{\"children\":[\"inferred type\"]}],\"，看看原类型能不能推断(infer)出一个类型\",[\"$\",\"code\",\"h-873\",{\"children\":[\"U\"]}],\"，这个\",[\"$\",\"code\",\"h-874\",{\"children\":[\"U\"]}],\"类型加上一个\",[\"$\",\"code\",\"h-875\",{\"children\":[\".\"]}],\"，就等于原来的类型\",[\"$\",\"code\",\"h-876\",{\"children\":[\"T\"]}],\"。如果可以，那么U就是删掉最后的点后的类型。\"]}],\"\\n\",[\"$\",\"p\",\"h-877\",{\"children\":[\"通过这个Lang类型和语言对象的字面量类型，我们就可以直接获得所有可能的ID，将它用在ID的类型上，我们就实现了强类型的文本ID。借助TS提供的类型信息，VSCode等编辑器可以给出自动完成，极大地提高编程体验。\"]}],\"\\n\",[\"$\",\"div\",\"h-878\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"pre\",\"h-879\",{\"data-language\":\"tsx\",\"data-theme\":\"default\",\"children\":[[\"$\",\"code\",\"h-880\",{\"data-language\":\"tsx\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-881\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-882\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"const\"]}],[\"$\",\"span\",\"h-883\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-884\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"language\"]}],[\"$\",\"span\",\"h-885\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-886\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-887\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" { \"]}],[\"$\",\"span\",\"h-888\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"login\"]}],[\"$\",\"span\",\"h-889\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": { \"]}],[\"$\",\"span\",\"h-890\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"button\"]}],[\"$\",\"span\",\"h-891\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": { \"]}],[\"$\",\"span\",\"h-892\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"text\"]}],[\"$\",\"span\",\"h-893\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": \"]}],[\"$\",\"span\",\"h-894\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"Login\\\"\"]}],[\"$\",\"span\",\"h-895\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" } } };\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-896\",{\"className\":\"line\",\"children\":\"$undefined\"}],\"\\n\",[\"$\",\"span\",\"h-897\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-898\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"type\"]}],[\"$\",\"span\",\"h-899\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-900\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"TextId\"]}],[\"$\",\"span\",\"h-901\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-902\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-903\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-904\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Lang\"]}],[\"$\",\"span\",\"h-905\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-906\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"typeof\"]}],[\"$\",\"span\",\"h-907\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-908\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"language\"]}],[\"$\",\"span\",\"h-909\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e;\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-910\",{\"className\":\"line\",\"children\":\"$undefined\"}],\"\\n\",[\"$\",\"span\",\"h-911\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-912\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// 这个组件通过ID获得当前语言的对应的文本。\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-913\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-914\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"function\"]}],[\"$\",\"span\",\"h-915\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-916\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"LocalizedString\"]}],[\"$\",\"span\",\"h-917\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"({ \"]}],[\"$\",\"span\",\"h-918\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"id\"]}],[\"$\",\"span\",\"h-919\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" }: { \"]}],[\"$\",\"span\",\"h-920\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"id\"]}],[\"$\",\"span\",\"h-921\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": \"]}],[\"$\",\"span\",\"h-922\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"TextId\"]}],[\"$\",\"span\",\"h-923\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" }) {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-924\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-925\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-926\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// ...\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-927\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-928\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"}\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-929\",{\"className\":\"line\",\"children\":\"$undefined\"}],\"\\n\",[\"$\",\"span\",\"h-930\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-931\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-932\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"LocalizedString\"]}],[\"$\",\"span\",\"h-933\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-934\",{\"style\":{\"color\":\"#D19A66\",\"fontStyle\":\"italic\"},\"children\":[\"id\"]}],[\"$\",\"span\",\"h-935\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-936\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"a\\\"\"]}],[\"$\",\"span\",\"h-937\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" /\u003e \"]}],[\"$\",\"span\",\"h-938\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// error\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-939\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-940\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-941\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"LocalizedString\"]}],[\"$\",\"span\",\"h-942\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-943\",{\"style\":{\"color\":\"#D19A66\",\"fontStyle\":\"italic\"},\"children\":[\"id\"]}],[\"$\",\"span\",\"h-944\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-945\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"login.button\\\"\"]}],[\"$\",\"span\",\"h-946\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" /\u003e \"]}],[\"$\",\"span\",\"h-947\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// error\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-948\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-949\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-950\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"LocalizedString\"]}],[\"$\",\"span\",\"h-951\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-952\",{\"style\":{\"color\":\"#D19A66\",\"fontStyle\":\"italic\"},\"children\":[\"id\"]}],[\"$\",\"span\",\"h-953\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-954\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"login.button.text\\\"\"]}],[\"$\",\"span\",\"h-955\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" /\u003e \"]}],[\"$\",\"span\",\"h-956\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// correct\"]}]]}]]}]]}]]}],\"\\n\",[\"$\",\"p\",\"h-957\",{\"children\":[\"$L18\"]}],\"\\n\",[\"$\",\"h1\",null,{\"id\":\"id前缀\",\"children\":[[\"$\",\"a\",\"id前缀\",{\"href\":\"#id前缀\",\"className\":\"mr-2\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 512 512\",\"className\":\"inline-block\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z\",\"children\":\"$undefined\"}]]],\"style\":{\"color\":\"$undefined\"},\"height\":16,\"width\":16,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}],[\"ID前缀\"]]}],\"\\n\",[\"$\",\"p\",\"h-960\",{\"children\":[\"随着代码量的增长，UI树越来越复杂，对应的ID的结构也越来越复杂，深度越来越大，这就会使得ID越来越长，但是在同一个UI里用到的各个ID都具有相同的前缀，例如下面这个真实项目中的例子：\"]}],\"\\n\",[\"$\",\"pre\",\"h-961\",{\"children\":[[\"$\",\"code\",\"h-962\",{\"children\":[\"app.header.userIndicator.loggedIn.dropdown.login.button.text\\napp.header.userIndicator.loggedIn.dropdown.username.button.text\\napp.header.userIndicator.loggedIn.dropdown.logout.button.text\\n\"]}]]}],\"\\n\",[\"$\",\"p\",\"h-963\",{\"children\":[\"所以，我们可以将前缀提取出来，然后在真正使用的地，就可以直接输入后面不同的部分就可以了。\"]}],\"\\n\",[\"$\",\"p\",\"h-964\",{\"children\":[\"当然了这个过程也需要有类型检查。本库提供了\",[\"$\",\"code\",\"h-965\",{\"children\":[\"prefix\"]}],\"这个helper function，在运行\",[\"$\",\"code\",\"h-966\",{\"children\":[\"createI18n\"]}],\"时可以获得。对于上面三个例子，使用\",[\"$\",\"code\",\"h-967\",{\"children\":[\"prefix\"]}],\"函数可以写出如下代码。\"]}],\"\\n\",[\"$\",\"div\",\"h-968\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"pre\",\"h-969\",{\"data-language\":\"ts\",\"data-theme\":\"default\",\"children\":[[\"$\",\"code\",\"h-970\",{\"data-language\":\"ts\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-971\",{\"className\":\"line\",\"children\":\"$undefined\"}],\"\\n\",[\"$\",\"span\",\"h-972\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-973\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"const\"]}],[\"$\",\"span\",\"h-974\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-975\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"p\"]}],[\"$\",\"span\",\"h-976\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-977\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-978\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-979\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"prefix\"]}],[\"$\",\"span\",\"h-980\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-981\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"app.header.userIndicator.loggedIn.dropdown.\\\"\"]}],[\"$\",\"span\",\"h-982\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\");\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-983\",{\"className\":\"line\",\"children\":\"$undefined\"}],\"\\n\",[\"$\",\"span\",\"h-984\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-985\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"p\"]}],[\"$\",\"span\",\"h-986\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-987\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"login.button.text\\\"\"]}],[\"$\",\"span\",\"h-988\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"); \"]}],[\"$\",\"span\",\"h-989\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// app.header.userIndicator.loggedIn.dropdown.login.button.text\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-990\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-991\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"p\"]}],[\"$\",\"span\",\"h-992\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-993\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"username.button.text\\\"\"]}],[\"$\",\"span\",\"h-994\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") \"]}],[\"$\",\"span\",\"h-995\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// app.header.userIndicator.loggedIn.dropdown.login.button.text\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-996\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-997\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"p\"]}],[\"$\",\"span\",\"h-998\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-999\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"logout.button.text\\\"\"]}],[\"$\",\"span\",\"h-1000\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") \"]}],[\"$\",\"span\",\"h-1001\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// app.header.userIndicator.loggedIn.dropdown.logout.button.tex\"]}]]}]]}]]}]]}],\"\\n\",[\"$\",\"p\",\"h-1002\",{\"children\":[\"这是怎么实现的呢？\"]}],\"\\n\",[\"$\",\"div\",\"h-1003\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"pre\",\"h-1004\",{\"data-language\":\"ts\",\"data-theme\":\"default\",\"children\":[[\"$\",\"code\",\"h-1005\",{\"data-language\":\"ts\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-1006\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1007\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"type\"]}],[\"$\",\"span\",\"h-1008\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1009\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"FullLang\"]}],[\"$\",\"span\",\"h-1010\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-1011\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-1012\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1013\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"extends\"]}],[\"$\",\"span\",\"h-1014\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1015\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"string\"]}],[\"$\",\"span\",\"h-1016\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" | \"]}],[\"$\",\"span\",\"h-1017\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Definitions\"]}],[\"$\",\"span\",\"h-1018\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e \"]}],[\"$\",\"span\",\"h-1019\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-1020\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1021\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-1022\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1023\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"extends\"]}],[\"$\",\"span\",\"h-1024\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1025\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"string\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1026\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1027\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-1028\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"?\"]}],[\"$\",\"span\",\"h-1029\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1030\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"\\\"\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1031\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1032\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-1033\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\":\"]}],[\"$\",\"span\",\"h-1034\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1035\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"`\"]}],[\"$\",\"span\",\"h-1036\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"$${\"]}],[\"$\",\"span\",\"h-1037\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"ValueOf\"]}],[\"$\",\"span\",\"h-1038\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c{[\"]}],[\"$\",\"span\",\"h-1039\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"k\"]}],[\"$\",\"span\",\"h-1040\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1041\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"in\"]}],[\"$\",\"span\",\"h-1042\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1043\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"keyof\"]}],[\"$\",\"span\",\"h-1044\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1045\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-1046\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"]: \"]}],[\"$\",\"span\",\"h-1047\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"`\"]}],[\"$\",\"span\",\"h-1048\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"$${\"]}],[\"$\",\"span\",\"h-1049\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-1050\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"StringOnly\"]}],[\"$\",\"span\",\"h-1051\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-1052\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"k\"]}],[\"$\",\"span\",\"h-1053\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e)\"]}],[\"$\",\"span\",\"h-1054\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"}\"]}],[\"$\",\"span\",\"h-1055\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\".`\"]}],[\"$\",\"span\",\"h-1056\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" | \"]}],[\"$\",\"span\",\"h-1057\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Concat\"]}],[\"$\",\"span\",\"h-1058\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-1059\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"k\"]}],[\"$\",\"span\",\"h-1060\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\", \"]}],[\"$\",\"span\",\"h-1061\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"FullLang\"]}],[\"$\",\"span\",\"h-1062\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-1063\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-1064\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"[\"]}],[\"$\",\"span\",\"h-1065\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"k\"]}],[\"$\",\"span\",\"h-1066\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"]\u003e\u003e}\u003e\"]}],[\"$\",\"span\",\"h-1067\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"}\"]}],[\"$\",\"span\",\"h-1068\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"`\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1069\",{\"className\":\"line\",\"children\":\"$undefined\"}],\"\\n\",[\"$\",\"span\",\"h-1070\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1071\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"type\"]}],[\"$\",\"span\",\"h-1072\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1073\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"PartialLangFromFull\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1074\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1075\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \u003c\"]}],[\"$\",\"span\",\"h-1076\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-1077\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1078\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"extends\"]}],[\"$\",\"span\",\"h-1079\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1080\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Definitions\"]}],[\"$\",\"span\",\"h-1081\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\", \"]}],[\"$\",\"span\",\"h-1082\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"FL\"]}],[\"$\",\"span\",\"h-1083\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1084\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"extends\"]}],[\"$\",\"span\",\"h-1085\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1086\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"FullLang\"]}],[\"$\",\"span\",\"h-1087\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-1088\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-1089\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e, \"]}],[\"$\",\"span\",\"h-1090\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"L\"]}],[\"$\",\"span\",\"h-1091\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1092\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"extends\"]}],[\"$\",\"span\",\"h-1093\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1094\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Lang\"]}],[\"$\",\"span\",\"h-1095\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-1096\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-1097\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e\u003e \"]}],[\"$\",\"span\",\"h-1098\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1099\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1100\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-1101\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"FL\"]}],[\"$\",\"span\",\"h-1102\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1103\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"extends\"]}],[\"$\",\"span\",\"h-1104\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1105\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"`\"]}],[\"$\",\"span\",\"h-1106\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"$${\"]}],[\"$\",\"span\",\"h-1107\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"L\"]}],[\"$\",\"span\",\"h-1108\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"}\"]}],[\"$\",\"span\",\"h-1109\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\".`\"]}],[\"$\",\"span\",\"h-1110\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1111\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"?\"]}],[\"$\",\"span\",\"h-1112\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1113\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"never\"]}],[\"$\",\"span\",\"h-1114\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1115\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\":\"]}],[\"$\",\"span\",\"h-1116\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1117\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"FL\"]}],[\"$\",\"span\",\"h-1118\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\";\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1119\",{\"className\":\"line\",\"children\":\"$undefined\"}],\"\\n\",[\"$\",\"span\",\"h-1120\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1121\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"export\"]}],[\"$\",\"span\",\"h-1122\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1123\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"type\"]}],[\"$\",\"span\",\"h-1124\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1125\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"PartialLang\"]}],[\"$\",\"span\",\"h-1126\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-1127\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-1128\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1129\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"extends\"]}],[\"$\",\"span\",\"h-1130\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1131\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Definitions\"]}],[\"$\",\"span\",\"h-1132\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e \"]}],[\"$\",\"span\",\"h-1133\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1134\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1135\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-1136\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"PartialLangFromFull\"]}],[\"$\",\"span\",\"h-1137\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-1138\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-1139\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\", \"]}],[\"$\",\"span\",\"h-1140\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"FullLang\"]}],[\"$\",\"span\",\"h-1141\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-1142\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-1143\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e, \"]}],[\"$\",\"span\",\"h-1144\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Lang\"]}],[\"$\",\"span\",\"h-1145\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-1146\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-1147\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e\u003e;\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1148\",{\"className\":\"line\",\"children\":\"$undefined\"}],\"\\n\",[\"$\",\"span\",\"h-1149\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1150\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"export\"]}],[\"$\",\"span\",\"h-1151\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1152\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"type\"]}],[\"$\",\"span\",\"h-1153\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1154\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"RestLang\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1155\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1156\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-1157\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-1158\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1159\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"extends\"]}],[\"$\",\"span\",\"h-1160\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1161\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Definitions\"]}],[\"$\",\"span\",\"h-1162\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\", \"]}],[\"$\",\"span\",\"h-1163\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"L\"]}],[\"$\",\"span\",\"h-1164\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1165\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"extends\"]}],[\"$\",\"span\",\"h-1166\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1167\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Lang\"]}],[\"$\",\"span\",\"h-1168\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-1169\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-1170\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e, \"]}],[\"$\",\"span\",\"h-1171\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Partial\"]}],[\"$\",\"span\",\"h-1172\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1173\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"extends\"]}],[\"$\",\"span\",\"h-1174\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1175\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"PartialLang\"]}],[\"$\",\"span\",\"h-1176\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-1177\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-1178\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e\u003e \"]}],[\"$\",\"span\",\"h-1179\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1180\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1181\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-1182\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"L\"]}],[\"$\",\"span\",\"h-1183\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1184\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"extends\"]}],[\"$\",\"span\",\"h-1185\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1186\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"`\"]}],[\"$\",\"span\",\"h-1187\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"$${\"]}],[\"$\",\"span\",\"h-1188\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Partial\"]}],[\"$\",\"span\",\"h-1189\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"}${\"]}],[\"$\",\"span\",\"h-1190\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"infer \"]}],[\"$\",\"span\",\"h-1191\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Rest\"]}],[\"$\",\"span\",\"h-1192\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"}\"]}],[\"$\",\"span\",\"h-1193\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"`\"]}],[\"$\",\"span\",\"h-1194\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1195\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"?\"]}],[\"$\",\"span\",\"h-1196\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1197\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Rest\"]}],[\"$\",\"span\",\"h-1198\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1199\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\":\"]}],[\"$\",\"span\",\"h-1200\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1201\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"never\"]}],[\"$\",\"span\",\"h-1202\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\";\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1203\",{\"className\":\"line\",\"children\":\"$undefined\"}],\"\\n\",[\"$\",\"span\",\"h-1204\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1205\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"const\"]}],[\"$\",\"span\",\"h-1206\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1207\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"p\"]}],[\"$\",\"span\",\"h-1208\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": \u003c\"]}],[\"$\",\"span\",\"h-1209\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"TPartial\"]}],[\"$\",\"span\",\"h-1210\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1211\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"extends\"]}],[\"$\",\"span\",\"h-1212\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1213\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"PartialLang\"]}],[\"$\",\"span\",\"h-1214\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-1215\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-1216\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e, \"]}],[\"$\",\"span\",\"h-1217\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"TRest\"]}],[\"$\",\"span\",\"h-1218\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1219\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"extends\"]}],[\"$\",\"span\",\"h-1220\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1221\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"RestLang\"]}],[\"$\",\"span\",\"h-1222\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-1223\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-1224\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\", \"]}],[\"$\",\"span\",\"h-1225\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Lang\"]}],[\"$\",\"span\",\"h-1226\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-1227\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-1228\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e, \"]}],[\"$\",\"span\",\"h-1229\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"TPartial\"]}],[\"$\",\"span\",\"h-1230\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e\u003e\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1231\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1232\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  (\"]}],[\"$\",\"span\",\"h-1233\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"t\"]}],[\"$\",\"span\",\"h-1234\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": \"]}],[\"$\",\"span\",\"h-1235\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"TPartial\"]}],[\"$\",\"span\",\"h-1236\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") \"]}],[\"$\",\"span\",\"h-1237\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"=\u003e\"]}],[\"$\",\"span\",\"h-1238\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" (\"]}],[\"$\",\"span\",\"h-1239\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"rest\"]}],[\"$\",\"span\",\"h-1240\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": \"]}],[\"$\",\"span\",\"h-1241\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"TRest\"]}],[\"$\",\"span\",\"h-1242\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") \"]}],[\"$\",\"span\",\"h-1243\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"=\u003e\"]}],[\"$\",\"span\",\"h-1244\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1245\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"`\"]}],[\"$\",\"span\",\"h-1246\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"$${\"]}],[\"$\",\"span\",\"h-1247\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"TPartial\"]}],[\"$\",\"span\",\"h-1248\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"}${\"]}],[\"$\",\"span\",\"h-1249\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"TRest\"]}],[\"$\",\"span\",\"h-1250\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"}\"]}],[\"$\",\"span\",\"h-1251\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"`\"]}],[\"$\",\"span\",\"h-1252\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1253\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-1254\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" (\"]}],[\"$\",\"span\",\"h-1255\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"t\"]}],[\"$\",\"span\",\"h-1256\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") \"]}],[\"$\",\"span\",\"h-1257\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"=\u003e\"]}],[\"$\",\"span\",\"h-1258\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" (\"]}],[\"$\",\"span\",\"h-1259\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"s\"]}],[\"$\",\"span\",\"h-1260\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") \"]}],[\"$\",\"span\",\"h-1261\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"=\u003e\"]}],[\"$\",\"span\",\"h-1262\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1263\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"t\"]}],[\"$\",\"span\",\"h-1264\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"+\"]}],[\"$\",\"span\",\"h-1265\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"s\"]}],[\"$\",\"span\",\"h-1266\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\";\"]}]]}]]}]]}]]}],\"\\n\",[\"$\",\"p\",\"h-1267\",{\"children\":[\"这看着比上面的获得所有ID要复杂不少，但是简单来说可以分为这几步：\"]}],\"\\n\",[\"$\",\"ol\",\"h-1268\",{\"children\":[\"\\n\",[\"$\",\"li\",\"h-1269\",{\"children\":[[\"$\",\"code\",\"h-1270\",{\"children\":[\"FullLang\"]}],\"类型取得DFS过程中所有中间节点的ID\\n\",[\"$\",\"ul\",\"h-1271\",{\"children\":[\"\\n\",[\"$\",\"li\",\"h-1272\",{\"children\":[[\"$\",\"code\",\"h-1273\",{\"children\":[\"Lang\"]}],\"只会取得到叶节点的ID，而\",[\"$\",\"code\",\"h-1274\",{\"children\":[\"FullLang\"]}],\"会把途径的中间结果的ID也获得\"]}],\"\\n\",[\"$\",\"li\",\"h-1275\",{\"children\":[\"另外还有一个区别是这个得到的所有ID最终的\",[\"$\",\"code\",\"h-1276\",{\"children\":[\".\"]}],\"是没有去掉的\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"div\",\"h-1277\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"pre\",\"h-1278\",{\"data-language\":\"tsx\",\"data-theme\":\"default\",\"children\":[[\"$\",\"code\",\"h-1279\",{\"data-language\":\"tsx\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-1280\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1281\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"const\"]}],[\"$\",\"span\",\"h-1282\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1283\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"language\"]}],[\"$\",\"span\",\"h-1284\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1285\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-1286\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" { \"]}],[\"$\",\"span\",\"h-1287\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"login\"]}],[\"$\",\"span\",\"h-1288\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": { \"]}],[\"$\",\"span\",\"h-1289\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"button\"]}],[\"$\",\"span\",\"h-1290\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": { \"]}],[\"$\",\"span\",\"h-1291\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"text\"]}],[\"$\",\"span\",\"h-1292\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": \"]}],[\"$\",\"span\",\"h-1293\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"Login\\\"\"]}],[\"$\",\"span\",\"h-1294\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" } } };\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1295\",{\"className\":\"line\",\"children\":\"$undefined\"}],\"\\n\",[\"$\",\"span\",\"h-1296\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1297\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"type\"]}],[\"$\",\"span\",\"h-1298\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1299\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-1300\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1301\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-1302\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1303\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"typeof\"]}],[\"$\",\"span\",\"h-1304\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1305\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"language\"]}],[\"$\",\"span\",\"h-1306\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\";\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1307\",{\"className\":\"line\",\"children\":\"$undefined\"}],\"\\n\",[\"$\",\"span\",\"h-1308\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1309\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"type\"]}],[\"$\",\"span\",\"h-1310\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1311\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"FL\"]}],[\"$\",\"span\",\"h-1312\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1313\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-1314\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1315\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"FullLang\"]}],[\"$\",\"span\",\"h-1316\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-1317\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-1318\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e; \"]}],[\"$\",\"span\",\"h-1319\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// \\\"login.\\\" | \\\"login.button.\\\" | \\\"login.button.text.\\\";\"]}]]}]]}]]}]]}],\"\\n\",[\"$\",\"ol\",\"h-1320\",{\"start\":2,\"children\":[\"\\n\",[\"$\",\"li\",\"h-1321\",{\"children\":[[\"$\",\"code\",\"h-1322\",{\"children\":[\"PartialLangFromFull\"]}],\"类型把到叶节点的ID去掉\\n\",[\"$\",\"ul\",\"h-1323\",{\"children\":[\"\\n\",[\"$\",\"li\",\"h-1324\",{\"children\":[\"对于\",[\"$\",\"code\",\"h-1325\",{\"children\":[\"FullLang\"]}],\"的每个取值，如果它是某个\",[\"$\",\"code\",\"h-1326\",{\"children\":[\"Lang\"]}],\"的取值后面加个\",[\"$\",\"code\",\"h-1327\",{\"children\":[\".\"]}],\"，那么这个其实是到叶节点的ID，不是前缀，是不应该取的(\",[\"$\",\"code\",\"h-1328\",{\"children\":[\"never\"]}],\")\"]}],\"\\n\",[\"$\",\"li\",\"h-1329\",{\"children\":[\"到这里已经获得前缀了\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"div\",\"h-1330\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"pre\",\"h-1331\",{\"data-language\":\"tsx\",\"data-theme\":\"default\",\"children\":[[\"$\",\"code\",\"h-1332\",{\"data-language\":\"tsx\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-1333\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1334\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"type\"]}],[\"$\",\"span\",\"h-1335\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1336\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"PLFF\"]}],[\"$\",\"span\",\"h-1337\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1338\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-1339\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1340\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"PartialLangFromFull\"]}],[\"$\",\"span\",\"h-1341\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-1342\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-1343\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\", \"]}],[\"$\",\"span\",\"h-1344\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"FullLang\"]}],[\"$\",\"span\",\"h-1345\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-1346\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-1347\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e, \"]}],[\"$\",\"span\",\"h-1348\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"PartialLang\"]}],[\"$\",\"span\",\"h-1349\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-1350\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-1351\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e\u003e; \"]}],[\"$\",\"span\",\"h-1352\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// \\\"login.\\\" | \\\"login.button.\\\"\"]}]]}]]}]]}]]}],\"\\n\",[\"$\",\"ol\",\"h-1353\",{\"start\":3,\"children\":[\"\\n\",[\"$\",\"li\",\"h-1354\",{\"children\":[[\"$\",\"code\",\"h-1355\",{\"children\":[\"RestLang\"]}],\"是通过前缀来获取可以接受的后缀\\n\",[\"$\",\"ul\",\"h-1356\",{\"children\":[\"\\n\",[\"$\",\"li\",\"h-1357\",{\"children\":[\"这个也是通过\",[\"$\",\"code\",\"h-1358\",{\"children\":[\"infer\"]}],\"的方式来实现的，看看是否某个\",[\"$\",\"code\",\"h-1359\",{\"children\":[\"Lang\"]}],\"的取值可以是传入的前缀和后缀拼起来\",[\"$\",\"code\",\"h-1360\",{\"children\":[\"$${Partial}${infer Rest}\"]}],\"，如果可以，就把后缀\",[\"$\",\"code\",\"h-1361\",{\"children\":[\"Rest\"]}],\"返回\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"div\",\"h-1362\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"pre\",\"h-1363\",{\"data-language\":\"ts\",\"data-theme\":\"default\",\"children\":[[\"$\",\"code\",\"h-1364\",{\"data-language\":\"ts\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-1365\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1366\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"type\"]}],[\"$\",\"span\",\"h-1367\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1368\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"RestLang\"]}],[\"$\",\"span\",\"h-1369\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1370\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-1371\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1372\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"RestLang\"]}],[\"$\",\"span\",\"h-1373\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-1374\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-1375\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\", \"]}],[\"$\",\"span\",\"h-1376\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Lang\"]}],[\"$\",\"span\",\"h-1377\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-1378\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"D\"]}],[\"$\",\"span\",\"h-1379\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e, \"]}],[\"$\",\"span\",\"h-1380\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"login.\\\"\"]}],[\"$\",\"span\",\"h-1381\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e \"]}],[\"$\",\"span\",\"h-1382\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// \\\"button.text\\\"\"]}]]}]]}]]}]]}],\"\\n\",[\"$\",\"ol\",\"h-1383\",{\"start\":4,\"children\":[\"\\n\",[\"$\",\"li\",\"h-1384\",{\"children\":[\"最后，\",[\"$\",\"code\",\"h-1385\",{\"children\":[\"p\"]}],\"函数的实现其实就是一个\",[\"$\",\"span\",\"h-1386\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"code\",\"h-1387\",{\"data-language\":\"ts\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-1388\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1389\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-1390\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"t\"]}],[\"$\",\"span\",\"h-1391\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") \"]}],[\"$\",\"span\",\"h-1392\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"=\u003e\"]}],[\"$\",\"span\",\"h-1393\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" (\"]}],[\"$\",\"span\",\"h-1394\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"s\"]}],[\"$\",\"span\",\"h-1395\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") \"]}],[\"$\",\"span\",\"h-1396\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"=\u003e\"]}],[\"$\",\"span\",\"h-1397\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1398\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"t\"]}],[\"$\",\"span\",\"h-1399\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"+\"]}],[\"$\",\"span\",\"h-1400\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"s\"]}]]}]]}]]}],\"，非常简单，运行时几乎没有什么开销。\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h1\",null,{\"id\":\"总结\",\"children\":[[\"$\",\"a\",\"总结\",{\"href\":\"#总结\",\"className\":\"mr-2\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 512 512\",\"className\":\"inline-block\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z\",\"children\":\"$undefined\"}]]],\"style\":{\"color\":\"$undefined\"},\"height\":16,\"width\":16,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}],[\"总结\"]]}],\"\\n\",[\"$\",\"p\",\"h-1402\",{\"children\":[\"TS具有现在常见编程语言中最强大的类型系统，而这个类型系统如果能用得好，能够极大地提高编程效率。这个方案借助了TS的强大的类型系统，使得i18n的过程也能享受到较为完善的类型检查，能够在编译器避免很多因为string写错的带来的运行时bug。并且，在运行时就是普通的字符串，和之前的通过proxy截取对象访问路径生成ID的方案相比，不会在运行时产生任何开销。\"]}],\"\\n\",[\"$\",\"p\",\"h-1403\",{\"children\":[\"这个方案也有一个潜在问题，即当语言对象很大很复杂时，编译器的类型运算本身可能会消耗较多运算资源，影响编辑器的流畅度。但是，当前我的网站具有151行的语言定义，ID的自动完成性能还算可以接受（基本不会有可见卡顿），所以对我来说性能已经够用了。\"]}],\"\\n\",[\"$\",\"p\",\"h-1404\",{\"children\":[\"希望有更多用户可以来试试\",[\"$\",\"code\",\"h-1405\",{\"children\":[\"react-typed-i18n\"]}],\"（\",[\"$\",\"a\",\"h-1406\",{\"href\":\"https://github.com/ddadaal/react-typed-i18n\",\"children\":[\"GitHub\"]}],\"）。\"]}]]}],[\"$\",\"div\",null,{\"className\":\"hidden lg:block lg:w-[25%]\",\"children\":[\"$\",\"$L19\",null,{\"toc\":[{\"depth\":1,\"value\":\"react-typed-i18n\",\"id\":\"react-typed-i18n\"},{\"depth\":1,\"value\":\"i18n\",\"id\":\"i18n\"},{\"depth\":1,\"value\":\"定义ID和文本的对应关系\",\"id\":\"定义id和文本的对应关系\"},{\"depth\":1,\"value\":\"通过ID取得当前语言的文本\",\"id\":\"通过id取得当前语言的文本\"},{\"depth\":1,\"value\":\"强类型地输入ID\",\"id\":\"强类型地输入id\"},{\"depth\":1,\"value\":\"使用Template Literal Type计算所有可能的ID\",\"id\":\"使用template-literal-type计算所有可能的id\"},{\"depth\":1,\"value\":\"ID前缀\",\"id\":\"id前缀\"},{\"depth\":1,\"value\":\"总结\",\"id\":\"总结\"}]}]}]]}]\n"])</script><script>self.__next_f.push([1,"1a:I{\"id\":\"2834\",\"chunks\":[\"309:static/chunks/70bb1395-8b005f7f53c5ebef.js\",\"975:static/chunks/dc6764d5-18938ac2fbe13f06.js\",\"344:static/chunks/2e69a9b8-691073cd158eaece.js\",\"270:static/chunks/270-98733365f87156fa.js\",\"647:static/chunks/647-9f8470e794e19f41.js\",\"813:static/chunks/813-cee425865faf8491.js\",\"382:static/chunks/382-7084e3b01c16da04.js\",\"94:static/chunks/app/about/[id]/[[...lang]]/page-26b0ace881630605.js\"],\"name\":\"ArticleImage\",\"async\":false}\n18:[\"$\",\"figure\",null,{\"children\":[[\"$\",\"$L1a\",null,{"])</script><script>self.__next_f.push([1,"\"filePath\":\"contents/20210606-typed-i18n-with-template-literal-types/demo.gif\",\"imageSize\":{\"height\":705,\"width\":1074},\"imageProps\":{\"src\":\"demo.gif\",\"alt\":\"自动完成体验\",\"children\":\"$undefined\"}}],[\"$\",\"figcaption\",null,{\"className\":\"text-center\",\"children\":\"自动完成体验\"}]]}]\n"])</script></body></html>