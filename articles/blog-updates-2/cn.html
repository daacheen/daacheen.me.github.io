<!DOCTYPE html><html lang="zh-CN" class="scroll-smooth"><head><meta charSet="utf-8"/><link rel="stylesheet" href="/_next/static/css/c495959718e63cb3.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/46035642466e2fae.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/550cc6711c036586.css" data-precedence="next"/><title>博客的发展2：重写，重生 - ddadaal.me</title><meta name="description" content="ddadaal&#x27;s personal website"/><link rel="manifest" href="/site.webmanifest"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="any"/><link rel="icon" href="/icon.svg?35be8e76be1c3618" type="image/svg+xml" sizes="500x500"/><link rel="apple-touch-icon" href="/apple-icon.png?5334a64f42000bb0" type="image/png" sizes="180x180"/><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" noModule=""></script></head><body class="w-full"><div class="items-center sticky z-50 w-full h-13 transition -top-[1px] bg-base-200 text-base-content"><div class="flex justify-between items-center max-w-7xl mx-auto px-4"><a class="flex items-center justify-center space-x-1" href="/"><img alt="logo" loading="lazy" width="42" height="42" decoding="async" data-nimg="1" style="color:transparent" src="/_next/static/media/logo.8f2bd5ec.svg"/><h1 class="text-sm font-bold">ddadaal.me</h1></a><div class="flex items-center gap-1"><div class="hidden lg:flex"><ul class="menu menu-horizontal"><li><a class="" href="/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 576 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"></path></svg>主页</a></li><li><a class="active" href="/articles"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 576 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M542.22 32.05c-54.8 3.11-163.72 14.43-230.96 55.59-4.64 2.84-7.27 7.89-7.27 13.17v363.87c0 11.55 12.63 18.85 23.28 13.49 69.18-34.82 169.23-44.32 218.7-46.92 16.89-.89 30.02-14.43 30.02-30.66V62.75c.01-17.71-15.35-31.74-33.77-30.7zM264.73 87.64C197.5 46.48 88.58 35.17 33.78 32.05 15.36 31.01 0 45.04 0 62.75V400.6c0 16.24 13.13 29.78 30.02 30.66 49.49 2.6 149.59 12.11 218.77 46.95 10.62 5.35 23.21-1.94 23.21-13.46V100.63c0-5.29-2.62-10.14-7.27-12.99z"></path></svg>文章</a></li><li><details><summary class=""><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 384 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm160-14.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"></path></svg>简历</summary><ul class="shadow bg-base-200 text-base-content"><li><a class="" href="/resume/cn">🇨🇳 <!-- -->简体中文</a></li><li><a class="" href="/resume/en">🇺🇸 <!-- -->English</a></li></ul></details></li><li><a class="" href="/slides"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M187.7 153.7c-34 0-61.7 25.7-61.7 57.7 0 31.7 27.7 57.7 61.7 57.7s61.7-26 61.7-57.7c0-32-27.7-57.7-61.7-57.7zm143.4 0c-34 0-61.7 25.7-61.7 57.7 0 31.7 27.7 57.7 61.7 57.7 34.3 0 61.7-26 61.7-57.7.1-32-27.4-57.7-61.7-57.7zm156.6 90l-6 4.3V49.7c0-27.4-20.6-49.7-46-49.7H76.6c-25.4 0-46 22.3-46 49.7V248c-2-1.4-4.3-2.9-6.3-4.3-15.1-10.6-25.1 4-16 17.7 18.3 22.6 53.1 50.3 106.3 72C58.3 525.1 252 555.7 248.9 457.5c0-.7.3-56.6.3-96.6 5.1 1.1 9.4 2.3 13.7 3.1 0 39.7.3 92.8.3 93.5-3.1 98.3 190.6 67.7 134.3-124 53.1-21.7 88-49.4 106.3-72 9.1-13.8-.9-28.3-16.1-17.8zm-30.5 19.2c-68.9 37.4-128.3 31.1-160.6 29.7-23.7-.9-32.6 9.1-33.7 24.9-10.3-7.7-18.6-15.5-20.3-17.1-5.1-5.4-13.7-8-27.1-7.7-31.7 1.1-89.7 7.4-157.4-28V72.3c0-34.9 8.9-45.7 40.6-45.7h317.7c30.3 0 40.9 12.9 40.9 45.7v190.6z"></path></svg>幻灯片</a></li><li><details><summary class=""><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 192 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M20 424.229h20V279.771H20c-11.046 0-20-8.954-20-20V212c0-11.046 8.954-20 20-20h112c11.046 0 20 8.954 20 20v212.229h20c11.046 0 20 8.954 20 20V492c0 11.046-8.954 20-20 20H20c-11.046 0-20-8.954-20-20v-47.771c0-11.046 8.954-20 20-20zM96 0C56.235 0 24 32.235 24 72s32.235 72 72 72 72-32.235 72-72S135.764 0 96 0z"></path></svg>关于</summary><ul class="shadow bg-base-200 text-base-content"><li><a class="" href="/about/odyssey"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 576 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M542.22 32.05c-54.8 3.11-163.72 14.43-230.96 55.59-4.64 2.84-7.27 7.89-7.27 13.17v363.87c0 11.55 12.63 18.85 23.28 13.49 69.18-34.82 169.23-44.32 218.7-46.92 16.89-.89 30.02-14.43 30.02-30.66V62.75c.01-17.71-15.35-31.74-33.77-30.7zM264.73 87.64C197.5 46.48 88.58 35.17 33.78 32.05 15.36 31.01 0 45.04 0 62.75V400.6c0 16.24 13.13 29.78 30.02 30.66 49.49 2.6 149.59 12.11 218.77 46.95 10.62 5.35 23.21-1.94 23.21-13.46V100.63c0-5.29-2.62-10.14-7.27-12.99z"></path></svg>一个个人博客的史诗</a></li><li><a class="" href="/about/project"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"></path></svg>关于网站</a></li><li><a class="" href="/about/me"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 192 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M96 0c35.346 0 64 28.654 64 64s-28.654 64-64 64-64-28.654-64-64S60.654 0 96 0m48 144h-11.36c-22.711 10.443-49.59 10.894-73.28 0H48c-26.51 0-48 21.49-48 48v136c0 13.255 10.745 24 24 24h16v136c0 13.255 10.745 24 24 24h64c13.255 0 24-10.745 24-24V352h16c13.255 0 24-10.745 24-24V192c0-26.51-21.49-48-48-48z"></path></svg>关于我</a></li></ul></details></li></ul></div><div class="dropdown dropdown-end"><label tabindex="0" class="btn"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 256c0 136.966 111.033 248 248 248s248-111.034 248-248S392.966 8 256 8 8 119.033 8 256zm248 184V72c101.705 0 184 82.311 184 184 0 101.705-82.311 184-184 184z"></path></svg><span class="hidden sm:block">自动</span></label><ul tabindex="0" class="dropdown-content menu p-2 bg-base-200 text-base-content shadow rounded-box w-52"><li><a class="justify-between">自动</a></li><li><a class="justify-between">明亮</a></li><li><a class="justify-between">暗色</a></li><li><a class="justify-between">杯子蛋糕</a></li><li><a class="justify-between">大黄蜂</a></li><li><a class="justify-between">白色商务</a></li><li><a class="justify-between">黑色商务</a></li><li><a class="justify-between">金色奢华</a></li><li><a class="justify-between">夏日柠檬</a></li><li><a class="justify-between">绿野仙踪</a></li><li><a class="justify-between">复古</a></li><li><a class="justify-between">粉色浪漫</a></li><li><a class="justify-between">赛博朋克</a></li></ul></div><div class="dropdown dropdown-end"><label tabindex="0" class="btn">🇨🇳 <span class="hidden sm:block">简体中文</span></label><ul tabindex="0" class="dropdown-content menu p-2 shadow bg-base-200 rounded-box w-52 text-base-content"><li><a class="justify-between">🇨🇳 <!-- -->简体中文</a></li><li><a class="justify-between">🇺🇸 <!-- -->English</a></li></ul></div><div class="dropdown dropdown-end lg:hidden"><label tabindex="0" class="btn btn-ghost"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"></path></svg></label><ul tabindex="0" class="menu menu-compact dropdown-content mt-3 p-2 shadow rounded-box bg-base-200 text-base-content "><li><a class="" href="/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 576 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"></path></svg>主页</a></li><li><a class="active" href="/articles"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 576 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M542.22 32.05c-54.8 3.11-163.72 14.43-230.96 55.59-4.64 2.84-7.27 7.89-7.27 13.17v363.87c0 11.55 12.63 18.85 23.28 13.49 69.18-34.82 169.23-44.32 218.7-46.92 16.89-.89 30.02-14.43 30.02-30.66V62.75c.01-17.71-15.35-31.74-33.77-30.7zM264.73 87.64C197.5 46.48 88.58 35.17 33.78 32.05 15.36 31.01 0 45.04 0 62.75V400.6c0 16.24 13.13 29.78 30.02 30.66 49.49 2.6 149.59 12.11 218.77 46.95 10.62 5.35 23.21-1.94 23.21-13.46V100.63c0-5.29-2.62-10.14-7.27-12.99z"></path></svg>文章</a></li><li><a><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 384 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm160-14.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"></path></svg>简历</a><ul><li><a class="" href="/resume/cn">🇨🇳 <!-- -->简体中文</a></li><li><a class="" href="/resume/en">🇺🇸 <!-- -->English</a></li></ul></li><li><a class="" href="/slides"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M187.7 153.7c-34 0-61.7 25.7-61.7 57.7 0 31.7 27.7 57.7 61.7 57.7s61.7-26 61.7-57.7c0-32-27.7-57.7-61.7-57.7zm143.4 0c-34 0-61.7 25.7-61.7 57.7 0 31.7 27.7 57.7 61.7 57.7 34.3 0 61.7-26 61.7-57.7.1-32-27.4-57.7-61.7-57.7zm156.6 90l-6 4.3V49.7c0-27.4-20.6-49.7-46-49.7H76.6c-25.4 0-46 22.3-46 49.7V248c-2-1.4-4.3-2.9-6.3-4.3-15.1-10.6-25.1 4-16 17.7 18.3 22.6 53.1 50.3 106.3 72C58.3 525.1 252 555.7 248.9 457.5c0-.7.3-56.6.3-96.6 5.1 1.1 9.4 2.3 13.7 3.1 0 39.7.3 92.8.3 93.5-3.1 98.3 190.6 67.7 134.3-124 53.1-21.7 88-49.4 106.3-72 9.1-13.8-.9-28.3-16.1-17.8zm-30.5 19.2c-68.9 37.4-128.3 31.1-160.6 29.7-23.7-.9-32.6 9.1-33.7 24.9-10.3-7.7-18.6-15.5-20.3-17.1-5.1-5.4-13.7-8-27.1-7.7-31.7 1.1-89.7 7.4-157.4-28V72.3c0-34.9 8.9-45.7 40.6-45.7h317.7c30.3 0 40.9 12.9 40.9 45.7v190.6z"></path></svg>幻灯片</a></li><li><a><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 192 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M20 424.229h20V279.771H20c-11.046 0-20-8.954-20-20V212c0-11.046 8.954-20 20-20h112c11.046 0 20 8.954 20 20v212.229h20c11.046 0 20 8.954 20 20V492c0 11.046-8.954 20-20 20H20c-11.046 0-20-8.954-20-20v-47.771c0-11.046 8.954-20 20-20zM96 0C56.235 0 24 32.235 24 72s32.235 72 72 72 72-32.235 72-72S135.764 0 96 0z"></path></svg>关于</a><ul><li><a class="" href="/about/odyssey"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 576 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M542.22 32.05c-54.8 3.11-163.72 14.43-230.96 55.59-4.64 2.84-7.27 7.89-7.27 13.17v363.87c0 11.55 12.63 18.85 23.28 13.49 69.18-34.82 169.23-44.32 218.7-46.92 16.89-.89 30.02-14.43 30.02-30.66V62.75c.01-17.71-15.35-31.74-33.77-30.7zM264.73 87.64C197.5 46.48 88.58 35.17 33.78 32.05 15.36 31.01 0 45.04 0 62.75V400.6c0 16.24 13.13 29.78 30.02 30.66 49.49 2.6 149.59 12.11 218.77 46.95 10.62 5.35 23.21-1.94 23.21-13.46V100.63c0-5.29-2.62-10.14-7.27-12.99z"></path></svg>一个个人博客的史诗</a></li><li><a class="" href="/about/project"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"></path></svg>关于网站</a></li><li><a class="" href="/about/me"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 192 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M96 0c35.346 0 64 28.654 64 64s-28.654 64-64 64-64-28.654-64-64S60.654 0 96 0m48 144h-11.36c-22.711 10.443-49.59 10.894-73.28 0H48c-26.51 0-48 21.49-48 48v136c0 13.255 10.745 24 24 24h16v136c0 13.255 10.745 24 24 24h64c13.255 0 24-10.745 24-24V352h16c13.255 0 24-10.745 24-24V192c0-26.51-21.49-48-48-48z"></path></svg>关于我</a></li></ul></li></ul></div></div></div></div><div><article><div class="bg-neutral px-4 py-8"><div class="max-w-7xl mx-auto min-h-[256px] flex justify-center text-center text-neutral-content"><div class="flex flex-col justify-center animate-slide-up"><h1 class="text-4xl my-2">博客的发展2：重写，重生</h1><div class="flex flex-wrap gap-3 my-2 text-sm justify-center"><div class="flex flex-wrap gap-1 items-center"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"></path></svg><a class="badge badge-accent mx-0.5 text-accent-content" href="/articles/search?query=blog">博客</a></div><div class="flex items-center" title="发表时间"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M12 192h424c6.6 0 12 5.4 12 12v260c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V204c0-6.6 5.4-12 12-12zm436-44v-36c0-26.5-21.5-48-48-48h-48V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H160V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H48C21.5 64 0 85.5 0 112v36c0 6.6 5.4 12 12 12h424c6.6 0 12-5.4 12-12z"></path></svg><span class="mx-0.5">2023-06-17 22:10:00 UTC+8</span></div><div class="flex items-center"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 384 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm57.1 120H305c7.7 0 13.4 7.1 11.7 14.7l-38 168c-1.2 5.5-6.1 9.3-11.7 9.3h-38c-5.5 0-10.3-3.8-11.6-9.1-25.8-103.5-20.8-81.2-25.6-110.5h-.5c-1.1 14.3-2.4 17.4-25.6 110.5-1.3 5.3-6.1 9.1-11.6 9.1H117c-5.6 0-10.5-3.9-11.7-9.4l-37.8-168c-1.7-7.5 4-14.6 11.7-14.6h24.5c5.7 0 10.7 4 11.8 9.7 15.6 78 20.1 109.5 21 122.2 1.6-10.2 7.3-32.7 29.4-122.7 1.3-5.4 6.1-9.1 11.7-9.1h29.1c5.6 0 10.4 3.8 11.7 9.2 24 100.4 28.8 124 29.6 129.4-.2-11.2-2.6-17.8 21.6-129.2 1-5.6 5.9-9.5 11.5-9.5zM384 121.9v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"></path></svg><span class="mx-0.5">6643 字</span></div><div class="flex items-center"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"></path></svg><span class="mx-0.5">34 分钟阅读</span></div><div class="flex items-center"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"></path></svg><span class="mx-0.5 space-x-1"><a class="link link-hover" href="/articles/blog-updates-2/cn">简体中文</a></span></div></div></div></div></div><div class="animate-slide-up"><div class="max-w-7xl mx-auto p-4"><div class="flex flex-row space-x-4"><div class="prose max-w-full lg:w-[75%]"><h1 id="鸽了4年的更新"><a href="#鸽了4年的更新" class="mr-2"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="inline-block" height="16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a>鸽了4年的更新</h1>
<p>4年前的<a href="/articles/blog-updates-1">博客的发展1</a>中，我提到了当时博客的几个问题。后来，我通过一个非常hack的方式解决了中文字数统计的问题（<a href="/articles/fix-gatsby-transformer-remark-chinese-word-count">修复gatsby-transformer-remark插件中文词数统计错误问题</a>，但是最重要的<strong>重构样式和完善UI设计</strong>的问题一直搁置，并且随着时间和技术的发展，项目也遇到了不少的问题，例如</p>
<ol>
<li>样式的混乱使得我一直使用老的bootstrap v4版本，无法升级到最新的bootstrap版本</li>
<li>gatsby生态更新太快，很多组件我无法理解它们具体做了什么工作</li>
</ol>
<p>5月底研究生答辩完后，本来计划好的旅行，在我出发的前一天被我二阳直接推迟了。阳了后基本上也就只能在宿舍呆着。呆着也是呆着，我想起来博客这个”我的门面“。这三年博客本身基本没有任何更新，基本属于年久失修的状态。于是我决定给我的博客来个大手术。</p>
<h1 id="新博客的亮点"><a href="#新博客的亮点" class="mr-2"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="inline-block" height="16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a>新博客的亮点</h1>
<ul>
<li>完全使用Next.js编写</li>
</ul>
<p>由于研究生期间的项目（<a href="https://github.com/PKUHPC/SCOW">PKUHPC/SCOW</a>）是完全使用Next.js编写的，我对Next.js非常熟悉。而Next.js本身也是一个非常成熟的React框架，并且也支持<a href="https://nextjs.org/docs/app/building-your-application/deploying/static-exports">导出为静态网站</a>的功能，并且有很多网站均使用了Next.js来作为它们的主页、博客等信息发布平台，所以我在想是否能重用之前的经验，用Next.js来搭建新的网站。一顿操作下来，除了遇到了一些和Gatsby的思路不太一样的地方，整个体验还是挺不错的。</p>
<ul>
<li>完全兼容原有博客</li>
</ul>
<p>新的网站和原有博客在功能性、整体布局以及各个页面的URL方面都完全一致，原有的所有使用习惯和URL都可以直接使用，原来的所有功能现在都仍然支持，包括但不限于多语言页面、多语言文章、RSS等。这才是<strong>重写</strong>的真正含义吧：所有代码都完全重写了，但是不会影响任何已有的使用体验。</p>
<ul>
<li>使用Tailwind编写样式，去除CSS in JS方案</li>
</ul>
<p>这是本次重写最重要的地方。我原来是CSS in JS的狂热爱好者，认为使用JS编写网站的所有方便是网页开发的最终目标。现在，我虽然仍然认为CSS in JS方案带来的灵活性是所有其他方案都不可比拟的，但是我也认识到很多情况下样式并不需要那么高的灵活性。另外，由于样式最终还是要到达CSS的层次，在把CSS in JS和其他第三方样式解决方案（例如之前用的bootstrap）集成的过程中，需要大量代码来将两套完全独立的样式系统整合起来。这也是之前样式代码极度混乱的根本原因。</p>
<p>例如，原来代码中的导航栏组件同时使用了bootstrap的<code>Navbar</code>组件，并通过styled-components在这个组件的基础上自定义了样式。在自定义样式时，还引用了TS中定义的样式变量。有的组件甚至为了使用bootstrap的定义在<code>SCSS</code>中的变量，故还引用了自定义的SCSS文件。而由于有的变量是定义在SCSS中，有的是在TS代码中的，所有很多变量（例如颜色）都需要定义两次。</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="ts" data-theme="default"><code data-language="ts" data-theme="default"><span class="line"><span style="color:#C678DD">import</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">Navbar</span><span style="color:#ABB2BF"> } </span><span style="color:#C678DD">from</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;reactstrap&quot;</span><span style="color:#ABB2BF">;</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">StyledNavbar</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">styled</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">Navbar</span><span style="color:#ABB2BF">)</span><span style="color:#98C379">`</span></span>
<span class="line"><span style="color:#98C379">  &amp;&amp; {</span></span>
<span class="line"><span style="color:#98C379">    max-width: </span><span style="color:#C678DD">${</span><span style="color:#E5C07B">widths</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">mainContent</span><span style="color:#C678DD">}</span><span style="color:#98C379">px;</span></span>
<span class="line"><span style="color:#98C379">    margin-left: auto;</span></span>
<span class="line"><span style="color:#98C379">    margin-right: auto;</span></span>
<span class="line"><span style="color:#98C379">    padding: 4px 8px;</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#98C379">    transition: width 0.2s ease-in-out;</span></span>
<span class="line"><span style="color:#98C379">  }</span></span>
<span class="line"><span style="color:#98C379">`</span><span style="color:#ABB2BF">;</span></span></code></pre></div>
<p>另外，我也认识到以传统HTML/CSS来布局和样式的一些优势，例如将UI与具体的开发框架解耦、更好的性能、以及甚至能在不启用JS的环境下展示页面等。当前，以<a href="https://tailwindcss.com/">tailwind</a>为主的以传统的HTML/CSS为基础的样式方案非常火，这次我也直接采用tailwind以及基于tailwind的纯HTML/CSS组件库<a href="https://daisyui.com/">daisyui</a>来编写新的博客，并体验到了前所未有的开发效率和开发体验。直接写语义化的类型名，确实比写JS代码要方便太多了。</p>
<p><figure><img alt="tailwind自动完成体验" loading="lazy" width="1050" height="608" decoding="async" data-nimg="1" class="cursor-zoom-in mx-auto" style="color:transparent" srcSet="/articles/asset/contents/20230617-blog-updates-2/tailwind.png?width=1080 1x, /articles/asset/contents/20230617-blog-updates-2/tailwind.png?width=3840 2x" src="/articles/asset/contents/20230617-blog-updates-2/tailwind.png?width=3840"/><figcaption class="text-center">tailwind自动完成体验</figcaption></figure></p>
<h1 id="实现"><a href="#实现" class="mr-2"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="inline-block" height="16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a>实现</h1>
<h2 id="完全采用nextjs-app-router"><a href="#完全采用nextjs-app-router" class="mr-2"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="inline-block" height="16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a>完全采用Next.js App Router</h2>
<p>Next.js的<a href="https://nextjs.org/docs/app">App Router</a>功能可谓是万众期待，虽说有评论说这个功能（以及后续的Server Actions）把Next.js<a href="https://www.youtube.com/watch?v=10Yt5vRimNI">变成了PHP</a>，但是不可否认的是，App Router极大地提高了开发体验和灵活度。</p>
<p>在新的博客中，App Router带来的各种优势里，让我最受用的是以下两点：</p>
<ul>
<li>React Server Component （RSC，服务器端组件）</li>
</ul>
<p>React Server Component (RSC)实际上是React的概念，在2020年就提出来了（<a href="https://legacy.reactjs.org/blog/2020/12/21/data-fetching-with-react-server-components.html">Introducing Zero-Bundle-Size React Server Components - React Blog</a>）。简单来说，原来的React的组件都是运行在客户端的。浏览器首先把项目代码下载下来，然后再浏览器中运行代码，这些代码将会通过浏览器端DOM API在浏览器上画出UI，并处理用户的交互。而React Server Component允许用户编写<strong>运行在服务器端的</strong>React组件。而Next.js 13第一次实现了这一概念。</p>
<p>这颠覆了传统的前端开发模式。代码在服务器端运行的，这就意味着组件可以直接执行在服务器端才能执行的代码，例如访问数据库等，而不再需要单独的一套API来实现客户端和服务器端之间的交互。</p>
<p>在新的博客中，所有博客的内容都是以本地文件的方式存放在<code>contents</code>目录下。所有的页面会去读取自己所需要的数据，之后将这些数据渲染出来。</p>
<p>假设我们的网页不是一个静态网站，而是一个传统的React+后端的模式，那要实现这个功能，我们首先需要设计一个API来获取后端的数据，在后端，我们编写一个服务器实现这个API，然后在前端，我们通过<code>fetch</code>调用这个API，拿到数据后在UI上渲染出来。</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="ts" data-theme="default"><code data-language="ts" data-theme="default"><span class="line"><span style="color:#7F848E;font-style:italic">// 后端，编写API</span></span>
<span class="line"><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">app</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">express</span><span style="color:#ABB2BF">();</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#E5C07B">app</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">get</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;/articles/:id&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#C678DD">async</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75;font-style:italic">req</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">res</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">content</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">await</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">readContent</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">req</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">params</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">);</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E5C07B">res</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">send</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">content</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF">});</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#E5C07B">app</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">listen</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">5000</span><span style="color:#ABB2BF">, () </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> {});</span></span></code></pre></div>
<div data-rehype-pretty-code-fragment=""><pre data-language="tsx" data-theme="default"><code data-language="tsx" data-theme="default"><span class="line"><span style="color:#7F848E;font-style:italic">// 前端，通过fetch API获取数据</span></span>
<span class="line"><span style="color:#C678DD">export</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">Page</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> ({ </span><span style="color:#E06C75;font-style:italic">id</span><span style="color:#ABB2BF"> }) </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> [</span><span style="color:#E5C07B">data</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">setData</span><span style="color:#ABB2BF">] </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">useState</span><span style="color:#ABB2BF">();</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">useEffect</span><span style="color:#ABB2BF">(() </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#61AFEF">fetch</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;http://localhost:5000/articles/&quot;</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">+</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">      .</span><span style="color:#61AFEF">then</span><span style="color:#ABB2BF">((</span><span style="color:#E06C75;font-style:italic">x</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">x</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">json</span><span style="color:#ABB2BF">())</span></span>
<span class="line"><span style="color:#ABB2BF">      .</span><span style="color:#61AFEF">then</span><span style="color:#ABB2BF">((</span><span style="color:#E06C75;font-style:italic">x</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">setData</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">x</span><span style="color:#ABB2BF">));</span></span>
<span class="line"><span style="color:#ABB2BF">  }, []);</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">data</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">?</span><span style="color:#ABB2BF"> (</span></span>
<span class="line"><span style="color:#ABB2BF">    &lt;</span><span style="color:#E5C07B">ArticleContent</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66;font-style:italic">data</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75">data</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF">/&gt;</span></span>
<span class="line"><span style="color:#ABB2BF">  ) </span><span style="color:#C678DD">:</span><span style="color:#ABB2BF"> &lt;</span><span style="color:#E5C07B">Loading</span><span style="color:#ABB2BF"> /&gt;;</span></span></code></pre></div>
<p>然后通过RSC，我们可以直接使用React来实现这个需求：</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="tsx" data-theme="default"><code data-language="tsx" data-theme="default"><span class="line"><span style="color:#C678DD">export</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">default</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">async</span><span style="color:#ABB2BF"> ({ </span><span style="color:#E06C75;font-style:italic">params</span><span style="color:#ABB2BF"> }: </span><span style="color:#E5C07B">Props</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">data</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">await</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">readContent</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">params</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">);</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF"> (</span></span>
<span class="line"><span style="color:#ABB2BF">    &lt;</span><span style="color:#E5C07B">ArticleContent</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66;font-style:italic">data</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75">data</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF">  );</span></span>
<span class="line"><span style="color:#ABB2BF">};</span></span></code></pre></div>
<p>这区别实在太大了。不再需要一个单独的后端项目，不再需要复杂的API设计、管理、调用、维护，从获取数据到渲染UI的过程非常直观。甚至说如果这个<code>ArticleContent</code>组件不需要用户交互的话，用户甚至不需要下载这个组件的代码，浏览器不启用JS就能访问网页。</p>
<p>从某种角度来说，App Router确实是把React变成了PHP这类传统的服务器端渲染的方案。但是，毕竟Web前端是JS的世界，PHP等不能直接使用后端语言编写前端的交互逻辑，只能做一些简单的模板替换的功能，一旦涉及一些复杂的逻辑和交互，就不能不重新使用JS，而这就要求两套不同的语言，两套不同的工具链以及两套不同的生态，以及前后端之间的交互。而Next.js是以前端为基础，用一种非常自然的方式将前后端融合在一起，用同一套生态编写从前端交互到后端逻辑整个链条，实际上是一套和传统完全不一样的方案。</p>
<ul>
<li><a href="https://nextjs.org/docs/app/building-your-application/routing/colocation#safe-colocation-by-default">Colocation</a>，即<strong>把相似用处的文件放在相近的位置</strong>。</li>
</ul>
<p>在原来的<code>pages</code>目录下，每个文件定义了一个页面。例如<code>/pages/test.tsx</code>和<code>/pages/test/test2.tsx</code>就分别对应<code>/test</code>和<code>/test/test2</code>两个路径。但是，在绝大多数情况下，一个页面中的代码都不能在一个代码中完全写完。对于一些公用的组件，例如布局的header, footer等，我们可以把这些代码放在类似<code>layouts</code>、<code>components</code>的目录下，这些组件不涉及任何业务逻辑，可由具体的业务页面引用并组装。</p>
<p><figure><img alt="现在博客下，会由多个页面使用的组件" loading="lazy" width="417" height="548" decoding="async" data-nimg="1" class="cursor-zoom-in mx-auto" style="color:transparent" srcSet="/articles/asset/contents/20230617-blog-updates-2/components.png?width=640 1x, /articles/asset/contents/20230617-blog-updates-2/components.png?width=1080 2x" src="/articles/asset/contents/20230617-blog-updates-2/components.png?width=1080"/><figcaption class="text-center">现在博客下，会由多个页面使用的组件</figcaption></figure></p>
<p>但是还有一些组件，它只在某个特定的页面下有用，例如为了完成某个特定的业务逻辑的组件。这种组件一般来说又是过于复杂，不能把它直接写在页面文件中，但是如果把这些组件直接放在页面组件文件的旁边，那么它们会被当成一个新的页面。</p>
<p>由于在原来的事件中，我会创建一个<code>pageComponents</code>目录用于存放这种位于真正的基础组件（<code>components</code>）和页面（<code>pages</code>）之间的组件。例如在下图中，<code>pageComponents/admin/AllUsersTable.tsx</code>就是一个比较复杂的、涉及到业务的组件，它只会在<code>pages/admin/users.tsx</code>中被使用。</p>
<p><figure><img alt="pageComponents" loading="lazy" width="802" height="367" decoding="async" data-nimg="1" class="cursor-zoom-in mx-auto" style="color:transparent" srcSet="/articles/asset/contents/20230617-blog-updates-2/pageComponents.png?width=828 1x, /articles/asset/contents/20230617-blog-updates-2/pageComponents.png?width=1920 2x" src="/articles/asset/contents/20230617-blog-updates-2/pageComponents.png?width=1920"/><figcaption class="text-center">pageComponents</figcaption></figure></p>
<p>除了这一方案，我也看到了一些项目采用的是和<code>Angular</code>类似的<code>Module</code>概念，把某个功能相关的代码都放在一个<code>modules/模块名</code>目录下，然后在<code>pages</code>目录下引用模块下的页面组件。</p>
<p>但是不管是什么方案，实际上都是在为<strong>一个文件=一个路径</strong>这一概念打补丁。这一概念看着很美好，但是只要项目复杂度稍微高一点就会遇到上述的问题。同一个功能，有的代码在<code>pages</code>下，有的在<code>pageComponents</code>下，这会使得文件非常混乱。</p>
<p>而<code>App Router</code>解决了这一个问题。在<code>App Router</code>下，路径由目录（而文件）定义。每个目录下，只有一些特殊的文件会被Next.js处理（例如<code>page.tsx</code>为这个页面的组件，<code>layout.tsx</code>为这个路径下的公共布局，其他文件Next.js直接忽略，都由自己组织。这就使得我们可以把一个页面所需要的组件拆分出来，放在和页面相同的目录下。</p>
<p>例如在现在的项目中，<code>app/articles/[[...params]]</code>包括了文章列表页面的定义，其中就需要一个文件列表页面的布局的组件<code>ArticleList</code>。这个组件很明显需要被拆分出来。在原来的实践中，这种组件就应该被放在<code>pageComponents</code>或者<code>components</code>里。但是这个组件实际上只会在这个路径下被使用，所以使用<code>App Router</code>后，我们就可以把这个组件放在这个页面的文件（<code>page.tsx</code>）的旁边。这样，我们保证了所有这个页面相关的业务逻辑（公共组件不包含业务逻辑）都存放在这个路径下，这对代码后续维护、多人合作开发等方面都有非常多的好处。</p>
<p><figure><img alt="现在博客下，文章列表页面布局" loading="lazy" width="350" height="234" decoding="async" data-nimg="1" class="cursor-zoom-in mx-auto" style="color:transparent" srcSet="/articles/asset/contents/20230617-blog-updates-2/articles-dir.png?width=384 1x, /articles/asset/contents/20230617-blog-updates-2/articles-dir.png?width=750 2x" src="/articles/asset/contents/20230617-blog-updates-2/articles-dir.png?width=750"/><figcaption class="text-center">现在博客下，文章列表页面布局</figcaption></figure></p>
<p>App Router所带来的优点远不止这两点。由于本博客是个静态的博客，且整体布局较为简单，所以并没有用上使用Next.js的动态功能，但是在我其他的项目中，App Router的<strong>嵌套布局</strong>（<a href="https://nextjs.org/docs/app/building-your-application/routing/pages-and-layouts#nesting-layouts">Nested Layout</a>）、Server Actions带来的<strong>直接在前端代码中调用后端逻辑的能力</strong>都极大地提高了网站开发的效率。</p>
<h2 id="nextjs静态生成"><a href="#nextjs静态生成" class="mr-2"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="inline-block" height="16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a>Next.js静态生成</h2>
<h3 id="静态网站"><a href="#静态网站" class="mr-2"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="inline-block" height="16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a>静态网站</h3>
<p>我之前使用Next.js的项目都是传统的前端应用，也就是编译为前端+一个提供服务器端渲染（SSR）能力的Express后端的传统的Next.js项目。但是Next.js一直还支持直接生成只包括HTML/CSS/JS的静态网站的能力。</p>
<p>传统的单页应用（SPA）会把整个应用编译为一个（或者多个）JS bundle以及一个实际上并不包含真正UI的模板HTML。用户访问任何路径时，都会下载这个HTML。这个HTML的唯一作用就是提供一个根DOM组件以及引用编译好的JS Bundle。JS Bundle将会被自动下载，通过浏览器的History API在浏览器端实现路由功能，并负责通过DOM API渲染用户的UI。</p>
<p><figure><img alt="vite build构建出的项目" loading="lazy" width="394" height="202" decoding="async" data-nimg="1" class="cursor-zoom-in mx-auto" style="color:transparent" srcSet="/articles/asset/contents/20230617-blog-updates-2/vite-build-output.png?width=640 1x, /articles/asset/contents/20230617-blog-updates-2/vite-build-output.png?width=828 2x" src="/articles/asset/contents/20230617-blog-updates-2/vite-build-output.png?width=828"/><figcaption class="text-center">vite build构建出的项目</figcaption></figure></p>
<p>而Next.js生成的静态网站和Gatsby, Hugo等静态网站生成器相同，会在编译时对每个路径获取这个路径所需要的数据，并将这些数据渲染成HTML。渲染出的结果中，每个路径都有对应的HTML。比如在下图中，<code>about/me.html</code>就对应了<code>/about/me</code>路径，并且其中包含了在服务器端渲染后的UI。用户访问路径时，会直接获取这个HTML，并直接就能渲染出已经渲染好的内容，无需等待下载和执行JS Bundle的过程。</p>
<p><figure><img alt="next build构建出的项目" loading="lazy" width="439" height="471" decoding="async" data-nimg="1" class="cursor-zoom-in mx-auto" style="color:transparent" srcSet="/articles/asset/contents/20230617-blog-updates-2/next-export-output.png?width=640 1x, /articles/asset/contents/20230617-blog-updates-2/next-export-output.png?width=1080 2x" src="/articles/asset/contents/20230617-blog-updates-2/next-export-output.png?width=1080"/><figcaption class="text-center">next build构建出的项目</figcaption></figure></p>
<h3 id="和gatsby的区别"><a href="#和gatsby的区别" class="mr-2"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="inline-block" height="16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a>和Gatsby的区别</h3>
<p>在我上次重写ddadaal.me时，我选用了Gatsby，因为当时Gatsby的生态更加的成熟，有大量现成的模板、插件和教程可供使用和参考。几年后的现在，Next.js的静态生成功能也是非常成熟了，并也提供了很多的API来实现静态网站渲染的功能。但是和Gatsby项目，Next.js提供静态网站渲染的API的思路有所不同。</p>
<p>Gatsby主要通过<code>GraphQL</code>让开发者访问数据(<a href="https://www.gatsbyjs.com/docs/graphql/">Gatsby and GraphQL</a>)。开发者在页面中可以声明这个页面所需要的数据的GraphQL查询，并在页面中通过props访问读取到的数据以及渲染UI。在编译时，gatsby将会负责运行这些查询，并将数据传递给需要数据的组件。而可以访问到的数据，则可以通过插件或者自定义<code>gatsby-node.ts</code>脚本来向后端的GraphQL服务器中增加数据节点。</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="ts" data-theme="default"><code data-language="ts" data-theme="default"><span class="line"><span style="color:#7F848E;font-style:italic">// https://github.com/ddadaal/ddadaal.me/blob/57fe926eb0/src/pages/slides.tsx</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">// 声明需要的数据</span></span>
<span class="line"><span style="color:#C678DD">export</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">query</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">graphql</span><span style="color:#98C379">`</span></span>
<span class="line"><span style="color:#98C379">  query Slides {</span></span>
<span class="line"><span style="color:#98C379">    allSlide(filter: {type: { eq: &quot;dir&quot; }}) {</span></span>
<span class="line"><span style="color:#98C379">      nodes {</span></span>
<span class="line"><span style="color:#98C379">        name</span></span>
<span class="line"><span style="color:#98C379">        html_url</span></span>
<span class="line"><span style="color:#98C379">        type</span></span>
<span class="line"><span style="color:#98C379">      }</span></span>
<span class="line"><span style="color:#98C379">    }</span></span>
<span class="line"><span style="color:#98C379">  }</span></span>
<span class="line"><span style="color:#98C379">`</span><span style="color:#ABB2BF">;</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#C678DD">interface</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">Props</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E06C75">data</span><span style="color:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">allSlide</span><span style="color:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#ABB2BF">      </span><span style="color:#E06C75">nodes</span><span style="color:#ABB2BF">: { </span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF">; </span><span style="color:#E06C75">html_url</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF"> }[];</span></span>
<span class="line"><span style="color:#ABB2BF">    };</span></span>
<span class="line"><span style="color:#ABB2BF">  };</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">Slides</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">React</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">FC</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">Props</span><span style="color:#ABB2BF">&gt; </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75;font-style:italic">props</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#7F848E;font-style:italic">// 通过Props读取获取到的数据</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">data</span><span style="color:#ABB2BF">: { </span><span style="color:#E06C75">allSlide</span><span style="color:#ABB2BF">: { </span><span style="color:#E5C07B">nodes</span><span style="color:#ABB2BF"> } } } </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">props</span><span style="color:#ABB2BF">;</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#7F848E;font-style:italic">// 使用这些数据渲染UI</span></span>
<span class="line"><span style="color:#ABB2BF">};</span></span></code></pre></div>
<p>当然，要想更灵活地访问数据和创建页面，开发者还可以通过<code>gatsby-node.ts</code>编写编译时在node端执行的脚本。这个脚本是在编译器在Node.js中运行的，故可以访问任何本地数据。Gatsby还提供了大量<a href="https://www.gatsbyjs.com/docs/reference/config-files/gatsby-node/">Gatsby Node API</a>来帮助用户创建页面、GraphQL数据等。</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="js" data-theme="default"><code data-language="js" data-theme="default"><span class="line"><span style="color:#61AFEF">createPage</span><span style="color:#ABB2BF">({</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#7F848E;font-style:italic">// 生成页面的路径</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E06C75">path</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;/articles/&quot;</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">+</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">pageIndex</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#7F848E;font-style:italic">// 页面所对应的React组件</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E06C75">component</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">indexTemplate</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#7F848E;font-style:italic">// 组件所需要的数据</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E06C75">context</span><span style="color:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">limit</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">pageSize</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">skip</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">pageIndex</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">pageSize</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">pageCount</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">pageIndex</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">pageIndex</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">ids</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">notIgnoredGroups</span></span>
<span class="line"><span style="color:#ABB2BF">      .</span><span style="color:#61AFEF">slice</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">pageIndex</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">pageSize</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">pageIndex</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">pageSize</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">+</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">pageSize</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">      .</span><span style="color:#61AFEF">map</span><span style="color:#ABB2BF">((</span><span style="color:#E06C75;font-style:italic">x</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">x</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">frontmatter</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">),</span></span>
<span class="line"><span style="color:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#ABB2BF">});</span></span></code></pre></div>
<p>总的来说，Gatsby通过GraphQL和Gatsby Node API将<strong>UI</strong>和<strong>数据</strong>完全隔离开来。用户定义各个页面所需要的数据类型，一方面编写脚本或者插件将各类数据源转换为GraphQL等页面需要的数据，另一方面编写React代码将这些数据渲染成UI。</p>
<p>而在当前使用App Router的Next.js项目中，获取数据以及渲染页面的方法有所不同。Next.js的路由一直是基于文件路径的，没有类似<code>Gatsby Node API</code>的API以及<code>gatsby-node.ts</code>的脚本可以用来手动创建各个页面。取而代之的，是</p>
<ul>
<li>通过文件路径定义路径</li>
<li>通过<code>generateStaticParams</code>函数获取所有可能的路径参数</li>
<li>通过RSC同时实现数据获取和渲染</li>
</ul>
<p>例如说，我的博客中<code>/about</code>路径下包含了<code>/about/me</code>、<code>/about/odyssey</code>和<code>/about/project</code>三个路径，分别对应3篇文章。要实现<code>/about</code>路径，我需要</p>
<ul>
<li>定义<code>app/about/[id]</code>目录</li>
<li>在<code>generateStaticParams</code>中，返回<code>id</code>参数的所有可能值<span data-rehype-pretty-code-fragment=""><code data-language="ts" data-theme="default"><span class="line"><span style="color:#ABB2BF">[</span><span style="color:#98C379">&quot;me&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">&quot;odyssey&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">&quot;project&quot;</span><span style="color:#ABB2BF">]</span></span></code></span></li>
<li>在<code>app/about/[id]/page.tsx</code>（实际上不是这个路径）中，定义一个RSC，获取到路径的ID的参数，之后获取到对应的文章内容，并同时根据文件内容渲染出UI</li>
</ul>
<p>可以看出，通过Next.js，我们不再需要GraphQL将数据和页面分割开来，而可以直接使用RSC同时完成读取数据和渲染UI的功能。通过<code>generateStaticParams</code>列举了所有可能的路径，然后对每个路径渲染它对应的RSC，生成了每个路径的页面，从而编译出了整个网页。</p>
<h2 id="自定义的markdown渲染流程"><a href="#自定义的markdown渲染流程" class="mr-2"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="inline-block" height="16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a>自定义的markdown渲染流程</h2>
<p>在之前使用Gatsby时，我直接使用了一些现成的gatsby插件（如<a href="https://www.gatsbyjs.com/plugins/gatsby-transformer-remark/"><code>gatsby-plugin-remark</code></a>）来帮助我完成把markdown渲染成HTML的过程，故我对markdown渲染的流程几乎没有了解。但是在Next.js中没有这些插件了，所以我就需要自己去学习markdown渲染的知识，并自己完成markdown渲染的工作。</p>
<p>当前，项目中是使用<code>remark</code>和<code>rehype</code>生态实现markdown的渲染的。<a href="https://github.com/remarkjs/remark"><code>remark</code></a>是一套把分析并转换markdown的生态，包含由大量插件。它可以分析markdown文件并将其转换为AST，并支持通过各类插件对这个AST进行分析和转换。而<a href="https://github.com/rehypejs/rehype"><code>rehype</code></a>类似<code>remark</code>，只不过<code>rehype</code>是针对HTML的。整个渲染流程可以通过<a href="https://unifiedjs.com/"><code>unifiedjs</code></a>连接起来。</p>
<p>现在，博客在渲染markdown时，经历了以下的步骤：</p>
<ul>
<li><a href="https://www.npmjs.com/package/remark-parse">remark-parse</a>: 把markdown转换为remark AST</li>
<li><a href="https://www.npmjs.com/package/remark-gfm">remark-gfm</a>: 以GitHub Flavored Markdown格式解析AST</li>
<li><a href="https://www.npmjs.com/package/remark-rehype">remark-rehype</a>: 将remark AST转换为rehype AST</li>
<li><a href="https://www.npmjs.com/package/rehype-raw">rehype-raw</a>: 使markdown中的裸HTML标签最后能正常显示</li>
<li><a href="https://github.com/rehypejs/rehype-slug">rehype-slug</a>: 给各个标题标签加上对应的id</li>
<li><a href="https://www.npmjs.com/package/@stefanprobst/rehype-extract-toc">@stefanprobst/rehype-extract-toc</a>: 分析HTML中的各个标题标签，并生成对应的树状结构</li>
<li><a href="https://github.com/rehypejs/rehype-react">rehype-react</a>: 根据rehype AST生成对应的React组件树</li>
<li><a href="https://rehype-pretty-code.netlify.app/">rehype-pretty-code</a>: 美化代码风格，增加代码高亮等</li>
</ul>
<p>了解了markdown的渲染过程给我带来了几个好处：</p>
<p>第一，我可以自己自定义渲染的流程了</p>
<p>之前，对于一些已有插件不支持的功能，我是通过一些比较hack的方式完成的。例如文章的Table of Contents，我是通过在渲染后通过DOM API分析页面中各个<code>h1/h2/h3</code>等元素来动态生成的。而现在，我可以自己去寻找可以解析TOC的插件（@stefanprobst/rehype-extract-toc），并将它插入到渲染的流程中，并在最后得到结果并自己完成渲染的过程。又比如，我想给渲染出的标题的前面增加一个图标，点击这个图标就获取到跳转到这个标题的URL。通过<code>rehype-react</code>，我可以很简单的实现这一点。</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="tsx" data-theme="default"><code data-language="tsx" data-theme="default"><span class="line"><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">use</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">rehypeReact</span><span style="color:#ABB2BF">, {</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#7F848E;font-style:italic">// ...</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E06C75">components</span><span style="color:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#7F848E;font-style:italic">// ...</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#7F848E;font-style:italic">// 使用自定义的React组件渲染h1/h2/h3组件</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">h1</span><span style="color:#ABB2BF">: ((</span><span style="color:#E06C75;font-style:italic">props</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> &lt;</span><span style="color:#E5C07B">HeadingWithLink</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66;font-style:italic">element</span><span style="color:#56B6C2">=</span><span style="color:#98C379">&quot;h1&quot;</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66;font-style:italic">props</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75">props</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF"> /&gt;) </span><span style="color:#C678DD">satisfies</span></span>
<span class="line"><span style="color:#ABB2BF">      </span><span style="color:#E06C75">ComponentType</span><span style="color:#56B6C2">&lt;</span><span style="color:#E5C07B">JSX</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">IntrinsicElements</span><span style="color:#ABB2BF">[</span><span style="color:#98C379">&quot;h1&quot;</span><span style="color:#ABB2BF">]</span><span style="color:#56B6C2">&gt;</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">h2</span><span style="color:#ABB2BF">: ((</span><span style="color:#E06C75;font-style:italic">props</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> &lt;</span><span style="color:#E5C07B">HeadingWithLink</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66;font-style:italic">element</span><span style="color:#56B6C2">=</span><span style="color:#98C379">&quot;h2&quot;</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66;font-style:italic">props</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75">props</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF"> /&gt;) </span><span style="color:#C678DD">satisfies</span></span>
<span class="line"><span style="color:#ABB2BF">      </span><span style="color:#E06C75">ComponentType</span><span style="color:#56B6C2">&lt;</span><span style="color:#E5C07B">JSX</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">IntrinsicElements</span><span style="color:#ABB2BF">[</span><span style="color:#98C379">&quot;h2&quot;</span><span style="color:#ABB2BF">]</span><span style="color:#56B6C2">&gt;</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">h3</span><span style="color:#ABB2BF">: ((</span><span style="color:#E06C75;font-style:italic">props</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> &lt;</span><span style="color:#E5C07B">HeadingWithLink</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66;font-style:italic">element</span><span style="color:#56B6C2">=</span><span style="color:#98C379">&quot;h3&quot;</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66;font-style:italic">props</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75">props</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF"> /&gt;) </span><span style="color:#C678DD">satisfies</span></span>
<span class="line"><span style="color:#ABB2BF">      </span><span style="color:#E06C75">ComponentType</span><span style="color:#56B6C2">&lt;</span><span style="color:#E5C07B">JSX</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">IntrinsicElements</span><span style="color:#ABB2BF">[</span><span style="color:#98C379">&quot;h3&quot;</span><span style="color:#ABB2BF">]</span><span style="color:#56B6C2">&gt;</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#ABB2BF">})</span></span></code></pre></div>
<p><figure><img alt="标题链接" loading="lazy" width="1094" height="357" decoding="async" data-nimg="1" class="cursor-zoom-in mx-auto" style="color:transparent" srcSet="/articles/asset/contents/20230617-blog-updates-2/md-heading-link.png?width=1200 1x, /articles/asset/contents/20230617-blog-updates-2/md-heading-link.png?width=3840 2x" src="/articles/asset/contents/20230617-blog-updates-2/md-heading-link.png?width=3840"/><figcaption class="text-center">标题链接</figcaption></figure></p>
<p>第二，我可以完全自己控制RSS的渲染过程了</p>
<p>之前我采用的是<a href="https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-plugin-feed"><code>gatsby-plugin-feed</code></a>插件，通过定义GraphQL以及一些自定义的参数来生成RSS流。由于当时无法控制markdown的渲染结果，所以在生成RSS的时候感觉非常不自然。另外这个插件还不支持在开发时运行，所以我在开发时不能测试RSS的编译结果。现在，我可以自己创建一个<code>app/rss.xml/route.ts</code>的Route Handler，并和渲染文章页面一样，手动创建RSS的信息，以及各篇文章在RSS中的渲染结果。</p>
<h2 id="静态生成图片"><a href="#静态生成图片" class="mr-2"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="inline-block" height="16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a>静态生成图片</h2>
<p>在编写整个网站的过程中，最大的挑战是<strong>如何生成博客内容所需要的图片</strong>。</p>
<p>在所有能查找到的使用Next.js编写博客网站的文章和项目中（如<a href="https://github.com/vercel/next.js/tree/canary/examples/blog-starter">Next.js官方blog-starter模板</a>），都是通过<a href="https://nextjs.org/docs/pages/building-your-application/optimizing/static-assets"><code>public</code>目录</a>来引用图片等静态文件的。在编译时，<code>public</code>目录下的文件将会直接复制到构建目录下，在部署后，这些文件将可以直接通过<code>/</code>访问。</p>
<p>但是这并不能满足我的需求。因为我的博客中，博客文章和图片都是放在<code>contents</code>下的同一个目录下的。而<code>contents</code>目录不能被公开访问。</p>
<p><figure><img alt="博客文章和图片存放在同一个目录下" loading="lazy" width="416" height="243" decoding="async" data-nimg="1" class="cursor-zoom-in mx-auto" style="color:transparent" srcSet="/articles/asset/contents/20230617-blog-updates-2/blog-article-dir.png?width=640 1x, /articles/asset/contents/20230617-blog-updates-2/blog-article-dir.png?width=1080 2x" src="/articles/asset/contents/20230617-blog-updates-2/blog-article-dir.png?width=1080"/><figcaption class="text-center">博客文章和图片存放在同一个目录下</figcaption></figure></p>
<div data-rehype-pretty-code-fragment=""><pre data-language="md" data-theme="default"><code data-language="md" data-theme="default"><span class="line"><span style="color:#7F848E;font-style:italic">&lt;!-- 在Markdown中通过和md文件的相对路径访问 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF">![</span><span style="color:#61AFEF">图片注释</span><span style="color:#ABB2BF">]</span><span style="color:#E06C75">(</span><span style="color:#C678DD;text-decoration:underline">./decompile.png</span><span style="color:#E06C75">)</span></span></code></pre></div>
<p>一个简单粗暴的解决方案是编写一个脚本，在编译后把所有静态文件从<code>contents</code>复制到<code>public</code>下，并在编译markdown时，修改所有的图片路径到编译后的路径中。但是这个做法也太不优雅了，有没有什么更好的、不需要自定义编译流程的方案呢？</p>
<p>答案是<a href="https://nextjs.org/docs/app/building-your-application/routing/router-handlers">Route Handler</a>。</p>
<p>Route Handler可以使开发者对某个路径编写自定义的处理逻辑。通过Route Handler，我可以定义一个专门用于获取静态文件的路径。我定义了一个<code>/articles/asset/[...path]</code>的route handler，当使用<code>GET</code>方法访问这个路径的时，handler将会去读取这个路径的对应的文件的内容，并以流的形式返回。Route handler同样支持<code>generateStaticParams</code>。通过这个方法，我遍历<code>contents</code>下的所有静态文件。这样，在编译时，Next.js将会把<code>contents</code>下所有文件的路径都传入这个Route Handler并运行，并将handler的结果（也就是文件内容）存放在<code>/articles/asset/contents/{文件相对于contents的路径}</code>下，发布后可以通过<code>/articles/asset/contents/{相对路径}</code>这个URL访问到图片。</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="ts" data-theme="default"><code data-language="ts" data-theme="default"><span class="line"><span style="color:#C678DD">export</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">async</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">function</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">GET</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">request</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">NextRequest</span><span style="color:#ABB2BF">, { </span><span style="color:#E06C75;font-style:italic">params</span><span style="color:#ABB2BF"> }: { </span><span style="color:#E06C75">params</span><span style="color:#ABB2BF">: { </span><span style="color:#E06C75">path</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF">[] }}) {</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">fullPath</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">params</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">path</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">join</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;/&quot;</span><span style="color:#ABB2BF">);</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">fileStat</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">await</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">stat</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">fullPath</span><span style="color:#ABB2BF">);</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#7F848E;font-style:italic">// 读取文件流并返回</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">stream</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">createReadStream</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">fullPath</span><span style="color:#ABB2BF">);</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#7F848E;font-style:italic">// @ts-ignore</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">new</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">NextResponse</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">Readable</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">toWeb</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">stream</span><span style="color:#ABB2BF">), {</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">headers</span><span style="color:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#ABB2BF">      </span><span style="color:#98C379">&quot;Content-Type&quot;</span><span style="color:#ABB2BF">: </span><span style="color:#61AFEF">lookup</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">fullPath</span><span style="color:#ABB2BF">) </span><span style="color:#56B6C2">??</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;application/octet-stream&quot;</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">      </span><span style="color:#98C379">&quot;Content-Length&quot;</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">fileStat</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">size</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">    },</span></span>
<span class="line"><span style="color:#ABB2BF">  });</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#C678DD">export</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">async</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">function</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">generateStaticParams</span><span style="color:#ABB2BF">() {</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#7F848E;font-style:italic">// 遍历所有路径</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">paths</span><span style="color:#ABB2BF">: { </span><span style="color:#E06C75">path</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF">[] }[] </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> [];</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">async</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">function</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">rec</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">dir</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF">[]) {</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">dirents</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">await</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">readdir</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">dir</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">join</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;/&quot;</span><span style="color:#ABB2BF">), { </span><span style="color:#E06C75">withFileTypes</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">true</span><span style="color:#ABB2BF"> });</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> (</span><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">dirent</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">of</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">dirents</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#ABB2BF">      </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">dirent</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">isDirectory</span><span style="color:#ABB2BF">()) {</span></span>
<span class="line"><span style="color:#ABB2BF">        </span><span style="color:#C678DD">await</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">rec</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">dir</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">concat</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">dirent</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">));</span></span>
<span class="line"><span style="color:#ABB2BF">        </span><span style="color:#C678DD">continue</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">      }</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ABB2BF">      </span><span style="color:#E5C07B">paths</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">push</span><span style="color:#ABB2BF">({ </span><span style="color:#E06C75">path</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">dir</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">concat</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">dirent</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">) });</span></span>
<span class="line"><span style="color:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF">  }</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">await</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">rec</span><span style="color:#ABB2BF">([</span><span style="color:#98C379">&quot;contents&quot;</span><span style="color:#ABB2BF">]);</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">paths</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span></code></pre></div>
<p><figure><img alt="编译后的articles/asset路径，包含有所有的静态文件" loading="lazy" width="469" height="764" decoding="async" data-nimg="1" class="cursor-zoom-in mx-auto" style="color:transparent" srcSet="/articles/asset/contents/20230617-blog-updates-2/articles-assets.png?width=640 1x, /articles/asset/contents/20230617-blog-updates-2/articles-assets.png?width=1080 2x" src="/articles/asset/contents/20230617-blog-updates-2/articles-assets.png?width=1080"/><figcaption class="text-center">编译后的articles/asset路径，包含有所有的静态文件</figcaption></figure></p>
<p>现在图片有了，下一步是将markdown中对图片的引用地址修改到真实的编译后的地址。这实际上很简单，通过<code>rehype-react</code>将HTML的<code>&lt;img&gt;</code>使用自己的组件渲染，然后在自己的组件中把<code>src</code>属性修改为真正的图片路径即可。</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="tsx" data-theme="default"><code data-language="tsx" data-theme="default"><span class="line"><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">use</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">rehypeReact</span><span style="color:#ABB2BF">, {</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#7F848E;font-style:italic">// ..</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E06C75">components</span><span style="color:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#7F848E;font-style:italic">// 使用自己的Image组件渲染HTML中的&lt;img&gt;</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">img</span><span style="color:#ABB2BF">: ((</span><span style="color:#E06C75;font-style:italic">props</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> &lt;</span><span style="color:#E5C07B">ArticleImageServer</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66;font-style:italic">article</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75">article</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66;font-style:italic">props</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75">props</span><span style="color:#C678DD">}</span><span style="color:#ABB2BF"> /&gt;) </span><span style="color:#C678DD">satisfies</span></span>
<span class="line"><span style="color:#ABB2BF">      </span><span style="color:#E06C75">ComponentType</span><span style="color:#56B6C2">&lt;</span><span style="color:#E5C07B">JSX</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">IntrinsicElements</span><span style="color:#ABB2BF">[</span><span style="color:#98C379">&quot;img&quot;</span><span style="color:#ABB2BF">]</span><span style="color:#56B6C2">&gt;</span><span style="color:#ABB2BF">,</span></span></code></pre></div>
<p>我们使用了Next.js自带的<code>&lt;Image&gt;</code>组件来显示图片（在<code>ArticleImage</code>中）。这个组件有很多友好的功能，例如通过指定图片大小防止Layout Shift，在支持的环境下支持先加载更小的图片以更快的显示界面等。通过把<code>&lt;Image&gt;</code>和自定义的markdown流程相结合，我们就实现了显示图片的需求。</p>
<h2 id="多主题"><a href="#多主题" class="mr-2"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="inline-block" height="16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a>多主题</h2>
<p>本次更新在样式方面最大的可见的更新就是支持了<strong>多主题</strong>。目前网站已经开放了12个主题可供选择，当然，我的美学能力远远不够自己设计这么多的主题，所有主题都是由<a href="https://daisyui.com/docs/themes/">daisyui提供的</a>。</p>
<p>daisyui首先定义了一些固定的<a href="https://daisyui.com/docs/colors/#-2">颜色变量</a>，这样在编码时，所有元素的颜色都可以通过颜色变量，而不是写死的颜色值，来指定。例如下面的代码就指定了一个背景颜色为<code>base-200</code>、文本颜色为<code>text-content</code>的<code>ul</code>组件。</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="tsx" data-theme="default"><code data-language="tsx" data-theme="default"><span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#E06C75">ul</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66;font-style:italic">className</span><span style="color:#56B6C2">=</span><span style="color:#98C379">&quot;bg-base-200 text-base-content&quot;</span><span style="color:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF">&lt;/</span><span style="color:#E06C75">ul</span><span style="color:#ABB2BF">&gt;</span></span></code></pre></div>
<p>之后，daisyui通过识别<code>&lt;html&gt;</code>组件的<code>data-theme</code>数据属性来获取到当前用户所选择的主题，并通过CSS选择器将对应的颜色的CSS变量修改为对应的主题的对应颜色变量的值。要想切换主题，只需要修改<code>&lt;html&gt;</code>组件的<code>data-theme</code>数据属性即可。</p>
<p><figure><img alt="data-theme" loading="lazy" width="1164" height="702" decoding="async" data-nimg="1" class="cursor-zoom-in mx-auto" style="color:transparent" srcSet="/articles/asset/contents/20230617-blog-updates-2/daisyui-data-theme.png?width=1200 1x, /articles/asset/contents/20230617-blog-updates-2/daisyui-data-theme.png?width=3840 2x" src="/articles/asset/contents/20230617-blog-updates-2/daisyui-data-theme.png?width=3840"/><figcaption class="text-center">data-theme</figcaption></figure></p>
<p>由于各个主题的颜色风格大相径庭，我原来博客的代码背景就不可以使用了。新的主页背景必须得能够自适应完全不同的颜色风格。要想实现这一点，新的背景必须是使用CSS动态生成的。</p>
<p>于是我在网上找到了一个<a href="https://alvarotrigo.com/blog/animated-backgrounds-css">绝妙的网站</a>，这个页面中提供了数十种纯用CSS实现的背景动画。我选中了其中的第三个Floating Squares。这个动画的背景色、以及各个方块的颜色都是由CSS的定义的，我需要做的，就是把其中的基础颜色替换为当前所使用的主题的CSS变量，这样，新的背景就能自动和当前所使用的主题相匹配了。</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="css" data-theme="default"><code data-language="css" data-theme="default"><span class="line"><span style="color:#D19A66">.area</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#7F848E;font-style:italic">/* 使用daisyui的颜色变量 */</span></span>
<span class="line"><span style="color:#ABB2BF">  background: </span><span style="color:#56B6C2">linear-gradient</span><span style="color:#ABB2BF">(to </span><span style="color:#D19A66">bottom</span><span style="color:#ABB2BF">, </span><span style="color:#56B6C2">hsl</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">var</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">--p</span><span style="color:#ABB2BF">)), </span><span style="color:#56B6C2">hsl</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">var</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">--pf</span><span style="color:#ABB2BF">)));</span></span>
<span class="line"><span style="color:#ABB2BF">  width: </span><span style="color:#D19A66">100</span><span style="color:#E06C75">%</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">  height: </span><span style="color:#D19A66">100</span><span style="color:#E06C75">vh</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#D19A66">.circles</span><span style="color:#C678DD"> </span><span style="color:#E06C75">li</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF">  position: </span><span style="color:#D19A66">absolute</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">  display: </span><span style="color:#D19A66">block</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">  list-style: </span><span style="color:#D19A66">none</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">  width: </span><span style="color:#D19A66">20</span><span style="color:#E06C75">px</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">  height: </span><span style="color:#D19A66">20</span><span style="color:#E06C75">px</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#7F848E;font-style:italic">/* 使用daisyui的颜色变量 */</span></span>
<span class="line"><span style="color:#ABB2BF">  background: </span><span style="color:#56B6C2">hsl</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">var</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">--a</span><span style="color:#ABB2BF">));</span></span>
<span class="line"><span style="color:#ABB2BF">  animation: animate </span><span style="color:#D19A66">25</span><span style="color:#E06C75">s</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">linear</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">infinite</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">  bottom: </span><span style="color:#D19A66">-150</span><span style="color:#E06C75">px</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span></code></pre></div>
<h1 id="总结"><a href="#总结" class="mr-2"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="inline-block" height="16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></a>总结</h1>
<p>本来我一开始并没有打算完全重写整个项目，而是打算在已有的代码上做一些小修小补。但是当我真的打开了代码开始准备修改时，就发现了原来的代码中各个组件之间的依赖像是形成了蜘蛛网一样，完全无法下手。随便改任何一处已有的代码，都会涉及到巨量的其他代码，可谓牵一发而动全身。想起来2018年开始写Gatsby的ddadaal.me的时候，一大驱动力就是原有的屎山实在无法维护了。而5年后，当年的新代码变成了新的屎山，而被更新的代码取代之。果然，和世间其他万物一样，技术在发展，代码也是常用常新，需要不停地跟上时代的步伐。重写后的博客功能和以往一致，但是更轻、更快、更易维护，也算是一次成功的重构实践。</p></div><div class="hidden lg:block lg:w-[25%]"><div class="px-1 sticky top-24 max-h-[60vh] overflow-auto"><div class="flex space-x-1 items-center py-2"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z"></path></svg><span>目录</span></div><ul class="pl-2 border-l border-neutral"><li class="w-full text-sm"><a class="transition hover:bg-base-300 rounded w-full flex p-1" data-tocid="鸽了4年的更新" href="#鸽了4年的更新">鸽了4年的更新</a></li><li class="w-full text-sm"><a class="transition hover:bg-base-300 rounded w-full flex p-1" data-tocid="新博客的亮点" href="#新博客的亮点">新博客的亮点</a></li><li class="w-full text-sm"><a class="transition hover:bg-base-300 rounded w-full flex p-1" data-tocid="实现" href="#实现">实现</a><ul class="pl-2 border-l border-neutral"><li class="w-full text-sm"><a class="transition hover:bg-base-300 rounded w-full flex p-1" data-tocid="完全采用nextjs-app-router" href="#完全采用nextjs-app-router">完全采用Next.js App Router</a></li><li class="w-full text-sm"><a class="transition hover:bg-base-300 rounded w-full flex p-1" data-tocid="nextjs静态生成" href="#nextjs静态生成">Next.js静态生成</a><ul class="pl-2 border-l border-neutral"><li class="w-full text-sm"><a class="transition hover:bg-base-300 rounded w-full flex p-1" data-tocid="静态网站" href="#静态网站">静态网站</a></li><li class="w-full text-sm"><a class="transition hover:bg-base-300 rounded w-full flex p-1" data-tocid="和gatsby的区别" href="#和gatsby的区别">和Gatsby的区别</a></li></ul></li><li class="w-full text-sm"><a class="transition hover:bg-base-300 rounded w-full flex p-1" data-tocid="自定义的markdown渲染流程" href="#自定义的markdown渲染流程">自定义的markdown渲染流程</a></li><li class="w-full text-sm"><a class="transition hover:bg-base-300 rounded w-full flex p-1" data-tocid="静态生成图片" href="#静态生成图片">静态生成图片</a></li><li class="w-full text-sm"><a class="transition hover:bg-base-300 rounded w-full flex p-1" data-tocid="多主题" href="#多主题">多主题</a></li></ul></li><li class="w-full text-sm"><a class="transition hover:bg-base-300 rounded w-full flex p-1" data-tocid="总结" href="#总结">总结</a></li></ul></div></div></div></div><div class="max-w-7xl mx-auto p-4"><div><h2 class="text-2xl font-bold mb-2 flex items-center"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"></path></svg><span class="mx-2">相关文章</span></h2><div class="flex flex-wrap gap-2"><div class="card w-96 bg-base-100 shadow-lg hover:shadow-xl transition"><div class="card-body"><span class="text-sm">2019-09-26 21:46:00 UTC+8</span><a href="/articles/blog-updates-1/cn"><h2 class="card-title">博客的发展一：RSS，国内托管……</h2></a><p>
# 前言

不知不觉，Gatsby博客已经上线了一年多。在这一年中，虽然从表面看起来博客变化不大，但是我一直在对博客做一些更新工作。特别是最近一个月，我对博客一些耽搁已久的问题进行了解决，使整个博客</p></div></div></div></div></div><div class="max-w-7xl mx-auto p-4"><div><h2 class="text-2xl font-bold mb-2 flex items-center"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 576 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"></path></svg><span class="mx-2"> 评论</span></h2></div></div></div></article></div><footer class="bg-base-200 text-base-content"><div class="footer py-6 max-w-7xl mx-auto px-4"><div class="space-y-1"><p>👨🏼‍💻 <!-- -->本网站由<a class="link link-hover" href="/about/me/cn">ddadaal</a>自豪地编写</p><p>📝<!-- -->本站文章在<a rel="licene noreferrer" target="_blank" class="link" href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>协议下授权</p><div class="tooltip" data-tip="2018-11-17 06:51:00 UTC+0"><p>📅 <!-- -->博客已经运行 <span class="countdown"><span style="--value:4"></span></span> 年 <span class="countdown"><span style="--value:7"></span></span> 月 <span class="countdown"><span style="--value:6"></span></span> 天 <span class="countdown"><span style="--value:4"></span></span> 时 <span class="countdown"><span style="--value:20"></span></span> 分 <span class="countdown"><span style="--value:46"></span></span> 秒</p></div><p>⏲️ <!-- -->最后更新<!-- -->:  <!-- -->2023-06-20 11:11:46 UTC+0</p><div><p>📲 <!-- -->联系我</p><div class="flex py-2 gap-2"><span><a href="http://wpa.qq.com/msgrd?v=3&amp;uin=540232834&amp;site=qq&amp;menu=yes" title="QQ: 540232834" target="_blank" class="block transition hover:scale-125" rel="noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="22.400000000000002" width="22.400000000000002" xmlns="http://www.w3.org/2000/svg"><path d="M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741 0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792 0 0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704z"></path></svg></a></span><span><a href="mailto://ddadaal.me@outlook.com" title="E-mail: ddadaal@outlook.com" target="_blank" class="block transition hover:scale-125" rel="noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 576 512" height="22.400000000000002" width="22.400000000000002" xmlns="http://www.w3.org/2000/svg"><path d="M160 448c-25.6 0-51.2-22.4-64-32-64-44.8-83.2-60.8-96-70.4V480c0 17.67 14.33 32 32 32h256c17.67 0 32-14.33 32-32V345.6c-12.8 9.6-32 25.6-96 70.4-12.8 9.6-38.4 32-64 32zm128-192H32c-17.67 0-32 14.33-32 32v16c25.6 19.2 22.4 19.2 115.2 86.4 9.6 6.4 28.8 25.6 44.8 25.6s35.2-19.2 44.8-22.4c92.8-67.2 89.6-67.2 115.2-86.4V288c0-17.67-14.33-32-32-32zm256-96H224c-17.67 0-32 14.33-32 32v32h96c33.21 0 60.59 25.42 63.71 57.82l.29-.22V416h192c17.67 0 32-14.33 32-32V192c0-17.67-14.33-32-32-32zm-32 128h-64v-64h64v64zm-352-96c0-35.29 28.71-64 64-64h224V32c0-17.67-14.33-32-32-32H96C78.33 0 64 14.33 64 32v192h96v-32z"></path></svg></a></span><span><a href="https://www.linkedin.com/in/chenjunda/" title="LinkedIn: 陈俊达" target="_blank" class="block transition hover:scale-125" rel="noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="22.400000000000002" width="22.400000000000002" xmlns="http://www.w3.org/2000/svg"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a></span><span><a href="https://github.com/ddadaal" title="GitHub: ddadaal" target="_blank" class="block transition hover:scale-125" rel="noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="22.400000000000002" width="22.400000000000002" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></span><span><a href="https://steamcommunity.com/profiles/76561198104889782" title="Steam: Victor Crubs" target="_blank" class="block transition hover:scale-125" rel="noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="22.400000000000002" width="22.400000000000002" xmlns="http://www.w3.org/2000/svg"><path d="M496 256c0 137-111.2 248-248.4 248-113.8 0-209.6-76.3-239-180.4l95.2 39.3c6.4 32.1 34.9 56.4 68.9 56.4 39.2 0 71.9-32.4 70.2-73.5l84.5-60.2c52.1 1.3 95.8-40.9 95.8-93.5 0-51.6-42-93.5-93.7-93.5s-93.7 42-93.7 93.5v1.2L176.6 279c-15.5-.9-30.7 3.4-43.5 12.1L0 236.1C10.2 108.4 117.1 8 247.6 8 384.8 8 496 119 496 256zM155.7 384.3l-30.5-12.6a52.79 52.79 0 0 0 27.2 25.8c26.9 11.2 57.8-1.6 69-28.4 5.4-13 5.5-27.3.1-40.3-5.4-13-15.5-23.2-28.5-28.6-12.9-5.4-26.7-5.2-38.9-.6l31.5 13c19.8 8.2 29.2 30.9 20.9 50.7-8.3 19.9-31 29.2-50.8 21zm173.8-129.9c-34.4 0-62.4-28-62.4-62.3s28-62.3 62.4-62.3 62.4 28 62.4 62.3-27.9 62.3-62.4 62.3zm.1-15.6c25.9 0 46.9-21 46.9-46.8 0-25.9-21-46.8-46.9-46.8s-46.9 21-46.9 46.8c.1 25.8 21.1 46.8 46.9 46.8z"></path></svg></a></span><span><a href="https://zhihu.com/people/VicCrubs" title="知乎：陈俊达" target="_blank" class="block transition hover:scale-125" rel="noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 640 512" height="22.400000000000002" width="22.400000000000002" xmlns="http://www.w3.org/2000/svg"><path d="M170.54 148.13v217.54l23.43.01 7.71 26.37 42.01-26.37h49.53V148.13H170.54zm97.75 193.93h-27.94l-27.9 17.51-5.08-17.47-11.9-.04V171.75h72.82v170.31zm-118.46-94.39H97.5c1.74-27.1 2.2-51.59 2.2-73.46h51.16s1.97-22.56-8.58-22.31h-88.5c3.49-13.12 7.87-26.66 13.12-40.67 0 0-24.07 0-32.27 21.57-3.39 8.9-13.21 43.14-30.7 78.12 5.89-.64 25.37-1.18 36.84-22.21 2.11-5.89 2.51-6.66 5.14-14.53h28.87c0 10.5-1.2 66.88-1.68 73.44H20.83c-11.74 0-15.56 23.62-15.56 23.62h65.58C66.45 321.1 42.83 363.12 0 396.34c20.49 5.85 40.91-.93 51-9.9 0 0 22.98-20.9 35.59-69.25l53.96 64.94s7.91-26.89-1.24-39.99c-7.58-8.92-28.06-33.06-36.79-41.81L87.9 311.95c4.36-13.98 6.99-27.55 7.87-40.67h61.65s-.09-23.62-7.59-23.62v.01zm412.02-1.6c20.83-25.64 44.98-58.57 44.98-58.57s-18.65-14.8-27.38-4.06c-6 8.15-36.83 48.2-36.83 48.2l19.23 14.43zm-150.09-59.09c-9.01-8.25-25.91 2.13-25.91 2.13s39.52 55.04 41.12 57.45l19.46-13.73s-25.67-37.61-34.66-45.86h-.01zM640 258.35c-19.78 0-130.91.93-131.06.93v-101c4.81 0 12.42-.4 22.85-1.2 40.88-2.41 70.13-4 87.77-4.81 0 0 12.22-27.19-.59-33.44-3.07-1.18-23.17 4.58-23.17 4.58s-165.22 16.49-232.36 18.05c1.6 8.82 7.62 17.08 15.78 19.55 13.31 3.48 22.69 1.7 49.15.89 24.83-1.6 43.68-2.43 56.51-2.43v99.81H351.41s2.82 22.31 25.51 22.85h107.94v70.92c0 13.97-11.19 21.99-24.48 21.12-14.08.11-26.08-1.15-41.69-1.81 1.99 3.97 6.33 14.39 19.31 21.84 9.88 4.81 16.17 6.57 26.02 6.57 29.56 0 45.67-17.28 44.89-45.31v-73.32h122.36c9.68 0 8.7-23.78 8.7-23.78l.03-.01z"></path></svg></a></span><span><a href="https://www.douban.com/people/183064260/" title="豆瓣: ddadaal" target="_blank" class="block transition hover:scale-125" rel="noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" height="22.400000000000002" width="22.400000000000002" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M.51 3.06h22.98V.755H.51V3.06Zm20.976 2.537v9.608h-2.137l-1.669 5.76H24v2.28H0v-2.28h6.32l-1.67-5.76H2.515V5.597h18.972Zm-5.066 9.608H7.58l1.67 5.76h5.501l1.67-5.76ZM18.367 7.9H5.634v5.025h12.733V7.9Z"></path></svg></a></span></div></div><p class="text-center">© <!-- -->2023<!-- --> | <!-- -->用 ❤ 制作</p></div><div><span class="footer-title">🚀 <!-- -->强力驱动</span><a class="link link-hover" target="_blank" href="https://reactjs.org/" rel="noreferrer">React</a><a class="link link-hover" target="_blank" href="https://www.gatsbyjs.org/" rel="noreferrer">Next.js</a><a class="link link-hover" target="_blank" href="https://pages.github.com/" rel="noreferrer">GitHub Pages</a><a class="link link-hover" target="_blank" href="https://www.typescriptlang.org/" rel="noreferrer">TypeScript</a></div><div><span class="footer-title">🎨 <!-- -->描绘主题</span><a class="link link-hover" target="_blank" href="https://reactstrap.github.io/" rel="noreferrer">daisyui</a><a class="link link-hover" target="_blank" href="https://bootswatch.com/flatly/" rel="noreferrer">tailwind</a></div><div><span class="footer-title">🎓 <!-- -->联系我</span><a class="link link-hover" target="_blank" href="https://idealclover.top" rel="noreferrer">idealclover - 翠翠酱的个人网站</a><a class="link link-hover" target="_blank" href="https://sephidator.xyz" rel="noreferrer">Sephidator - Sephidator的个人博客</a><a class="link link-hover" target="_blank" href="https://iznauy.github.io/" rel="noreferrer">iznauy - 个人博客</a><a class="link link-hover" target="_blank" href="https://aironoria.github.io" rel="noreferrer">Aironoria - 陈俊宇的个人博客</a><a class="link link-hover" target="_blank" href="https://jbesu.com/" rel="noreferrer">forewing - 个人主页</a><a class="link link-hover" target="_blank" href="https://weiser.fun" rel="noreferrer">Weiser - 个人主页</a></div></div></footer><button class="fixed animate-slide-up bottom-8 right-8 z-50 p-3 rounded-full bg-base-300 text-base-content shadow" title="To top"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="w-6 h-6" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"></path></svg></button><script src="/_next/static/chunks/webpack-422681059ce1bbb0.js" async=""></script><script src="/_next/static/chunks/9fed808d-e78957d8c5984610.js" async=""></script><script src="/_next/static/chunks/890-94a61a8610c2280b.js" async=""></script><script src="/_next/static/chunks/main-app-bca969b2b4dec788.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/c495959718e63cb3.css\",{\"as\":\"style\"}]\n0:\"$L2\"\n"])</script><script>self.__next_f.push([1,"3:HL[\"/_next/static/css/46035642466e2fae.css\",{\"as\":\"style\"}]\n4:HL[\"/_next/static/css/550cc6711c036586.css\",{\"as\":\"style\"}]\n"])</script><script>self.__next_f.push([1,"5:I{\"id\":\"7335\",\"chunks\":[\"272:static/chunks/webpack-422681059ce1bbb0.js\",\"159:static/chunks/9fed808d-e78957d8c5984610.js\",\"890:static/chunks/890-94a61a8610c2280b.js\"],\"name\":\"\",\"async\":false}\n7:I{\"id\":\"5\",\"chunks\":[\"272:static/chunks/webpack-422681059ce1bbb0.js\",\"159:static/chunks/9fed808d-e78957d8c5984610.js\",\"890:static/chunks/890-94a61a8610c2280b.js\"],\"name\":\"\",\"async\":false}\n2:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/c495959718e63cb3.css\",\"precedence\":\"next\"}]],[\"$\",\"$L5\",null,{\""])</script><script>self.__next_f.push([1,"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/articles/blog-updates-2/cn\",\"initialTree\":[\"\",{\"children\":[\"articles\",{\"children\":[[\"params\",\"blog-updates-2/cn\",\"oc\"],{\"children\":[\"__PAGE__?{\\\"params\\\":[\\\"blog-updates-2\\\",\\\"cn\\\"]}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":[\"$L6\",null],\"globalErrorComponent\":\"$7\",\"notFound\":\"$L8\",\"asNotFound\":false,\"children\":[\"$L9\",null]}]]\n"])</script><script>self.__next_f.push([1,"a:I{\"id\":\"686\",\"chunks\":[\"309:static/chunks/70bb1395-d6354d9eb02b5992.js\",\"813:static/chunks/813-cf37a3c39e380b56.js\",\"647:static/chunks/647-5e2b1bd38dd79bde.js\",\"259:static/chunks/259-720be5e4afdbae27.js\",\"185:static/chunks/app/layout-e02f5ce538a58300.js\"],\"name\":\"RootLayout\",\"async\":false}\nb:I{\"id\":\"1895\",\"chunks\":[\"309:static/chunks/70bb1395-d6354d9eb02b5992.js\",\"813:static/chunks/813-cf37a3c39e380b56.js\",\"647:static/chunks/647-5e2b1bd38dd79bde.js\",\"259:static/chunks/259-720be5e4afdbae27.js\",\"185:static/"])</script><script>self.__next_f.push([1,"chunks/app/layout-e02f5ce538a58300.js\"],\"name\":\"Header\",\"async\":false}\nc:I{\"id\":\"9311\",\"chunks\":[\"272:static/chunks/webpack-422681059ce1bbb0.js\",\"159:static/chunks/9fed808d-e78957d8c5984610.js\",\"890:static/chunks/890-94a61a8610c2280b.js\"],\"name\":\"\",\"async\":false}\nd:I{\"id\":\"6467\",\"chunks\":[\"272:static/chunks/webpack-422681059ce1bbb0.js\",\"159:static/chunks/9fed808d-e78957d8c5984610.js\",\"890:static/chunks/890-94a61a8610c2280b.js\"],\"name\":\"\",\"async\":false}\nf:I{\"id\":\"5707\",\"chunks\":[\"309:static/chunks/70bb1395-d"])</script><script>self.__next_f.push([1,"6354d9eb02b5992.js\",\"975:static/chunks/dc6764d5-acd07a2e286ee329.js\",\"344:static/chunks/2e69a9b8-691073cd158eaece.js\",\"301:static/chunks/8a8c2739-bbbebd44388102d4.js\",\"813:static/chunks/813-cf37a3c39e380b56.js\",\"647:static/chunks/647-5e2b1bd38dd79bde.js\",\"861:static/chunks/861-50e3e01387b52bfc.js\",\"94:static/chunks/app/about/[id]/[[...lang]]/page-a09d09b63b5b9ec6.js\"],\"name\":\"Localized\",\"async\":false}\n10:I{\"id\":\"4375\",\"chunks\":[\"309:static/chunks/70bb1395-d6354d9eb02b5992.js\",\"975:static/chunks/dc6764d5-acd"])</script><script>self.__next_f.push([1,"07a2e286ee329.js\",\"344:static/chunks/2e69a9b8-691073cd158eaece.js\",\"301:static/chunks/8a8c2739-bbbebd44388102d4.js\",\"813:static/chunks/813-cf37a3c39e380b56.js\",\"647:static/chunks/647-5e2b1bd38dd79bde.js\",\"861:static/chunks/861-50e3e01387b52bfc.js\",\"94:static/chunks/app/about/[id]/[[...lang]]/page-a09d09b63b5b9ec6.js\"],\"name\":\"LocalizedArticleLink\",\"async\":false}\n11:I{\"id\":\"5298\",\"chunks\":[\"309:static/chunks/70bb1395-d6354d9eb02b5992.js\",\"813:static/chunks/813-cf37a3c39e380b56.js\",\"647:static/chunks/647-5e2b"])</script><script>self.__next_f.push([1,"1bd38dd79bde.js\",\"259:static/chunks/259-720be5e4afdbae27.js\",\"185:static/chunks/app/layout-e02f5ce538a58300.js\"],\"name\":\"RunningTime\",\"async\":false}\n12:I{\"id\":\"4926\",\"chunks\":[\"309:static/chunks/70bb1395-d6354d9eb02b5992.js\",\"813:static/chunks/813-cf37a3c39e380b56.js\",\"647:static/chunks/647-5e2b1bd38dd79bde.js\",\"259:static/chunks/259-720be5e4afdbae27.js\",\"185:static/chunks/app/layout-e02f5ce538a58300.js\"],\"name\":\"LastUpdateTime\",\"async\":false}\n13:I{\"id\":\"9031\",\"chunks\":[\"309:static/chunks/70bb1395-d6354d9eb"])</script><script>self.__next_f.push([1,"02b5992.js\",\"813:static/chunks/813-cf37a3c39e380b56.js\",\"647:static/chunks/647-5e2b1bd38dd79bde.js\",\"259:static/chunks/259-720be5e4afdbae27.js\",\"185:static/chunks/app/layout-e02f5ce538a58300.js\"],\"name\":\"ToTop\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"9:[\"$\",\"$La\",null,{\"children\":[[\"$\",\"$Lb\",null,{\"resumeLangs\":[\"cn\",\"en\"]}],[\"$\",\"div\",null,{\"children\":[\"$\",\"$Lc\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Ld\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$Lc\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"articles\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Ld\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$Lc\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"articles\",\"children\",[\"params\",\"blog-updates-2/cn\",\"oc\"],\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Ld\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$Le\",null],\"segment\":\"__PAGE__?{\\\"params\\\":[\\\"blog-updates-2\\\",\\\"cn\\\"]}\"},\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/46035642466e2fae.css\",\"precedence\":\"next\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/550cc6711c036586.css\",\"precedence\":\"next\"}]]}],\"segment\":[\"params\",\"blog-updates-2/cn\",\"oc\"]},\"styles\":[]}],\"segment\":\"articles\"},\"styles\":[]}]}],[\"$\",\"footer\",null,{\"className\":\"bg-base-200 text-base-content\",\"children\":[\"$\",\"div\",null,{\"className\":\"footer py-6 max-w-7xl mx-auto px-4\",\"children\":[[\"$\",\"div\",null,{\"className\":\"space-y-1\",\"children\":[[\"$\",\"p\",null,{\"children\":[\"👨🏼‍💻 \",[\"$\",\"$Lf\",null,{\"id\":\"footer.codeBy\",\"args\":[[\"$\",\"$L10\",\"about/me\",{\"className\":\"link link-hover\",\"basePath\":\"/about/me\",\"children\":\"ddadaal\"}]]}]]}],[\"$\",\"p\",null,{\"children\":[\"📝\",[\"$\",\"$Lf\",null,{\"id\":\"footer.license\",\"args\":[[\"$\",\"a\",\"license\",{\"rel\":\"licene noreferrer\",\"target\":\"_blank\",\"className\":\"link\",\"href\":\"https://creativecommons.org/licenses/by-sa/4.0/\",\"children\":\"CC BY-SA 4.0\"}]]}]]}],[\"$\",\"$L11\",null,{\"serverStartTime\":\"2023-06-20T11:11:46.546+00:00\"}],[\"$\",\"$L12\",null,{\"time\":\"2023-06-20T11:11:46.546+00:00\"}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"p\",null,{\"children\":[\"📲 \",[\"$\",\"$Lf\",null,{\"id\":\"footer.contacts\"}]]}],[\"$\",\"div\",null,{\"className\":\"flex py-2 gap-2\",\"children\":[[\"$\",\"span\",\"http://wpa.qq.com/msgrd?v=3\u0026uin=540232834\u0026site=qq\u0026menu=yes\",{\"children\":[\"$\",\"a\",null,{\"href\":\"http://wpa.qq.com/msgrd?v=3\u0026uin=540232834\u0026site=qq\u0026menu=yes\",\"title\":\"QQ: 540232834\",\"target\":\"_blank\",\"className\":\"block transition hover:scale-125\",\"rel\":\"noreferrer\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 448 512\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741 0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792 0 0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704z\",\"children\":\"$undefined\"}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":22.400000000000002,\"width\":22.400000000000002,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}]}],[\"$\",\"span\",\"mailto://ddadaal.me@outlook.com\",{\"children\":[\"$\",\"a\",null,{\"href\":\"mailto://ddadaal.me@outlook.com\",\"title\":\"E-mail: ddadaal@outlook.com\",\"target\":\"_blank\",\"className\":\"block transition hover:scale-125\",\"rel\":\"noreferrer\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 576 512\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M160 448c-25.6 0-51.2-22.4-64-32-64-44.8-83.2-60.8-96-70.4V480c0 17.67 14.33 32 32 32h256c17.67 0 32-14.33 32-32V345.6c-12.8 9.6-32 25.6-96 70.4-12.8 9.6-38.4 32-64 32zm128-192H32c-17.67 0-32 14.33-32 32v16c25.6 19.2 22.4 19.2 115.2 86.4 9.6 6.4 28.8 25.6 44.8 25.6s35.2-19.2 44.8-22.4c92.8-67.2 89.6-67.2 115.2-86.4V288c0-17.67-14.33-32-32-32zm256-96H224c-17.67 0-32 14.33-32 32v32h96c33.21 0 60.59 25.42 63.71 57.82l.29-.22V416h192c17.67 0 32-14.33 32-32V192c0-17.67-14.33-32-32-32zm-32 128h-64v-64h64v64zm-352-96c0-35.29 28.71-64 64-64h224V32c0-17.67-14.33-32-32-32H96C78.33 0 64 14.33 64 32v192h96v-32z\",\"children\":\"$undefined\"}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":22.400000000000002,\"width\":22.400000000000002,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}]}],[\"$\",\"span\",\"https://www.linkedin.com/in/chenjunda/\",{\"children\":[\"$\",\"a\",null,{\"href\":\"https://www.linkedin.com/in/chenjunda/\",\"title\":\"LinkedIn: 陈俊达\",\"target\":\"_blank\",\"className\":\"block transition hover:scale-125\",\"rel\":\"noreferrer\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 448 512\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z\",\"children\":\"$undefined\"}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":22.400000000000002,\"width\":22.400000000000002,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}]}],[\"$\",\"span\",\"https://github.com/ddadaal\",{\"children\":[\"$\",\"a\",null,{\"href\":\"https://github.com/ddadaal\",\"title\":\"GitHub: ddadaal\",\"target\":\"_blank\",\"className\":\"block transition hover:scale-125\",\"rel\":\"noreferrer\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 496 512\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z\",\"children\":\"$undefined\"}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":22.400000000000002,\"width\":22.400000000000002,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}]}],[\"$\",\"span\",\"https://steamcommunity.com/profiles/76561198104889782\",{\"children\":[\"$\",\"a\",null,{\"href\":\"https://steamcommunity.com/profiles/76561198104889782\",\"title\":\"Steam: Victor Crubs\",\"target\":\"_blank\",\"className\":\"block transition hover:scale-125\",\"rel\":\"noreferrer\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 496 512\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M496 256c0 137-111.2 248-248.4 248-113.8 0-209.6-76.3-239-180.4l95.2 39.3c6.4 32.1 34.9 56.4 68.9 56.4 39.2 0 71.9-32.4 70.2-73.5l84.5-60.2c52.1 1.3 95.8-40.9 95.8-93.5 0-51.6-42-93.5-93.7-93.5s-93.7 42-93.7 93.5v1.2L176.6 279c-15.5-.9-30.7 3.4-43.5 12.1L0 236.1C10.2 108.4 117.1 8 247.6 8 384.8 8 496 119 496 256zM155.7 384.3l-30.5-12.6a52.79 52.79 0 0 0 27.2 25.8c26.9 11.2 57.8-1.6 69-28.4 5.4-13 5.5-27.3.1-40.3-5.4-13-15.5-23.2-28.5-28.6-12.9-5.4-26.7-5.2-38.9-.6l31.5 13c19.8 8.2 29.2 30.9 20.9 50.7-8.3 19.9-31 29.2-50.8 21zm173.8-129.9c-34.4 0-62.4-28-62.4-62.3s28-62.3 62.4-62.3 62.4 28 62.4 62.3-27.9 62.3-62.4 62.3zm.1-15.6c25.9 0 46.9-21 46.9-46.8 0-25.9-21-46.8-46.9-46.8s-46.9 21-46.9 46.8c.1 25.8 21.1 46.8 46.9 46.8z\",\"children\":\"$undefined\"}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":22.400000000000002,\"width\":22.400000000000002,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}]}],[\"$\",\"span\",\"https://zhihu.com/people/VicCrubs\",{\"children\":[\"$\",\"a\",null,{\"href\":\"https://zhihu.com/people/VicCrubs\",\"title\":\"知乎：陈俊达\",\"target\":\"_blank\",\"className\":\"block transition hover:scale-125\",\"rel\":\"noreferrer\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 640 512\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M170.54 148.13v217.54l23.43.01 7.71 26.37 42.01-26.37h49.53V148.13H170.54zm97.75 193.93h-27.94l-27.9 17.51-5.08-17.47-11.9-.04V171.75h72.82v170.31zm-118.46-94.39H97.5c1.74-27.1 2.2-51.59 2.2-73.46h51.16s1.97-22.56-8.58-22.31h-88.5c3.49-13.12 7.87-26.66 13.12-40.67 0 0-24.07 0-32.27 21.57-3.39 8.9-13.21 43.14-30.7 78.12 5.89-.64 25.37-1.18 36.84-22.21 2.11-5.89 2.51-6.66 5.14-14.53h28.87c0 10.5-1.2 66.88-1.68 73.44H20.83c-11.74 0-15.56 23.62-15.56 23.62h65.58C66.45 321.1 42.83 363.12 0 396.34c20.49 5.85 40.91-.93 51-9.9 0 0 22.98-20.9 35.59-69.25l53.96 64.94s7.91-26.89-1.24-39.99c-7.58-8.92-28.06-33.06-36.79-41.81L87.9 311.95c4.36-13.98 6.99-27.55 7.87-40.67h61.65s-.09-23.62-7.59-23.62v.01zm412.02-1.6c20.83-25.64 44.98-58.57 44.98-58.57s-18.65-14.8-27.38-4.06c-6 8.15-36.83 48.2-36.83 48.2l19.23 14.43zm-150.09-59.09c-9.01-8.25-25.91 2.13-25.91 2.13s39.52 55.04 41.12 57.45l19.46-13.73s-25.67-37.61-34.66-45.86h-.01zM640 258.35c-19.78 0-130.91.93-131.06.93v-101c4.81 0 12.42-.4 22.85-1.2 40.88-2.41 70.13-4 87.77-4.81 0 0 12.22-27.19-.59-33.44-3.07-1.18-23.17 4.58-23.17 4.58s-165.22 16.49-232.36 18.05c1.6 8.82 7.62 17.08 15.78 19.55 13.31 3.48 22.69 1.7 49.15.89 24.83-1.6 43.68-2.43 56.51-2.43v99.81H351.41s2.82 22.31 25.51 22.85h107.94v70.92c0 13.97-11.19 21.99-24.48 21.12-14.08.11-26.08-1.15-41.69-1.81 1.99 3.97 6.33 14.39 19.31 21.84 9.88 4.81 16.17 6.57 26.02 6.57 29.56 0 45.67-17.28 44.89-45.31v-73.32h122.36c9.68 0 8.7-23.78 8.7-23.78l.03-.01z\",\"children\":\"$undefined\"}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":22.400000000000002,\"width\":22.400000000000002,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}]}],[\"$\",\"span\",\"https://www.douban.com/people/183064260/\",{\"children\":[\"$\",\"a\",null,{\"href\":\"https://www.douban.com/people/183064260/\",\"title\":\"豆瓣: ddadaal\",\"target\":\"_blank\",\"className\":\"block transition hover:scale-125\",\"rel\":\"noreferrer\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"role\":\"img\",\"viewBox\":\"0 0 24 24\",\"children\":[\"$undefined\",[[\"$\",\"title\",\"0\",{\"children\":[]}],[\"$\",\"path\",\"1\",{\"d\":\"M.51 3.06h22.98V.755H.51V3.06Zm20.976 2.537v9.608h-2.137l-1.669 5.76H24v2.28H0v-2.28h6.32l-1.67-5.76H2.515V5.597h18.972Zm-5.066 9.608H7.58l1.67 5.76h5.501l1.67-5.76ZM18.367 7.9H5.634v5.025h12.733V7.9Z\",\"children\":\"$undefined\"}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":22.400000000000002,\"width\":22.400000000000002,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}]}]]}]]}],[\"$\",\"p\",null,{\"className\":\"text-center\",\"children\":[\"© \",2023,\" | \",[\"$\",\"$Lf\",null,{\"id\":\"footer.madeWithLove\"}]]}]]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"footer-title\",\"children\":[\"🚀 \",[\"$\",\"$Lf\",null,{\"id\":\"footer.poweredBy\"}]]}],[[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://reactjs.org/\",\"rel\":\"noreferrer\",\"children\":\"React\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://www.gatsbyjs.org/\",\"rel\":\"noreferrer\",\"children\":\"Next.js\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://pages.github.com/\",\"rel\":\"noreferrer\",\"children\":\"GitHub Pages\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://www.typescriptlang.org/\",\"rel\":\"noreferrer\",\"children\":\"TypeScript\"}]]]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"footer-title\",\"children\":[\"🎨 \",[\"$\",\"$Lf\",null,{\"id\":\"footer.themedWith\"}]]}],[[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://reactstrap.github.io/\",\"rel\":\"noreferrer\",\"children\":\"daisyui\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://bootswatch.com/flatly/\",\"rel\":\"noreferrer\",\"children\":\"tailwind\"}]]]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"footer-title\",\"children\":[\"🎓 \",[\"$\",\"$Lf\",null,{\"id\":\"footer.contacts\"}]]}],[[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://idealclover.top\",\"rel\":\"noreferrer\",\"children\":\"idealclover - 翠翠酱的个人网站\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://sephidator.xyz\",\"rel\":\"noreferrer\",\"children\":\"Sephidator - Sephidator的个人博客\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://iznauy.github.io/\",\"rel\":\"noreferrer\",\"children\":\"iznauy - 个人博客\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://aironoria.github.io\",\"rel\":\"noreferrer\",\"children\":\"Aironoria - 陈俊宇的个人博客\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://jbesu.com/\",\"rel\":\"noreferrer\",\"children\":\"forewing - 个人主页\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://weiser.fun\",\"rel\":\"noreferrer\",\"children\":\"Weiser - 个人主页\"}]]]}]]}]}],[\"$\",\"$L13\",null,{}]]}]\n"])</script><script>self.__next_f.push([1,"8:[\"$\",\"$La\",null,{\"children\":[[\"$\",\"$Lb\",null,{\"resumeLangs\":[\"cn\",\"en\"]}],[\"$\",\"div\",null,{\"children\":[\"$L14\",\"$undefined\",[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]]}],[\"$\",\"footer\",null,{\"className\":\"bg-base-200 text-base-content\",\"children\":[\"$\",\"div\",null,{\"className\":\"footer py-6 max-w-7xl mx-auto px-4\",\"children\":[[\"$\",\"div\",null,{\"className\":\"space-y-1\",\"children\":[[\"$\",\"p\",null,{\"children\":[\"👨🏼‍💻 \",[\"$\",\"$Lf\",null,{\"id\":\"footer.codeBy\",\"args\":[[\"$\",\"$L10\",\"about/me\",{\"className\":\"link link-hover\",\"basePath\":\"/about/me\",\"children\":\"ddadaal\"}]]}]]}],[\"$\",\"p\",null,{\"children\":[\"📝\",[\"$\",\"$Lf\",null,{\"id\":\"footer.license\",\"args\":[[\"$\",\"a\",\"license\",{\"rel\":\"licene noreferrer\",\"target\":\"_blank\",\"className\":\"link\",\"href\":\"https://creativecommons.org/licenses/by-sa/4.0/\",\"children\":\"CC BY-SA 4.0\"}]]}]]}],[\"$\",\"$L11\",null,{\"serverStartTime\":\"2023-06-20T11:11:46.546+00:00\"}],[\"$\",\"$L12\",null,{\"time\":\"2023-06-20T11:11:46.546+00:00\"}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"p\",null,{\"children\":[\"📲 \",[\"$\",\"$Lf\",null,{\"id\":\"footer.contacts\"}]]}],[\"$\",\"div\",null,{\"className\":\"flex py-2 gap-2\",\"children\":[[\"$\",\"span\",\"http://wpa.qq.com/msgrd?v=3\u0026uin=540232834\u0026site=qq\u0026menu=yes\",{\"children\":[\"$\",\"a\",null,{\"href\":\"http://wpa.qq.com/msgrd?v=3\u0026uin=540232834\u0026site=qq\u0026menu=yes\",\"title\":\"QQ: 540232834\",\"target\":\"_blank\",\"className\":\"block transition hover:scale-125\",\"rel\":\"noreferrer\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 448 512\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741 0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792 0 0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704z\",\"children\":\"$undefined\"}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":22.400000000000002,\"width\":22.400000000000002,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}]}],[\"$\",\"span\",\"mailto://ddadaal.me@outlook.com\",{\"children\":[\"$\",\"a\",null,{\"href\":\"mailto://ddadaal.me@outlook.com\",\"title\":\"E-mail: ddadaal@outlook.com\",\"target\":\"_blank\",\"className\":\"block transition hover:scale-125\",\"rel\":\"noreferrer\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 576 512\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M160 448c-25.6 0-51.2-22.4-64-32-64-44.8-83.2-60.8-96-70.4V480c0 17.67 14.33 32 32 32h256c17.67 0 32-14.33 32-32V345.6c-12.8 9.6-32 25.6-96 70.4-12.8 9.6-38.4 32-64 32zm128-192H32c-17.67 0-32 14.33-32 32v16c25.6 19.2 22.4 19.2 115.2 86.4 9.6 6.4 28.8 25.6 44.8 25.6s35.2-19.2 44.8-22.4c92.8-67.2 89.6-67.2 115.2-86.4V288c0-17.67-14.33-32-32-32zm256-96H224c-17.67 0-32 14.33-32 32v32h96c33.21 0 60.59 25.42 63.71 57.82l.29-.22V416h192c17.67 0 32-14.33 32-32V192c0-17.67-14.33-32-32-32zm-32 128h-64v-64h64v64zm-352-96c0-35.29 28.71-64 64-64h224V32c0-17.67-14.33-32-32-32H96C78.33 0 64 14.33 64 32v192h96v-32z\",\"children\":\"$undefined\"}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":22.400000000000002,\"width\":22.400000000000002,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}]}],[\"$\",\"span\",\"https://www.linkedin.com/in/chenjunda/\",{\"children\":[\"$\",\"a\",null,{\"href\":\"https://www.linkedin.com/in/chenjunda/\",\"title\":\"LinkedIn: 陈俊达\",\"target\":\"_blank\",\"className\":\"block transition hover:scale-125\",\"rel\":\"noreferrer\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 448 512\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z\",\"children\":\"$undefined\"}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":22.400000000000002,\"width\":22.400000000000002,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}]}],[\"$\",\"span\",\"https://github.com/ddadaal\",{\"children\":[\"$\",\"a\",null,{\"href\":\"https://github.com/ddadaal\",\"title\":\"GitHub: ddadaal\",\"target\":\"_blank\",\"className\":\"block transition hover:scale-125\",\"rel\":\"noreferrer\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 496 512\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z\",\"children\":\"$undefined\"}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":22.400000000000002,\"width\":22.400000000000002,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}]}],[\"$\",\"span\",\"https://steamcommunity.com/profiles/76561198104889782\",{\"children\":[\"$\",\"a\",null,{\"href\":\"https://steamcommunity.com/profiles/76561198104889782\",\"title\":\"Steam: Victor Crubs\",\"target\":\"_blank\",\"className\":\"block transition hover:scale-125\",\"rel\":\"noreferrer\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 496 512\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M496 256c0 137-111.2 248-248.4 248-113.8 0-209.6-76.3-239-180.4l95.2 39.3c6.4 32.1 34.9 56.4 68.9 56.4 39.2 0 71.9-32.4 70.2-73.5l84.5-60.2c52.1 1.3 95.8-40.9 95.8-93.5 0-51.6-42-93.5-93.7-93.5s-93.7 42-93.7 93.5v1.2L176.6 279c-15.5-.9-30.7 3.4-43.5 12.1L0 236.1C10.2 108.4 117.1 8 247.6 8 384.8 8 496 119 496 256zM155.7 384.3l-30.5-12.6a52.79 52.79 0 0 0 27.2 25.8c26.9 11.2 57.8-1.6 69-28.4 5.4-13 5.5-27.3.1-40.3-5.4-13-15.5-23.2-28.5-28.6-12.9-5.4-26.7-5.2-38.9-.6l31.5 13c19.8 8.2 29.2 30.9 20.9 50.7-8.3 19.9-31 29.2-50.8 21zm173.8-129.9c-34.4 0-62.4-28-62.4-62.3s28-62.3 62.4-62.3 62.4 28 62.4 62.3-27.9 62.3-62.4 62.3zm.1-15.6c25.9 0 46.9-21 46.9-46.8 0-25.9-21-46.8-46.9-46.8s-46.9 21-46.9 46.8c.1 25.8 21.1 46.8 46.9 46.8z\",\"children\":\"$undefined\"}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":22.400000000000002,\"width\":22.400000000000002,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}]}],[\"$\",\"span\",\"https://zhihu.com/people/VicCrubs\",{\"children\":[\"$\",\"a\",null,{\"href\":\"https://zhihu.com/people/VicCrubs\",\"title\":\"知乎：陈俊达\",\"target\":\"_blank\",\"className\":\"block transition hover:scale-125\",\"rel\":\"noreferrer\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 640 512\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M170.54 148.13v217.54l23.43.01 7.71 26.37 42.01-26.37h49.53V148.13H170.54zm97.75 193.93h-27.94l-27.9 17.51-5.08-17.47-11.9-.04V171.75h72.82v170.31zm-118.46-94.39H97.5c1.74-27.1 2.2-51.59 2.2-73.46h51.16s1.97-22.56-8.58-22.31h-88.5c3.49-13.12 7.87-26.66 13.12-40.67 0 0-24.07 0-32.27 21.57-3.39 8.9-13.21 43.14-30.7 78.12 5.89-.64 25.37-1.18 36.84-22.21 2.11-5.89 2.51-6.66 5.14-14.53h28.87c0 10.5-1.2 66.88-1.68 73.44H20.83c-11.74 0-15.56 23.62-15.56 23.62h65.58C66.45 321.1 42.83 363.12 0 396.34c20.49 5.85 40.91-.93 51-9.9 0 0 22.98-20.9 35.59-69.25l53.96 64.94s7.91-26.89-1.24-39.99c-7.58-8.92-28.06-33.06-36.79-41.81L87.9 311.95c4.36-13.98 6.99-27.55 7.87-40.67h61.65s-.09-23.62-7.59-23.62v.01zm412.02-1.6c20.83-25.64 44.98-58.57 44.98-58.57s-18.65-14.8-27.38-4.06c-6 8.15-36.83 48.2-36.83 48.2l19.23 14.43zm-150.09-59.09c-9.01-8.25-25.91 2.13-25.91 2.13s39.52 55.04 41.12 57.45l19.46-13.73s-25.67-37.61-34.66-45.86h-.01zM640 258.35c-19.78 0-130.91.93-131.06.93v-101c4.81 0 12.42-.4 22.85-1.2 40.88-2.41 70.13-4 87.77-4.81 0 0 12.22-27.19-.59-33.44-3.07-1.18-23.17 4.58-23.17 4.58s-165.22 16.49-232.36 18.05c1.6 8.82 7.62 17.08 15.78 19.55 13.31 3.48 22.69 1.7 49.15.89 24.83-1.6 43.68-2.43 56.51-2.43v99.81H351.41s2.82 22.31 25.51 22.85h107.94v70.92c0 13.97-11.19 21.99-24.48 21.12-14.08.11-26.08-1.15-41.69-1.81 1.99 3.97 6.33 14.39 19.31 21.84 9.88 4.81 16.17 6.57 26.02 6.57 29.56 0 45.67-17.28 44.89-45.31v-73.32h122.36c9.68 0 8.7-23.78 8.7-23.78l.03-.01z\",\"children\":\"$undefined\"}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":22.400000000000002,\"width\":22.400000000000002,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}]}],[\"$\",\"span\",\"https://www.douban.com/people/183064260/\",{\"children\":[\"$\",\"a\",null,{\"href\":\"https://www.douban.com/people/183064260/\",\"title\":\"豆瓣: ddadaal\",\"target\":\"_blank\",\"className\":\"block transition hover:scale-125\",\"rel\":\"noreferrer\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"role\":\"img\",\"viewBox\":\"0 0 24 24\",\"children\":[\"$undefined\",[[\"$\",\"title\",\"0\",{\"children\":[]}],[\"$\",\"path\",\"1\",{\"d\":\"M.51 3.06h22.98V.755H.51V3.06Zm20.976 2.537v9.608h-2.137l-1.669 5.76H24v2.28H0v-2.28h6.32l-1.67-5.76H2.515V5.597h18.972Zm-5.066 9.608H7.58l1.67 5.76h5.501l1.67-5.76ZM18.367 7.9H5.634v5.025h12.733V7.9Z\",\"children\":\"$undefined\"}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":22.400000000000002,\"width\":22.400000000000002,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}]}]]}]]}],[\"$\",\"p\",null,{\"className\":\"text-center\",\"children\":[\"© \",2023,\" | \",[\"$\",\"$Lf\",null,{\"id\":\"footer.madeWithLove\"}]]}]]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"footer-title\",\"children\":[\"🚀 \",[\"$\",\"$Lf\",null,{\"id\":\"footer.poweredBy\"}]]}],[[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://reactjs.org/\",\"rel\":\"noreferrer\",\"children\":\"React\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://www.gatsbyjs.org/\",\"rel\":\"noreferrer\",\"children\":\"Next.js\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://pages.github.com/\",\"rel\":\"noreferrer\",\"children\":\"GitHub Pages\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://www.typescriptlang.org/\",\"rel\":\"noreferrer\",\"children\":\"TypeScript\"}]]]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"footer-title\",\"children\":[\"🎨 \",[\"$\",\"$Lf\",null,{\"id\":\"footer.themedWith\"}]]}],[[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://reactstrap.github.io/\",\"rel\":\"noreferrer\",\"children\":\"daisyui\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://bootswatch.com/flatly/\",\"rel\":\"noreferrer\",\"children\":\"tailwind\"}]]]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"footer-title\",\"children\":[\"🎓 \",[\"$\",\"$Lf\",null,{\"id\":\"footer.contacts\"}]]}],[[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://idealclover.top\",\"rel\":\"noreferrer\",\"children\":\"idealclover - 翠翠酱的个人网站\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://sephidator.xyz\",\"rel\":\"noreferrer\",\"children\":\"Sephidator - Sephidator的个人博客\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://iznauy.github.io/\",\"rel\":\"noreferrer\",\"children\":\"iznauy - 个人博客\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://aironoria.github.io\",\"rel\":\"noreferrer\",\"children\":\"Aironoria - 陈俊宇的个人博客\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://jbesu.com/\",\"rel\":\"noreferrer\",\"children\":\"forewing - 个人主页\"}],[\"$\",\"a\",null,{\"className\":\"link link-hover\",\"target\":\"_blank\",\"href\":\"https://weiser.fun\",\"rel\":\"noreferrer\",\"children\":\"Weiser - 个人主页\"}]]]}]]}]}],[\"$\",\"$L13\",null,{}]]}]\n"])</script><script>self.__next_f.push([1,"6:[[[\"$\",\"meta\",null,{\"charSet\":\"utf-8\"}],[\"$\",\"title\",null,{\"children\":\"博客的发展2：重写，重生 - ddadaal.me\"}],[\"$\",\"meta\",null,{\"name\":\"description\",\"content\":\"ddadaal's personal website\"}],null,null,[\"$\",\"link\",null,{\"rel\":\"manifest\",\"href\":\"/site.webmanifest\"}],null,null,null,null,null,[\"$\",\"meta\",null,{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],null,null,null,null,null,null,null,null,null,null,[]],[null,null,null,null],null,null,[null,null,null,null,null],null,null,null,null,[null,[[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"any\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/icon.svg?35be8e76be1c3618\",\"type\":\"image/svg+xml\",\"sizes\":\"500x500\"}]],[[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"href\":\"/apple-icon.png?5334a64f42000bb0\",\"type\":\"image/png\",\"sizes\":\"180x180\"}]],null]]\n"])</script><script>self.__next_f.push([1,"e:\"$L15\"\n14:[[[\"$\",\"meta\",null,{\"charSet\":\"utf-8\"}],null,null,null,null,null,null,null,null,null,null,[\"$\",\"meta\",null,{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],null,null,null,null,null,null,null,null,null,null,[]],[null,null,null,null],null,null,[null,null,null,null,null],null,null,null,null,null]\n"])</script><script>self.__next_f.push([1,"16:I{\"id\":\"6091\",\"chunks\":[\"309:static/chunks/70bb1395-d6354d9eb02b5992.js\",\"975:static/chunks/dc6764d5-acd07a2e286ee329.js\",\"344:static/chunks/2e69a9b8-691073cd158eaece.js\",\"301:static/chunks/8a8c2739-bbbebd44388102d4.js\",\"813:static/chunks/813-cf37a3c39e380b56.js\",\"647:static/chunks/647-5e2b1bd38dd79bde.js\",\"861:static/chunks/861-50e3e01387b52bfc.js\",\"94:static/chunks/app/about/[id]/[[...lang]]/page-a09d09b63b5b9ec6.js\"],\"name\":\"ArticleFrontmatter\",\"async\":false}\n18:I{\"id\":\"3303\",\"chunks\":[\"309:static/chu"])</script><script>self.__next_f.push([1,"nks/70bb1395-d6354d9eb02b5992.js\",\"975:static/chunks/dc6764d5-acd07a2e286ee329.js\",\"344:static/chunks/2e69a9b8-691073cd158eaece.js\",\"301:static/chunks/8a8c2739-bbbebd44388102d4.js\",\"813:static/chunks/813-cf37a3c39e380b56.js\",\"647:static/chunks/647-5e2b1bd38dd79bde.js\",\"861:static/chunks/861-50e3e01387b52bfc.js\",\"94:static/chunks/app/about/[id]/[[...lang]]/page-a09d09b63b5b9ec6.js\"],\"name\":\"RelatedArticles\",\"async\":false}\n19:I{\"id\":\"1763\",\"chunks\":[\"309:static/chunks/70bb1395-d6354d9eb02b5992.js\",\"975:static"])</script><script>self.__next_f.push([1,"/chunks/dc6764d5-acd07a2e286ee329.js\",\"344:static/chunks/2e69a9b8-691073cd158eaece.js\",\"301:static/chunks/8a8c2739-bbbebd44388102d4.js\",\"813:static/chunks/813-cf37a3c39e380b56.js\",\"647:static/chunks/647-5e2b1bd38dd79bde.js\",\"861:static/chunks/861-50e3e01387b52bfc.js\",\"94:static/chunks/app/about/[id]/[[...lang]]/page-a09d09b63b5b9ec6.js\"],\"name\":\"CommentPanelWithCurrentLanguage\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"15:[\"$\",\"article\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"bg-neutral px-4 py-8\",\"children\":[\"$\",\"div\",null,{\"className\":\"max-w-7xl mx-auto min-h-[256px] flex justify-center text-center text-neutral-content\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex flex-col justify-center animate-slide-up\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-4xl my-2\",\"children\":\"博客的发展2：重写，重生\"}],[\"$\",\"$L16\",null,{\"className\":\"justify-center\",\"articleId\":\"blog-updates-2\",\"info\":{\"content\":\"\\n# 鸽了4年的更新\\n\\n4年前的[博客的发展1](/articles/blog-updates-1)中，我提到了当时博客的几个问题。后来，我通过一个非常hack的方式解决了中文字数统计的问题（[修复gatsby-transformer-remark插件中文词数统计错误问题](/articles/fix-gatsby-transformer-remark-chinese-word-count)，但是最重要的**重构样式和完善UI设计**的问题一直搁置，并且随着时间和技术的发展，项目也遇到了不少的问题，例如\\n\\n1. 样式的混乱使得我一直使用老的bootstrap v4版本，无法升级到最新的bootstrap版本\\n2. gatsby生态更新太快，很多组件我无法理解它们具体做了什么工作\\n\\n5月底研究生答辩完后，本来计划好的旅行，在我出发的前一天被我二阳直接推迟了。阳了后基本上也就只能在宿舍呆着。呆着也是呆着，我想起来博客这个”我的门面“。这三年博客本身基本没有任何更新，基本属于年久失修的状态。于是我决定给我的博客来个大手术。\\n\\n# 新博客的亮点\\n\\n- 完全使用Next.js编写\\n\\n由于研究生期间的项目（[PKUHPC/SCOW](https://github.com/PKUHPC/SCOW)）是完全使用Next.js编写的，我对Next.js非常熟悉。而Next.js本身也是一个非常成熟的React框架，并且也支持[导出为静态网站](https://nextjs.org/docs/app/building-your-application/deploying/static-exports)的功能，并且有很多网站均使用了Next.js来作为它们的主页、博客等信息发布平台，所以我在想是否能重用之前的经验，用Next.js来搭建新的网站。一顿操作下来，除了遇到了一些和Gatsby的思路不太一样的地方，整个体验还是挺不错的。\\n\\n- 完全兼容原有博客\\n\\n新的网站和原有博客在功能性、整体布局以及各个页面的URL方面都完全一致，原有的所有使用习惯和URL都可以直接使用，原来的所有功能现在都仍然支持，包括但不限于多语言页面、多语言文章、RSS等。这才是**重写**的真正含义吧：所有代码都完全重写了，但是不会影响任何已有的使用体验。\\n\\n- 使用Tailwind编写样式，去除CSS in JS方案\\n\\n这是本次重写最重要的地方。我原来是CSS in JS的狂热爱好者，认为使用JS编写网站的所有方便是网页开发的最终目标。现在，我虽然仍然认为CSS in JS方案带来的灵活性是所有其他方案都不可比拟的，但是我也认识到很多情况下样式并不需要那么高的灵活性。另外，由于样式最终还是要到达CSS的层次，在把CSS in JS和其他第三方样式解决方案（例如之前用的bootstrap）集成的过程中，需要大量代码来将两套完全独立的样式系统整合起来。这也是之前样式代码极度混乱的根本原因。\\n\\n例如，原来代码中的导航栏组件同时使用了bootstrap的`Navbar`组件，并通过styled-components在这个组件的基础上自定义了样式。在自定义样式时，还引用了TS中定义的样式变量。有的组件甚至为了使用bootstrap的定义在`SCSS`中的变量，故还引用了自定义的SCSS文件。而由于有的变量是定义在SCSS中，有的是在TS代码中的，所有很多变量（例如颜色）都需要定义两次。\\n\\n```ts caption=\\\"原来的标题栏实现部分代码\\\"\\nimport { Navbar } from \\\"reactstrap\\\";\\n\\nconst StyledNavbar = styled(Navbar)`\\n  \u0026\u0026 {\\n    max-width: ${widths.mainContent}px;\\n    margin-left: auto;\\n    margin-right: auto;\\n    padding: 4px 8px;\\n\\n    transition: width 0.2s ease-in-out;\\n  }\\n`;\\n```\\n\\n另外，我也认识到以传统HTML/CSS来布局和样式的一些优势，例如将UI与具体的开发框架解耦、更好的性能、以及甚至能在不启用JS的环境下展示页面等。当前，以[tailwind](https://tailwindcss.com/)为主的以传统的HTML/CSS为基础的样式方案非常火，这次我也直接采用tailwind以及基于tailwind的纯HTML/CSS组件库[daisyui](https://daisyui.com/)来编写新的博客，并体验到了前所未有的开发效率和开发体验。直接写语义化的类型名，确实比写JS代码要方便太多了。\\n\\n![tailwind自动完成体验](./tailwind.png)\\n\\n# 实现\\n\\n## 完全采用Next.js App Router\\n\\nNext.js的[App Router](https://nextjs.org/docs/app)功能可谓是万众期待，虽说有评论说这个功能（以及后续的Server Actions）把Next.js[变成了PHP](https://www.youtube.com/watch?v=10Yt5vRimNI)，但是不可否认的是，App Router极大地提高了开发体验和灵活度。\\n\\n在新的博客中，App Router带来的各种优势里，让我最受用的是以下两点：\\n\\n- React Server Component （RSC，服务器端组件）\\n\\nReact Server Component (RSC)实际上是React的概念，在2020年就提出来了（[Introducing Zero-Bundle-Size React Server Components - React Blog](https://legacy.reactjs.org/blog/2020/12/21/data-fetching-with-react-server-components.html)）。简单来说，原来的React的组件都是运行在客户端的。浏览器首先把项目代码下载下来，然后再浏览器中运行代码，这些代码将会通过浏览器端DOM API在浏览器上画出UI，并处理用户的交互。而React Server Component允许用户编写**运行在服务器端的**React组件。而Next.js 13第一次实现了这一概念。\\n\\n这颠覆了传统的前端开发模式。代码在服务器端运行的，这就意味着组件可以直接执行在服务器端才能执行的代码，例如访问数据库等，而不再需要单独的一套API来实现客户端和服务器端之间的交互。\\n\\n在新的博客中，所有博客的内容都是以本地文件的方式存放在`contents`目录下。所有的页面会去读取自己所需要的数据，之后将这些数据渲染出来。\\n\\n假设我们的网页不是一个静态网站，而是一个传统的React+后端的模式，那要实现这个功能，我们首先需要设计一个API来获取后端的数据，在后端，我们编写一个服务器实现这个API，然后在前端，我们通过`fetch`调用这个API，拿到数据后在UI上渲染出来。\\n\\n```ts caption=\\\"后端\\\"\\n// 后端，编写API\\nconst app = express();\\n\\napp.get(\\\"/articles/:id\\\", async (req, res) =\u003e {\\n  const content = await readContent(req.params.id);\\n\\n  res.send(content);\\n});\\n\\napp.listen(5000, () =\u003e {});\\n```\\n\\n```tsx caption=\\\"前端\\\"\\n// 前端，通过fetch API获取数据\\nexport const Page = ({ id }) =\u003e {\\n  const [data, setData] = useState();\\n\\n  useEffect(() =\u003e {\\n    fetch(\\\"http://localhost:5000/articles/\\\" + id)\\n      .then((x) =\u003e x.json())\\n      .then((x) =\u003e setData(x));\\n  }, []);\\n\\n  return data ? (\\n    \u003cArticleContent data={data}/\u003e\\n  ) : \u003cLoading /\u003e;\\n```\\n\\n然后通过RSC，我们可以直接使用React来实现这个需求：\\n\\n```tsx\\nexport default async ({ params }: Props) =\u003e {\\n\\n  const data = await readContent(params.id);\\n\\n  return (\\n    \u003cArticleContent data={data} /\u003e\\n  );\\n};\\n```\\n\\n这区别实在太大了。不再需要一个单独的后端项目，不再需要复杂的API设计、管理、调用、维护，从获取数据到渲染UI的过程非常直观。甚至说如果这个`ArticleContent`组件不需要用户交互的话，用户甚至不需要下载这个组件的代码，浏览器不启用JS就能访问网页。\\n\\n从某种角度来说，App Router确实是把React变成了PHP这类传统的服务器端渲染的方案。但是，毕竟Web前端是JS的世界，PHP等不能直接使用后端语言编写前端的交互逻辑，只能做一些简单的模板替换的功能，一旦涉及一些复杂的逻辑和交互，就不能不重新使用JS，而这就要求两套不同的语言，两套不同的工具链以及两套不同的生态，以及前后端之间的交互。而Next.js是以前端为基础，用一种非常自然的方式将前后端融合在一起，用同一套生态编写从前端交互到后端逻辑整个链条，实际上是一套和传统完全不一样的方案。\\n\\n\\n- [Colocation](https://nextjs.org/docs/app/building-your-application/routing/colocation#safe-colocation-by-default)，即**把相似用处的文件放在相近的位置**。\\n\\n在原来的`pages`目录下，每个文件定义了一个页面。例如`/pages/test.tsx`和`/pages/test/test2.tsx`就分别对应`/test`和`/test/test2`两个路径。但是，在绝大多数情况下，一个页面中的代码都不能在一个代码中完全写完。对于一些公用的组件，例如布局的header, footer等，我们可以把这些代码放在类似`layouts`、`components`的目录下，这些组件不涉及任何业务逻辑，可由具体的业务页面引用并组装。\\n\\n![现在博客下，会由多个页面使用的组件](./components.png)\\n\\n但是还有一些组件，它只在某个特定的页面下有用，例如为了完成某个特定的业务逻辑的组件。这种组件一般来说又是过于复杂，不能把它直接写在页面文件中，但是如果把这些组件直接放在页面组件文件的旁边，那么它们会被当成一个新的页面。\\n\\n由于在原来的事件中，我会创建一个`pageComponents`目录用于存放这种位于真正的基础组件（`components`）和页面（`pages`）之间的组件。例如在下图中，`pageComponents/admin/AllUsersTable.tsx`就是一个比较复杂的、涉及到业务的组件，它只会在`pages/admin/users.tsx`中被使用。\\n\\n![pageComponents](./pageComponents.png)\\n\\n除了这一方案，我也看到了一些项目采用的是和`Angular`类似的`Module`概念，把某个功能相关的代码都放在一个`modules/模块名`目录下，然后在`pages`目录下引用模块下的页面组件。\\n\\n但是不管是什么方案，实际上都是在为**一个文件=一个路径**这一概念打补丁。这一概念看着很美好，但是只要项目复杂度稍微高一点就会遇到上述的问题。同一个功能，有的代码在`pages`下，有的在`pageComponents`下，这会使得文件非常混乱。\\n\\n而`App Router`解决了这一个问题。在`App Router`下，路径由目录（而文件）定义。每个目录下，只有一些特殊的文件会被Next.js处理（例如`page.tsx`为这个页面的组件，`layout.tsx`为这个路径下的公共布局，其他文件Next.js直接忽略，都由自己组织。这就使得我们可以把一个页面所需要的组件拆分出来，放在和页面相同的目录下。\\n\\n例如在现在的项目中，`app/articles/[[...params]]`包括了文章列表页面的定义，其中就需要一个文件列表页面的布局的组件`ArticleList`。这个组件很明显需要被拆分出来。在原来的实践中，这种组件就应该被放在`pageComponents`或者`components`里。但是这个组件实际上只会在这个路径下被使用，所以使用`App Router`后，我们就可以把这个组件放在这个页面的文件（`page.tsx`）的旁边。这样，我们保证了所有这个页面相关的业务逻辑（公共组件不包含业务逻辑）都存放在这个路径下，这对代码后续维护、多人合作开发等方面都有非常多的好处。\\n\\n![现在博客下，文章列表页面布局](./articles-dir.png)\\n\\nApp Router所带来的优点远不止这两点。由于本博客是个静态的博客，且整体布局较为简单，所以并没有用上使用Next.js的动态功能，但是在我其他的项目中，App Router的**嵌套布局**（[Nested Layout](https://nextjs.org/docs/app/building-your-application/routing/pages-and-layouts#nesting-layouts)）、Server Actions带来的**直接在前端代码中调用后端逻辑的能力**都极大地提高了网站开发的效率。\\n\\n## Next.js静态生成\\n\\n### 静态网站\\n\\n我之前使用Next.js的项目都是传统的前端应用，也就是编译为前端+一个提供服务器端渲染（SSR）能力的Express后端的传统的Next.js项目。但是Next.js一直还支持直接生成只包括HTML/CSS/JS的静态网站的能力。\\n\\n传统的单页应用（SPA）会把整个应用编译为一个（或者多个）JS bundle以及一个实际上并不包含真正UI的模板HTML。用户访问任何路径时，都会下载这个HTML。这个HTML的唯一作用就是提供一个根DOM组件以及引用编译好的JS Bundle。JS Bundle将会被自动下载，通过浏览器的History API在浏览器端实现路由功能，并负责通过DOM API渲染用户的UI。\\n\\n![vite build构建出的项目](vite-build-output.png)\\n\\n而Next.js生成的静态网站和Gatsby, Hugo等静态网站生成器相同，会在编译时对每个路径获取这个路径所需要的数据，并将这些数据渲染成HTML。渲染出的结果中，每个路径都有对应的HTML。比如在下图中，`about/me.html`就对应了`/about/me`路径，并且其中包含了在服务器端渲染后的UI。用户访问路径时，会直接获取这个HTML，并直接就能渲染出已经渲染好的内容，无需等待下载和执行JS Bundle的过程。\\n\\n![next build构建出的项目](next-export-output.png)\\n\\n### 和Gatsby的区别\\n\\n在我上次重写ddadaal.me时，我选用了Gatsby，因为当时Gatsby的生态更加的成熟，有大量现成的模板、插件和教程可供使用和参考。几年后的现在，Next.js的静态生成功能也是非常成熟了，并也提供了很多的API来实现静态网站渲染的功能。但是和Gatsby项目，Next.js提供静态网站渲染的API的思路有所不同。\\n\\nGatsby主要通过`GraphQL`让开发者访问数据([Gatsby and GraphQL](https://www.gatsbyjs.com/docs/graphql/))。开发者在页面中可以声明这个页面所需要的数据的GraphQL查询，并在页面中通过props访问读取到的数据以及渲染UI。在编译时，gatsby将会负责运行这些查询，并将数据传递给需要数据的组件。而可以访问到的数据，则可以通过插件或者自定义`gatsby-node.ts`脚本来向后端的GraphQL服务器中增加数据节点。\\n\\n```ts\\n// https://github.com/ddadaal/ddadaal.me/blob/57fe926eb0/src/pages/slides.tsx\\n// 声明需要的数据\\nexport const query = graphql`\\n  query Slides {\\n    allSlide(filter: {type: { eq: \\\"dir\\\" }}) {\\n      nodes {\\n        name\\n        html_url\\n        type\\n      }\\n    }\\n  }\\n`;\\n\\ninterface Props {\\n  data: {\\n    allSlide: {\\n      nodes: { name: string; html_url: string }[];\\n    };\\n  };\\n}\\n\\nconst Slides: React.FC\u003cProps\u003e = (props) =\u003e {\\n  // 通过Props读取获取到的数据\\n  const { data: { allSlide: { nodes } } } = props;\\n\\n  // 使用这些数据渲染UI\\n};\\n```\\n\\n当然，要想更灵活地访问数据和创建页面，开发者还可以通过`gatsby-node.ts`编写编译时在node端执行的脚本。这个脚本是在编译器在Node.js中运行的，故可以访问任何本地数据。Gatsby还提供了大量[Gatsby Node API](https://www.gatsbyjs.com/docs/reference/config-files/gatsby-node/)来帮助用户创建页面、GraphQL数据等。\\n\\n```js\\ncreatePage({\\n  // 生成页面的路径\\n  path: \\\"/articles/\\\" + pageIndex,\\n  // 页面所对应的React组件\\n  component: indexTemplate,\\n  // 组件所需要的数据\\n  context: {\\n    limit: pageSize,\\n    skip: pageIndex * pageSize,\\n    pageCount,\\n    pageIndex: pageIndex,\\n    ids: notIgnoredGroups\\n      .slice(pageIndex * pageSize, pageIndex * pageSize + pageSize)\\n      .map((x) =\u003e x.frontmatter.id),\\n  },\\n});\\n```\\n\\n总的来说，Gatsby通过GraphQL和Gatsby Node API将**UI**和**数据**完全隔离开来。用户定义各个页面所需要的数据类型，一方面编写脚本或者插件将各类数据源转换为GraphQL等页面需要的数据，另一方面编写React代码将这些数据渲染成UI。\\n\\n而在当前使用App Router的Next.js项目中，获取数据以及渲染页面的方法有所不同。Next.js的路由一直是基于文件路径的，没有类似`Gatsby Node API`的API以及`gatsby-node.ts`的脚本可以用来手动创建各个页面。取而代之的，是\\n\\n- 通过文件路径定义路径\\n- 通过`generateStaticParams`函数获取所有可能的路径参数\\n- 通过RSC同时实现数据获取和渲染\\n\\n例如说，我的博客中`/about`路径下包含了`/about/me`、`/about/odyssey`和`/about/project`三个路径，分别对应3篇文章。要实现`/about`路径，我需要\\n\\n- 定义`app/about/[id]`目录\\n- 在`generateStaticParams`中，返回`id`参数的所有可能值`[\\\"me\\\", \\\"odyssey\\\", \\\"project\\\"]{:ts}`\\n- 在`app/about/[id]/page.tsx`（实际上不是这个路径）中，定义一个RSC，获取到路径的ID的参数，之后获取到对应的文章内容，并同时根据文件内容渲染出UI\\n\\n可以看出，通过Next.js，我们不再需要GraphQL将数据和页面分割开来，而可以直接使用RSC同时完成读取数据和渲染UI的功能。通过`generateStaticParams`列举了所有可能的路径，然后对每个路径渲染它对应的RSC，生成了每个路径的页面，从而编译出了整个网页。\\n\\n\\n## 自定义的markdown渲染流程\\n\\n在之前使用Gatsby时，我直接使用了一些现成的gatsby插件（如[`gatsby-plugin-remark`](https://www.gatsbyjs.com/plugins/gatsby-transformer-remark/)）来帮助我完成把markdown渲染成HTML的过程，故我对markdown渲染的流程几乎没有了解。但是在Next.js中没有这些插件了，所以我就需要自己去学习markdown渲染的知识，并自己完成markdown渲染的工作。\\n\\n当前，项目中是使用`remark`和`rehype`生态实现markdown的渲染的。[`remark`](https://github.com/remarkjs/remark)是一套把分析并转换markdown的生态，包含由大量插件。它可以分析markdown文件并将其转换为AST，并支持通过各类插件对这个AST进行分析和转换。而[`rehype`](https://github.com/rehypejs/rehype)类似`remark`，只不过`rehype`是针对HTML的。整个渲染流程可以通过[`unifiedjs`](https://unifiedjs.com/)连接起来。\\n\\n现在，博客在渲染markdown时，经历了以下的步骤：\\n\\n- [remark-parse](https://www.npmjs.com/package/remark-parse): 把markdown转换为remark AST\\n- [remark-gfm](https://www.npmjs.com/package/remark-gfm): 以GitHub Flavored Markdown格式解析AST\\n- [remark-rehype](https://www.npmjs.com/package/remark-rehype): 将remark AST转换为rehype AST\\n- [rehype-raw](https://www.npmjs.com/package/rehype-raw): 使markdown中的裸HTML标签最后能正常显示\\n- [rehype-slug](https://github.com/rehypejs/rehype-slug): 给各个标题标签加上对应的id\\n- [@stefanprobst/rehype-extract-toc](https://www.npmjs.com/package/@stefanprobst/rehype-extract-toc): 分析HTML中的各个标题标签，并生成对应的树状结构\\n- [rehype-react](https://github.com/rehypejs/rehype-react): 根据rehype AST生成对应的React组件树\\n- [rehype-pretty-code](https://rehype-pretty-code.netlify.app/): 美化代码风格，增加代码高亮等\\n\\n了解了markdown的渲染过程给我带来了几个好处：\\n\\n第一，我可以自己自定义渲染的流程了\\n\\n之前，对于一些已有插件不支持的功能，我是通过一些比较hack的方式完成的。例如文章的Table of Contents，我是通过在渲染后通过DOM API分析页面中各个`h1/h2/h3`等元素来动态生成的。而现在，我可以自己去寻找可以解析TOC的插件（@stefanprobst/rehype-extract-toc），并将它插入到渲染的流程中，并在最后得到结果并自己完成渲染的过程。又比如，我想给渲染出的标题的前面增加一个图标，点击这个图标就获取到跳转到这个标题的URL。通过`rehype-react`，我可以很简单的实现这一点。\\n\\n```tsx title=\\\"src/components/article/ArticleContent.tsx\\\"\\n.use(rehypeReact, {\\n  // ...\\n  components: {\\n    // ...\\n    // 使用自定义的React组件渲染h1/h2/h3组件\\n    h1: ((props) =\u003e \u003cHeadingWithLink element=\\\"h1\\\" props={props} /\u003e) satisfies\\n      ComponentType\u003cJSX.IntrinsicElements[\\\"h1\\\"]\u003e,\\n    h2: ((props) =\u003e \u003cHeadingWithLink element=\\\"h2\\\" props={props} /\u003e) satisfies\\n      ComponentType\u003cJSX.IntrinsicElements[\\\"h2\\\"]\u003e,\\n    h3: ((props) =\u003e \u003cHeadingWithLink element=\\\"h3\\\" props={props} /\u003e) satisfies\\n      ComponentType\u003cJSX.IntrinsicElements[\\\"h3\\\"]\u003e,\\n  },\\n})\\n```\\n\\n![标题链接](./md-heading-link.png)\\n\\n第二，我可以完全自己控制RSS的渲染过程了\\n\\n之前我采用的是[`gatsby-plugin-feed`](https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-plugin-feed)插件，通过定义GraphQL以及一些自定义的参数来生成RSS流。由于当时无法控制markdown的渲染结果，所以在生成RSS的时候感觉非常不自然。另外这个插件还不支持在开发时运行，所以我在开发时不能测试RSS的编译结果。现在，我可以自己创建一个`app/rss.xml/route.ts`的Route Handler，并和渲染文章页面一样，手动创建RSS的信息，以及各篇文章在RSS中的渲染结果。\\n\\n## 静态生成图片\\n\\n在编写整个网站的过程中，最大的挑战是**如何生成博客内容所需要的图片**。\\n\\n在所有能查找到的使用Next.js编写博客网站的文章和项目中（如[Next.js官方blog-starter模板](https://github.com/vercel/next.js/tree/canary/examples/blog-starter)），都是通过[`public`目录](https://nextjs.org/docs/pages/building-your-application/optimizing/static-assets)来引用图片等静态文件的。在编译时，`public`目录下的文件将会直接复制到构建目录下，在部署后，这些文件将可以直接通过`/`访问。\\n\\n但是这并不能满足我的需求。因为我的博客中，博客文章和图片都是放在`contents`下的同一个目录下的。而`contents`目录不能被公开访问。\\n\\n![博客文章和图片存放在同一个目录下](blog-article-dir.png)\\n\\n```md\\n\u003c!-- 在Markdown中通过和md文件的相对路径访问 --\u003e\\n![图片注释](./decompile.png)\\n```\\n\\n一个简单粗暴的解决方案是编写一个脚本，在编译后把所有静态文件从`contents`复制到`public`下，并在编译markdown时，修改所有的图片路径到编译后的路径中。但是这个做法也太不优雅了，有没有什么更好的、不需要自定义编译流程的方案呢？\\n\\n答案是[Route Handler](https://nextjs.org/docs/app/building-your-application/routing/router-handlers)。\\n\\nRoute Handler可以使开发者对某个路径编写自定义的处理逻辑。通过Route Handler，我可以定义一个专门用于获取静态文件的路径。我定义了一个`/articles/asset/[...path]`的route handler，当使用`GET`方法访问这个路径的时，handler将会去读取这个路径的对应的文件的内容，并以流的形式返回。Route handler同样支持`generateStaticParams`。通过这个方法，我遍历`contents`下的所有静态文件。这样，在编译时，Next.js将会把`contents`下所有文件的路径都传入这个Route Handler并运行，并将handler的结果（也就是文件内容）存放在`/articles/asset/contents/{文件相对于contents的路径}`下，发布后可以通过`/articles/asset/contents/{相对路径}`这个URL访问到图片。\\n\\n```ts title=\\\"src/asset/[...path]/route.ts\\\"\\nexport async function GET(request: NextRequest, { params }: { params: { path: string[] }}) {\\n  const fullPath = params.path.join(\\\"/\\\");\\n\\n  const fileStat = await stat(fullPath);\\n\\n  // 读取文件流并返回\\n  const stream = createReadStream(fullPath);\\n\\n  // @ts-ignore\\n  return new NextResponse(Readable.toWeb(stream), {\\n    headers: {\\n      \\\"Content-Type\\\": lookup(fullPath) ?? \\\"application/octet-stream\\\",\\n      \\\"Content-Length\\\": fileStat.size,\\n    },\\n  });\\n}\\n\\nexport async function generateStaticParams() {\\n\\n  // 遍历所有路径\\n  const paths: { path: string[] }[] = [];\\n\\n  async function rec(dir: string[]) {\\n    const dirents = await readdir(dir.join(\\\"/\\\"), { withFileTypes: true });\\n\\n    for (const dirent of dirents) {\\n      if (dirent.isDirectory()) {\\n        await rec(dir.concat(dirent.name));\\n        continue;\\n      }\\n\\n      paths.push({ path: dir.concat(dirent.name) });\\n    }\\n  }\\n\\n  await rec([\\\"contents\\\"]);\\n  return paths;\\n}\\n```\\n\\n![编译后的articles/asset路径，包含有所有的静态文件](articles-assets.png)\\n\\n现在图片有了，下一步是将markdown中对图片的引用地址修改到真实的编译后的地址。这实际上很简单，通过`rehype-react`将HTML的`\u003cimg\u003e`使用自己的组件渲染，然后在自己的组件中把`src`属性修改为真正的图片路径即可。\\n\\n```tsx title=\\\"src/components/article/ArticleContent.tsx\\\"\\n.use(rehypeReact, {\\n  // ..\\n  components: {\\n    // 使用自己的Image组件渲染HTML中的\u003cimg\u003e\\n    img: ((props) =\u003e \u003cArticleImageServer article={article} props={props} /\u003e) satisfies\\n      ComponentType\u003cJSX.IntrinsicElements[\\\"img\\\"]\u003e,\\n```\\n\\n我们使用了Next.js自带的`\u003cImage\u003e`组件来显示图片（在`ArticleImage`中）。这个组件有很多友好的功能，例如通过指定图片大小防止Layout Shift，在支持的环境下支持先加载更小的图片以更快的显示界面等。通过把`\u003cImage\u003e`和自定义的markdown流程相结合，我们就实现了显示图片的需求。\\n\\n## 多主题\\n\\n本次更新在样式方面最大的可见的更新就是支持了**多主题**。目前网站已经开放了12个主题可供选择，当然，我的美学能力远远不够自己设计这么多的主题，所有主题都是由[daisyui提供的](https://daisyui.com/docs/themes/)。\\n\\ndaisyui首先定义了一些固定的[颜色变量](https://daisyui.com/docs/colors/#-2)，这样在编码时，所有元素的颜色都可以通过颜色变量，而不是写死的颜色值，来指定。例如下面的代码就指定了一个背景颜色为`base-200`、文本颜色为`text-content`的`ul`组件。\\n\\n```tsx\\n\u003cul className=\\\"bg-base-200 text-base-content\\\"\u003e\\n\u003c/ul\u003e\\n```\\n\\n之后，daisyui通过识别`\u003chtml\u003e`组件的`data-theme`数据属性来获取到当前用户所选择的主题，并通过CSS选择器将对应的颜色的CSS变量修改为对应的主题的对应颜色变量的值。要想切换主题，只需要修改`\u003chtml\u003e`组件的`data-theme`数据属性即可。\\n\\n![data-theme](daisyui-data-theme.png)\\n\\n由于各个主题的颜色风格大相径庭，我原来博客的代码背景就不可以使用了。新的主页背景必须得能够自适应完全不同的颜色风格。要想实现这一点，新的背景必须是使用CSS动态生成的。\\n\\n于是我在网上找到了一个[绝妙的网站](https://alvarotrigo.com/blog/animated-backgrounds-css)，这个页面中提供了数十种纯用CSS实现的背景动画。我选中了其中的第三个Floating Squares。这个动画的背景色、以及各个方块的颜色都是由CSS的定义的，我需要做的，就是把其中的基础颜色替换为当前所使用的主题的CSS变量，这样，新的背景就能自动和当前所使用的主题相匹配了。\\n\\n```css {3,14}\\n.area {\\n  /* 使用daisyui的颜色变量 */\\n  background: linear-gradient(to bottom, hsl(var(--p)), hsl(var(--pf)));\\n  width: 100%;\\n  height: 100vh;\\n}\\n\\n.circles li {\\n  position: absolute;\\n  display: block;\\n  list-style: none;\\n  width: 20px;\\n  height: 20px;\\n  /* 使用daisyui的颜色变量 */\\n  background: hsl(var(--a));\\n  animation: animate 25s linear infinite;\\n  bottom: -150px;\\n}\\n```\\n\\n# 总结\\n\\n本来我一开始并没有打算完全重写整个项目，而是打算在已有的代码上做一些小修小补。但是当我真的打开了代码开始准备修改时，就发现了原来的代码中各个组件之间的依赖像是形成了蜘蛛网一样，完全无法下手。随便改任何一处已有的代码，都会涉及到巨量的其他代码，可谓牵一发而动全身。想起来2018年开始写Gatsby的ddadaal.me的时候，一大驱动力就是原有的屎山实在无法维护了。而5年后，当年的新代码变成了新的屎山，而被更新的代码取代之。果然，和世间其他万物一样，技术在发展，代码也是常用常新，需要不停地跟上时代的步伐。重写后的博客功能和以往一致，但是更轻、更快、更易维护，也算是一次成功的重构实践。\\n\\n\\n\",\"title\":\"博客的发展2：重写，重生\",\"date\":\"2023-06-17 22:10\",\"id\":\"blog-updates-2\",\"lang\":\"cn\",\"tags\":[\"blog\"],\"related\":[\"blog-updates-1\"],\"ignored_in_list\":\"$undefined\",\"hide_heading\":\"$undefined\",\"no_toc\":\"$undefined\",\"absolute_path\":\"$undefined\",\"last_updated\":\"$undefined\",\"wordCount\":6643,\"readingTime\":33.215,\"filePath\":\"contents/20230617-blog-updates-2/cn.md\"},\"langVersions\":[\"cn\"]}]]}]}]}],[\"$\",\"div\",null,{\"className\":\"animate-slide-up\",\"children\":[[\"$\",\"div\",null,{\"className\":\"max-w-7xl mx-auto p-4\",\"children\":\"$L17\"}],[\"$\",\"div\",null,{\"className\":\"max-w-7xl mx-auto p-4\",\"children\":[\"$\",\"$L18\",null,{\"relatedArticles\":[{\"id\":\"blog-updates-1\",\"langVersions\":[{\"excerpt\":\"\\n# 前言\\n\\n不知不觉，Gatsby博客已经上线了一年多。在这一年中，虽然从表面看起来博客变化不大，但是我一直在对博客做一些更新工作。特别是最近一个月，我对博客一些耽搁已久的问题进行了解决，使整个博客\",\"lang\":\"cn\",\"time\":\"2019-09-26 21:46:00 UTC+8\",\"title\":\"博客的发展一：RSS，国内托管……\",\"last_updated\":\"$undefined\",\"absolute_path\":\"$undefined\"}]}]}]}],[\"$\",\"div\",null,{\"className\":\"max-w-7xl mx-auto p-4\",\"children\":[\"$\",\"$L19\",null,{\"articleId\":\"blog-updates-2\",\"articleTitle\":\"博客的发展2：重写，重生\"}]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"1a:I{\"id\":\"7890\",\"chunks\":[\"309:static/chunks/70bb1395-d6354d9eb02b5992.js\",\"975:static/chunks/dc6764d5-acd07a2e286ee329.js\",\"344:static/chunks/2e69a9b8-691073cd158eaece.js\",\"301:static/chunks/8a8c2739-bbbebd44388102d4.js\",\"813:static/chunks/813-cf37a3c39e380b56.js\",\"647:static/chunks/647-5e2b1bd38dd79bde.js\",\"861:static/chunks/861-50e3e01387b52bfc.js\",\"94:static/chunks/app/about/[id]/[[...lang]]/page-a09d09b63b5b9ec6.js\"],\"name\":\"Gallery\",\"async\":false}\n25:I{\"id\":\"6707\",\"chunks\":[\"309:static/chunks/70bb139"])</script><script>self.__next_f.push([1,"5-d6354d9eb02b5992.js\",\"975:static/chunks/dc6764d5-acd07a2e286ee329.js\",\"344:static/chunks/2e69a9b8-691073cd158eaece.js\",\"301:static/chunks/8a8c2739-bbbebd44388102d4.js\",\"813:static/chunks/813-cf37a3c39e380b56.js\",\"647:static/chunks/647-5e2b1bd38dd79bde.js\",\"861:static/chunks/861-50e3e01387b52bfc.js\",\"94:static/chunks/app/about/[id]/[[...lang]]/page-a09d09b63b5b9ec6.js\"],\"name\":\"ArticleToc\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"17:[\"$\",\"div\",null,{\"className\":\"flex flex-row space-x-4\",\"children\":[[\"$\",\"div\",null,{\"className\":\"prose max-w-full lg:w-[75%]\",\"children\":[\"$\",\"$L1a\",null,{\"withCaption\":true,\"id\":\"blog-updates-2\",\"children\":[[\"$\",\"h1\",null,{\"id\":\"鸽了4年的更新\",\"children\":[[\"$\",\"a\",\"鸽了4年的更新\",{\"href\":\"#鸽了4年的更新\",\"className\":\"mr-2\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 512 512\",\"className\":\"inline-block\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z\",\"children\":\"$undefined\"}]]],\"style\":{\"color\":\"$undefined\"},\"height\":16,\"width\":16,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}],[\"鸽了4年的更新\"]]}],\"\\n\",[\"$\",\"p\",\"h-3\",{\"children\":[\"4年前的\",[\"$\",\"a\",\"h-4\",{\"href\":\"/articles/blog-updates-1\",\"children\":[\"博客的发展1\"]}],\"中，我提到了当时博客的几个问题。后来，我通过一个非常hack的方式解决了中文字数统计的问题（\",[\"$\",\"a\",\"h-5\",{\"href\":\"/articles/fix-gatsby-transformer-remark-chinese-word-count\",\"children\":[\"修复gatsby-transformer-remark插件中文词数统计错误问题\"]}],\"，但是最重要的\",[\"$\",\"strong\",\"h-6\",{\"children\":[\"重构样式和完善UI设计\"]}],\"的问题一直搁置，并且随着时间和技术的发展，项目也遇到了不少的问题，例如\"]}],\"\\n\",[\"$\",\"ol\",\"h-7\",{\"children\":[\"\\n\",[\"$\",\"li\",\"h-8\",{\"children\":[\"样式的混乱使得我一直使用老的bootstrap v4版本，无法升级到最新的bootstrap版本\"]}],\"\\n\",[\"$\",\"li\",\"h-9\",{\"children\":[\"gatsby生态更新太快，很多组件我无法理解它们具体做了什么工作\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"h-10\",{\"children\":[\"5月底研究生答辩完后，本来计划好的旅行，在我出发的前一天被我二阳直接推迟了。阳了后基本上也就只能在宿舍呆着。呆着也是呆着，我想起来博客这个”我的门面“。这三年博客本身基本没有任何更新，基本属于年久失修的状态。于是我决定给我的博客来个大手术。\"]}],\"\\n\",[\"$\",\"h1\",null,{\"id\":\"新博客的亮点\",\"children\":[[\"$\",\"a\",\"新博客的亮点\",{\"href\":\"#新博客的亮点\",\"className\":\"mr-2\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 512 512\",\"className\":\"inline-block\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z\",\"children\":\"$undefined\"}]]],\"style\":{\"color\":\"$undefined\"},\"height\":16,\"width\":16,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}],[\"新博客的亮点\"]]}],\"\\n\",[\"$\",\"ul\",\"h-12\",{\"children\":[\"\\n\",[\"$\",\"li\",\"h-13\",{\"children\":[\"完全使用Next.js编写\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"h-14\",{\"children\":[\"由于研究生期间的项目（\",[\"$\",\"a\",\"h-15\",{\"href\":\"https://github.com/PKUHPC/SCOW\",\"children\":[\"PKUHPC/SCOW\"]}],\"）是完全使用Next.js编写的，我对Next.js非常熟悉。而Next.js本身也是一个非常成熟的React框架，并且也支持\",[\"$\",\"a\",\"h-16\",{\"href\":\"https://nextjs.org/docs/app/building-your-application/deploying/static-exports\",\"children\":[\"导出为静态网站\"]}],\"的功能，并且有很多网站均使用了Next.js来作为它们的主页、博客等信息发布平台，所以我在想是否能重用之前的经验，用Next.js来搭建新的网站。一顿操作下来，除了遇到了一些和Gatsby的思路不太一样的地方，整个体验还是挺不错的。\"]}],\"\\n\",[\"$\",\"ul\",\"h-17\",{\"children\":[\"\\n\",[\"$\",\"li\",\"h-18\",{\"children\":[\"完全兼容原有博客\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"h-19\",{\"children\":[\"新的网站和原有博客在功能性、整体布局以及各个页面的URL方面都完全一致，原有的所有使用习惯和URL都可以直接使用，原来的所有功能现在都仍然支持，包括但不限于多语言页面、多语言文章、RSS等。这才是\",[\"$\",\"strong\",\"h-20\",{\"children\":[\"重写\"]}],\"的真正含义吧：所有代码都完全重写了，但是不会影响任何已有的使用体验。\"]}],\"\\n\",[\"$\",\"ul\",\"h-21\",{\"children\":[\"\\n\",[\"$\",\"li\",\"h-22\",{\"children\":[\"使用Tailwind编写样式，去除CSS in JS方案\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"h-23\",{\"children\":[\"这是本次重写最重要的地方。我原来是CSS in JS的狂热爱好者，认为使用JS编写网站的所有方便是网页开发的最终目标。现在，我虽然仍然认为CSS in JS方案带来的灵活性是所有其他方案都不可比拟的，但是我也认识到很多情况下样式并不需要那么高的灵活性。另外，由于样式最终还是要到达CSS的层次，在把CSS in JS和其他第三方样式解决方案（例如之前用的bootstrap）集成的过程中，需要大量代码来将两套完全独立的样式系统整合起来。这也是之前样式代码极度混乱的根本原因。\"]}],\"\\n\",[\"$\",\"p\",\"h-24\",{\"children\":[\"例如，原来代码中的导航栏组件同时使用了bootstrap的\",[\"$\",\"code\",\"h-25\",{\"children\":[\"Navbar\"]}],\"组件，并通过styled-components在这个组件的基础上自定义了样式。在自定义样式时，还引用了TS中定义的样式变量。有的组件甚至为了使用bootstrap的定义在\",[\"$\",\"code\",\"h-26\",{\"children\":[\"SCSS\"]}],\"中的变量，故还引用了自定义的SCSS文件。而由于有的变量是定义在SCSS中，有的是在TS代码中的，所有很多变量（例如颜色）都需要定义两次。\"]}],\"\\n\",[\"$\",\"div\",\"h-27\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"pre\",\"h-28\",{\"data-language\":\"ts\",\"data-theme\":\"default\",\"children\":[[\"$\",\"code\",\"h-29\",{\"data-language\":\"ts\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-30\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-31\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"import\"]}],[\"$\",\"span\",\"h-32\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" { \"]}],[\"$\",\"span\",\"h-33\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"Navbar\"]}],[\"$\",\"span\",\"h-34\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" } \"]}],[\"$\",\"span\",\"h-35\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"from\"]}],[\"$\",\"span\",\"h-36\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-37\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"reactstrap\\\"\"]}],[\"$\",\"span\",\"h-38\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\";\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-39\",{\"className\":\"line\",\"children\":[\" \"]}],\"\\n\",[\"$\",\"span\",\"h-40\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-41\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"const\"]}],[\"$\",\"span\",\"h-42\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-43\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"StyledNavbar\"]}],[\"$\",\"span\",\"h-44\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-45\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-46\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-47\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"styled\"]}],[\"$\",\"span\",\"h-48\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-49\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"Navbar\"]}],[\"$\",\"span\",\"h-50\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\")\"]}],[\"$\",\"span\",\"h-51\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"`\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-52\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-53\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"  \u0026\u0026 {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-54\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-55\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"    max-width: \"]}],[\"$\",\"span\",\"h-56\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"$${\"]}],[\"$\",\"span\",\"h-57\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"widths\"]}],[\"$\",\"span\",\"h-58\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-59\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"mainContent\"]}],[\"$\",\"span\",\"h-60\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"}\"]}],[\"$\",\"span\",\"h-61\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"px;\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-62\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-63\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"    margin-left: auto;\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-64\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-65\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"    margin-right: auto;\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-66\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-67\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"    padding: 4px 8px;\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-68\",{\"className\":\"line\",\"children\":[\" \"]}],\"\\n\",[\"$\",\"span\",\"h-69\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-70\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"    transition: width 0.2s ease-in-out;\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-71\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-72\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"  }\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-73\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-74\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"`\"]}],[\"$\",\"span\",\"h-75\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\";\"]}]]}]]}]]}]]}],\"\\n\",[\"$\",\"p\",\"h-76\",{\"children\":[\"另外，我也认识到以传统HTML/CSS来布局和样式的一些优势，例如将UI与具体的开发框架解耦、更好的性能、以及甚至能在不启用JS的环境下展示页面等。当前，以\",[\"$\",\"a\",\"h-77\",{\"href\":\"https://tailwindcss.com/\",\"children\":[\"tailwind\"]}],\"为主的以传统的HTML/CSS为基础的样式方案非常火，这次我也直接采用tailwind以及基于tailwind的纯HTML/CSS组件库\",[\"$\",\"a\",\"h-78\",{\"href\":\"https://daisyui.com/\",\"children\":[\"daisyui\"]}],\"来编写新的博客，并体验到了前所未有的开发效率和开发体验。直接写语义化的类型名，确实比写JS代码要方便太多了。\"]}],\"\\n\",[\"$\",\"p\",\"h-79\",{\"children\":[\"$L1b\"]}],\"\\n\",[\"$\",\"h1\",null,{\"id\":\"实现\",\"children\":[[\"$\",\"a\",\"实现\",{\"href\":\"#实现\",\"className\":\"mr-2\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 512 512\",\"className\":\"inline-block\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z\",\"children\":\"$undefined\"}]]],\"style\":{\"color\":\"$undefined\"},\"height\":16,\"width\":16,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}],[\"实现\"]]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"完全采用nextjs-app-router\",\"children\":[[\"$\",\"a\",\"完全采用nextjs-app-router\",{\"href\":\"#完全采用nextjs-app-router\",\"className\":\"mr-2\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 512 512\",\"className\":\"inline-block\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z\",\"children\":\"$undefined\"}]]],\"style\":{\"color\":\"$undefined\"},\"height\":16,\"width\":16,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}],[\"完全采用Next.js App Router\"]]}],\"\\n\",[\"$\",\"p\",\"h-83\",{\"children\":[\"Next.js的\",[\"$\",\"a\",\"h-84\",{\"href\":\"https://nextjs.org/docs/app\",\"children\":[\"App Router\"]}],\"功能可谓是万众期待，虽说有评论说这个功能（以及后续的Server Actions）把Next.js\",[\"$\",\"a\",\"h-85\",{\"href\":\"https://www.youtube.com/watch?v=10Yt5vRimNI\",\"children\":[\"变成了PHP\"]}],\"，但是不可否认的是，App Router极大地提高了开发体验和灵活度。\"]}],\"\\n\",[\"$\",\"p\",\"h-86\",{\"children\":[\"在新的博客中，App Router带来的各种优势里，让我最受用的是以下两点：\"]}],\"\\n\",[\"$\",\"ul\",\"h-87\",{\"children\":[\"\\n\",[\"$\",\"li\",\"h-88\",{\"children\":[\"React Server Component （RSC，服务器端组件）\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"h-89\",{\"children\":[\"React Server Component (RSC)实际上是React的概念，在2020年就提出来了（\",[\"$\",\"a\",\"h-90\",{\"href\":\"https://legacy.reactjs.org/blog/2020/12/21/data-fetching-with-react-server-components.html\",\"children\":[\"Introducing Zero-Bundle-Size React Server Components - React Blog\"]}],\"）。简单来说，原来的React的组件都是运行在客户端的。浏览器首先把项目代码下载下来，然后再浏览器中运行代码，这些代码将会通过浏览器端DOM API在浏览器上画出UI，并处理用户的交互。而React Server Component允许用户编写\",[\"$\",\"strong\",\"h-91\",{\"children\":[\"运行在服务器端的\"]}],\"React组件。而Next.js 13第一次实现了这一概念。\"]}],\"\\n\",[\"$\",\"p\",\"h-92\",{\"children\":[\"这颠覆了传统的前端开发模式。代码在服务器端运行的，这就意味着组件可以直接执行在服务器端才能执行的代码，例如访问数据库等，而不再需要单独的一套API来实现客户端和服务器端之间的交互。\"]}],\"\\n\",[\"$\",\"p\",\"h-93\",{\"children\":[\"在新的博客中，所有博客的内容都是以本地文件的方式存放在\",[\"$\",\"code\",\"h-94\",{\"children\":[\"contents\"]}],\"目录下。所有的页面会去读取自己所需要的数据，之后将这些数据渲染出来。\"]}],\"\\n\",[\"$\",\"p\",\"h-95\",{\"children\":[\"假设我们的网页不是一个静态网站，而是一个传统的React+后端的模式，那要实现这个功能，我们首先需要设计一个API来获取后端的数据，在后端，我们编写一个服务器实现这个API，然后在前端，我们通过\",[\"$\",\"code\",\"h-96\",{\"children\":[\"fetch\"]}],\"调用这个API，拿到数据后在UI上渲染出来。\"]}],\"\\n\",[\"$\",\"div\",\"h-97\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"pre\",\"h-98\",{\"data-language\":\"ts\",\"data-theme\":\"default\",\"children\":[[\"$\",\"code\",\"h-99\",{\"data-language\":\"ts\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-100\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-101\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// 后端，编写API\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-102\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-103\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"const\"]}],[\"$\",\"span\",\"h-104\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-105\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"app\"]}],[\"$\",\"span\",\"h-106\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-107\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-108\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-109\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"express\"]}],[\"$\",\"span\",\"h-110\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"();\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-111\",{\"className\":\"line\",\"children\":[\" \"]}],\"\\n\",[\"$\",\"span\",\"h-112\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-113\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"app\"]}],[\"$\",\"span\",\"h-114\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-115\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"get\"]}],[\"$\",\"span\",\"h-116\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-117\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"/articles/:id\\\"\"]}],[\"$\",\"span\",\"h-118\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\", \"]}],[\"$\",\"span\",\"h-119\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"async\"]}],[\"$\",\"span\",\"h-120\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" (\"]}],[\"$\",\"span\",\"h-121\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"req\"]}],[\"$\",\"span\",\"h-122\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\", \"]}],[\"$\",\"span\",\"h-123\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"res\"]}],[\"$\",\"span\",\"h-124\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") \"]}],[\"$\",\"span\",\"h-125\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"=\u003e\"]}],[\"$\",\"span\",\"h-126\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-127\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-128\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-129\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"const\"]}],[\"$\",\"span\",\"h-130\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-131\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"content\"]}],[\"$\",\"span\",\"h-132\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-133\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-134\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-135\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"await\"]}],[\"$\",\"span\",\"h-136\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-137\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"readContent\"]}],[\"$\",\"span\",\"h-138\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-139\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"req\"]}],[\"$\",\"span\",\"h-140\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-141\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"params\"]}],[\"$\",\"span\",\"h-142\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-143\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"id\"]}],[\"$\",\"span\",\"h-144\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\");\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-145\",{\"className\":\"line\",\"children\":[\" \"]}],\"\\n\",[\"$\",\"span\",\"h-146\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-147\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-148\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"res\"]}],[\"$\",\"span\",\"h-149\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-150\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"send\"]}],[\"$\",\"span\",\"h-151\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-152\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"content\"]}],[\"$\",\"span\",\"h-153\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\");\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-154\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-155\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"});\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-156\",{\"className\":\"line\",\"children\":[\" \"]}],\"\\n\",[\"$\",\"span\",\"h-157\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-158\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"app\"]}],[\"$\",\"span\",\"h-159\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-160\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"listen\"]}],[\"$\",\"span\",\"h-161\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-162\",{\"style\":{\"color\":\"#D19A66\"},\"children\":[\"5000\"]}],[\"$\",\"span\",\"h-163\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\", () \"]}],[\"$\",\"span\",\"h-164\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"=\u003e\"]}],[\"$\",\"span\",\"h-165\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" {});\"]}]]}]]}]]}]]}],\"\\n\",[\"$\",\"div\",\"h-166\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"pre\",\"h-167\",{\"data-language\":\"tsx\",\"data-theme\":\"default\",\"children\":[[\"$\",\"code\",\"h-168\",{\"data-language\":\"tsx\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-169\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-170\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// 前端，通过fetch API获取数据\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-171\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-172\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"export\"]}],[\"$\",\"span\",\"h-173\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-174\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"const\"]}],[\"$\",\"span\",\"h-175\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-176\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"Page\"]}],[\"$\",\"span\",\"h-177\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-178\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-179\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" ({ \"]}],[\"$\",\"span\",\"h-180\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"id\"]}],[\"$\",\"span\",\"h-181\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" }) \"]}],[\"$\",\"span\",\"h-182\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"=\u003e\"]}],[\"$\",\"span\",\"h-183\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-184\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-185\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-186\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"const\"]}],[\"$\",\"span\",\"h-187\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" [\"]}],[\"$\",\"span\",\"h-188\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"data\"]}],[\"$\",\"span\",\"h-189\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\", \"]}],[\"$\",\"span\",\"h-190\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"setData\"]}],[\"$\",\"span\",\"h-191\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"] \"]}],[\"$\",\"span\",\"h-192\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-193\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-194\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"useState\"]}],[\"$\",\"span\",\"h-195\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"();\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-196\",{\"className\":\"line\",\"children\":[\" \"]}],\"\\n\",[\"$\",\"span\",\"h-197\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-198\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-199\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"useEffect\"]}],[\"$\",\"span\",\"h-200\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(() \"]}],[\"$\",\"span\",\"h-201\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"=\u003e\"]}],[\"$\",\"span\",\"h-202\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-203\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-204\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    \"]}],[\"$\",\"span\",\"h-205\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"fetch\"]}],[\"$\",\"span\",\"h-206\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-207\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"http://localhost:5000/articles/\\\"\"]}],[\"$\",\"span\",\"h-208\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-209\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"+\"]}],[\"$\",\"span\",\"h-210\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-211\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"id\"]}],[\"$\",\"span\",\"h-212\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\")\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-213\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-214\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"      .\"]}],[\"$\",\"span\",\"h-215\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"then\"]}],[\"$\",\"span\",\"h-216\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"((\"]}],[\"$\",\"span\",\"h-217\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"x\"]}],[\"$\",\"span\",\"h-218\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") \"]}],[\"$\",\"span\",\"h-219\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"=\u003e\"]}],[\"$\",\"span\",\"h-220\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-221\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"x\"]}],[\"$\",\"span\",\"h-222\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-223\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"json\"]}],[\"$\",\"span\",\"h-224\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"())\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-225\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-226\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"      .\"]}],[\"$\",\"span\",\"h-227\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"then\"]}],[\"$\",\"span\",\"h-228\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"((\"]}],[\"$\",\"span\",\"h-229\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"x\"]}],[\"$\",\"span\",\"h-230\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") \"]}],[\"$\",\"span\",\"h-231\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"=\u003e\"]}],[\"$\",\"span\",\"h-232\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-233\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"setData\"]}],[\"$\",\"span\",\"h-234\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-235\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"x\"]}],[\"$\",\"span\",\"h-236\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"));\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-237\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-238\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  }, []);\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-239\",{\"className\":\"line\",\"children\":[\" \"]}],\"\\n\",[\"$\",\"span\",\"h-240\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-241\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-242\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"return\"]}],[\"$\",\"span\",\"h-243\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-244\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"data\"]}],[\"$\",\"span\",\"h-245\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-246\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"?\"]}],[\"$\",\"span\",\"h-247\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" (\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-248\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-249\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    \u003c\"]}],[\"$\",\"span\",\"h-250\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"ArticleContent\"]}],[\"$\",\"span\",\"h-251\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-252\",{\"style\":{\"color\":\"#D19A66\",\"fontStyle\":\"italic\"},\"children\":[\"data\"]}],[\"$\",\"span\",\"h-253\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-254\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"{\"]}],[\"$\",\"span\",\"h-255\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"data\"]}],[\"$\",\"span\",\"h-256\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"}\"]}],[\"$\",\"span\",\"h-257\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"/\u003e\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-258\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-259\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  ) \"]}],[\"$\",\"span\",\"h-260\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\":\"]}],[\"$\",\"span\",\"h-261\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \u003c\"]}],[\"$\",\"span\",\"h-262\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Loading\"]}],[\"$\",\"span\",\"h-263\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" /\u003e;\"]}]]}]]}]]}]]}],\"\\n\",[\"$\",\"p\",\"h-264\",{\"children\":[\"然后通过RSC，我们可以直接使用React来实现这个需求：\"]}],\"\\n\",[\"$\",\"div\",\"h-265\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"pre\",\"h-266\",{\"data-language\":\"tsx\",\"data-theme\":\"default\",\"children\":[[\"$\",\"code\",\"h-267\",{\"data-language\":\"tsx\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-268\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-269\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"export\"]}],[\"$\",\"span\",\"h-270\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-271\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"default\"]}],[\"$\",\"span\",\"h-272\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-273\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"async\"]}],[\"$\",\"span\",\"h-274\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" ({ \"]}],[\"$\",\"span\",\"h-275\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"params\"]}],[\"$\",\"span\",\"h-276\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" }: \"]}],[\"$\",\"span\",\"h-277\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Props\"]}],[\"$\",\"span\",\"h-278\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") \"]}],[\"$\",\"span\",\"h-279\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"=\u003e\"]}],[\"$\",\"span\",\"h-280\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-281\",{\"className\":\"line\",\"children\":[\" \"]}],\"\\n\",[\"$\",\"span\",\"h-282\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-283\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-284\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"const\"]}],[\"$\",\"span\",\"h-285\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-286\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"data\"]}],[\"$\",\"span\",\"h-287\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-288\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-289\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-290\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"await\"]}],[\"$\",\"span\",\"h-291\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-292\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"readContent\"]}],[\"$\",\"span\",\"h-293\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-294\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"params\"]}],[\"$\",\"span\",\"h-295\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-296\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"id\"]}],[\"$\",\"span\",\"h-297\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\");\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-298\",{\"className\":\"line\",\"children\":[\" \"]}],\"\\n\",[\"$\",\"span\",\"h-299\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-300\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-301\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"return\"]}],[\"$\",\"span\",\"h-302\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" (\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-303\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-304\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    \u003c\"]}],[\"$\",\"span\",\"h-305\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"ArticleContent\"]}],[\"$\",\"span\",\"h-306\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-307\",{\"style\":{\"color\":\"#D19A66\",\"fontStyle\":\"italic\"},\"children\":[\"data\"]}],[\"$\",\"span\",\"h-308\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-309\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"{\"]}],[\"$\",\"span\",\"h-310\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"data\"]}],[\"$\",\"span\",\"h-311\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"}\"]}],[\"$\",\"span\",\"h-312\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" /\u003e\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-313\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-314\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  );\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-315\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-316\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"};\"]}]]}]]}]]}]]}],\"\\n\",[\"$\",\"p\",\"h-317\",{\"children\":[\"这区别实在太大了。不再需要一个单独的后端项目，不再需要复杂的API设计、管理、调用、维护，从获取数据到渲染UI的过程非常直观。甚至说如果这个\",[\"$\",\"code\",\"h-318\",{\"children\":[\"ArticleContent\"]}],\"组件不需要用户交互的话，用户甚至不需要下载这个组件的代码，浏览器不启用JS就能访问网页。\"]}],\"\\n\",[\"$\",\"p\",\"h-319\",{\"children\":[\"从某种角度来说，App Router确实是把React变成了PHP这类传统的服务器端渲染的方案。但是，毕竟Web前端是JS的世界，PHP等不能直接使用后端语言编写前端的交互逻辑，只能做一些简单的模板替换的功能，一旦涉及一些复杂的逻辑和交互，就不能不重新使用JS，而这就要求两套不同的语言，两套不同的工具链以及两套不同的生态，以及前后端之间的交互。而Next.js是以前端为基础，用一种非常自然的方式将前后端融合在一起，用同一套生态编写从前端交互到后端逻辑整个链条，实际上是一套和传统完全不一样的方案。\"]}],\"\\n\",[\"$\",\"ul\",\"h-320\",{\"children\":[\"\\n\",[\"$\",\"li\",\"h-321\",{\"children\":[[\"$\",\"a\",\"h-322\",{\"href\":\"https://nextjs.org/docs/app/building-your-application/routing/colocation#safe-colocation-by-default\",\"children\":[\"Colocation\"]}],\"，即\",[\"$\",\"strong\",\"h-323\",{\"children\":[\"把相似用处的文件放在相近的位置\"]}],\"。\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"h-324\",{\"children\":[\"在原来的\",[\"$\",\"code\",\"h-325\",{\"children\":[\"pages\"]}],\"目录下，每个文件定义了一个页面。例如\",[\"$\",\"code\",\"h-326\",{\"children\":[\"/pages/test.tsx\"]}],\"和\",[\"$\",\"code\",\"h-327\",{\"children\":[\"/pages/test/test2.tsx\"]}],\"就分别对应\",[\"$\",\"code\",\"h-328\",{\"children\":[\"/test\"]}],\"和\",[\"$\",\"code\",\"h-329\",{\"children\":[\"/test/test2\"]}],\"两个路径。但是，在绝大多数情况下，一个页面中的代码都不能在一个代码中完全写完。对于一些公用的组件，例如布局的header, footer等，我们可以把这些代码放在类似\",[\"$\",\"code\",\"h-330\",{\"children\":[\"layouts\"]}],\"、\",[\"$\",\"code\",\"h-331\",{\"children\":[\"components\"]}],\"的目录下，这些组件不涉及任何业务逻辑，可由具体的业务页面引用并组装。\"]}],\"\\n\",[\"$\",\"p\",\"h-332\",{\"children\":[\"$L1c\"]}],\"\\n\",[\"$\",\"p\",\"h-334\",{\"children\":[\"但是还有一些组件，它只在某个特定的页面下有用，例如为了完成某个特定的业务逻辑的组件。这种组件一般来说又是过于复杂，不能把它直接写在页面文件中，但是如果把这些组件直接放在页面组件文件的旁边，那么它们会被当成一个新的页面。\"]}],\"\\n\",[\"$\",\"p\",\"h-335\",{\"children\":[\"由于在原来的事件中，我会创建一个\",[\"$\",\"code\",\"h-336\",{\"children\":[\"pageComponents\"]}],\"目录用于存放这种位于真正的基础组件（\",[\"$\",\"code\",\"h-337\",{\"children\":[\"components\"]}],\"）和页面（\",[\"$\",\"code\",\"h-338\",{\"children\":[\"pages\"]}],\"）之间的组件。例如在下图中，\",[\"$\",\"code\",\"h-339\",{\"children\":[\"pageComponents/admin/AllUsersTable.tsx\"]}],\"就是一个比较复杂的、涉及到业务的组件，它只会在\",[\"$\",\"code\",\"h-340\",{\"children\":[\"pages/admin/users.tsx\"]}],\"中被使用。\"]}],\"\\n\",[\"$\",\"p\",\"h-341\",{\"children\":[\"$L1d\"]}],\"\\n\",[\"$\",\"p\",\"h-343\",{\"children\":[\"除了这一方案，我也看到了一些项目采用的是和\",[\"$\",\"code\",\"h-344\",{\"children\":[\"Angular\"]}],\"类似的\",[\"$\",\"code\",\"h-345\",{\"children\":[\"Module\"]}],\"概念，把某个功能相关的代码都放在一个\",[\"$\",\"code\",\"h-346\",{\"children\":[\"modules/模块名\"]}],\"目录下，然后在\",[\"$\",\"code\",\"h-347\",{\"children\":[\"pages\"]}],\"目录下引用模块下的页面组件。\"]}],\"\\n\",[\"$\",\"p\",\"h-348\",{\"children\":[\"但是不管是什么方案，实际上都是在为\",[\"$\",\"strong\",\"h-349\",{\"children\":[\"一个文件=一个路径\"]}],\"这一概念打补丁。这一概念看着很美好，但是只要项目复杂度稍微高一点就会遇到上述的问题。同一个功能，有的代码在\",[\"$\",\"code\",\"h-350\",{\"children\":[\"pages\"]}],\"下，有的在\",[\"$\",\"code\",\"h-351\",{\"children\":[\"pageComponents\"]}],\"下，这会使得文件非常混乱。\"]}],\"\\n\",[\"$\",\"p\",\"h-352\",{\"children\":[\"而\",[\"$\",\"code\",\"h-353\",{\"children\":[\"App Router\"]}],\"解决了这一个问题。在\",[\"$\",\"code\",\"h-354\",{\"children\":[\"App Router\"]}],\"下，路径由目录（而文件）定义。每个目录下，只有一些特殊的文件会被Next.js处理（例如\",[\"$\",\"code\",\"h-355\",{\"children\":[\"page.tsx\"]}],\"为这个页面的组件，\",[\"$\",\"code\",\"h-356\",{\"children\":[\"layout.tsx\"]}],\"为这个路径下的公共布局，其他文件Next.js直接忽略，都由自己组织。这就使得我们可以把一个页面所需要的组件拆分出来，放在和页面相同的目录下。\"]}],\"\\n\",[\"$\",\"p\",\"h-357\",{\"children\":[\"例如在现在的项目中，\",[\"$\",\"code\",\"h-358\",{\"children\":[\"app/articles/[[...params]]\"]}],\"包括了文章列表页面的定义，其中就需要一个文件列表页面的布局的组件\",[\"$\",\"code\",\"h-359\",{\"children\":[\"ArticleList\"]}],\"。这个组件很明显需要被拆分出来。在原来的实践中，这种组件就应该被放在\",[\"$\",\"code\",\"h-360\",{\"children\":[\"pageComponents\"]}],\"或者\",[\"$\",\"code\",\"h-361\",{\"children\":[\"components\"]}],\"里。但是这个组件实际上只会在这个路径下被使用，所以使用\",[\"$\",\"code\",\"h-362\",{\"children\":[\"App Router\"]}],\"后，我们就可以把这个组件放在这个页面的文件（\",[\"$\",\"code\",\"h-363\",{\"children\":[\"page.tsx\"]}],\"）的旁边。这样，我们保证了所有这个页面相关的业务逻辑（公共组件不包含业务逻辑）都存放在这个路径下，这对代码后续维护、多人合作开发等方面都有非常多的好处。\"]}],\"\\n\",[\"$\",\"p\",\"h-364\",{\"children\":[\"$L1e\"]}],\"\\n\",[\"$\",\"p\",\"h-366\",{\"children\":[\"App Router所带来的优点远不止这两点。由于本博客是个静态的博客，且整体布局较为简单，所以并没有用上使用Next.js的动态功能，但是在我其他的项目中，App Router的\",[\"$\",\"strong\",\"h-367\",{\"children\":[\"嵌套布局\"]}],\"（\",[\"$\",\"a\",\"h-368\",{\"href\":\"https://nextjs.org/docs/app/building-your-application/routing/pages-and-layouts#nesting-layouts\",\"children\":[\"Nested Layout\"]}],\"）、Server Actions带来的\",[\"$\",\"strong\",\"h-369\",{\"children\":[\"直接在前端代码中调用后端逻辑的能力\"]}],\"都极大地提高了网站开发的效率。\"]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"nextjs静态生成\",\"children\":[[\"$\",\"a\",\"nextjs静态生成\",{\"href\":\"#nextjs静态生成\",\"className\":\"mr-2\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 512 512\",\"className\":\"inline-block\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z\",\"children\":\"$undefined\"}]]],\"style\":{\"color\":\"$undefined\"},\"height\":16,\"width\":16,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}],[\"Next.js静态生成\"]]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"静态网站\",\"children\":[[\"$\",\"a\",\"静态网站\",{\"href\":\"#静态网站\",\"className\":\"mr-2\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 512 512\",\"className\":\"inline-block\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z\",\"children\":\"$undefined\"}]]],\"style\":{\"color\":\"$undefined\"},\"height\":16,\"width\":16,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}],[\"静态网站\"]]}],\"\\n\",[\"$\",\"p\",\"h-372\",{\"children\":[\"我之前使用Next.js的项目都是传统的前端应用，也就是编译为前端+一个提供服务器端渲染（SSR）能力的Express后端的传统的Next.js项目。但是Next.js一直还支持直接生成只包括HTML/CSS/JS的静态网站的能力。\"]}],\"\\n\",[\"$\",\"p\",\"h-373\",{\"children\":[\"传统的单页应用（SPA）会把整个应用编译为一个（或者多个）JS bundle以及一个实际上并不包含真正UI的模板HTML。用户访问任何路径时，都会下载这个HTML。这个HTML的唯一作用就是提供一个根DOM组件以及引用编译好的JS Bundle。JS Bundle将会被自动下载，通过浏览器的History API在浏览器端实现路由功能，并负责通过DOM API渲染用户的UI。\"]}],\"\\n\",[\"$\",\"p\",\"h-374\",{\"children\":[\"$L1f\"]}],\"\\n\",[\"$\",\"p\",\"h-376\",{\"children\":[\"而Next.js生成的静态网站和Gatsby, Hugo等静态网站生成器相同，会在编译时对每个路径获取这个路径所需要的数据，并将这些数据渲染成HTML。渲染出的结果中，每个路径都有对应的HTML。比如在下图中，\",[\"$\",\"code\",\"h-377\",{\"children\":[\"about/me.html\"]}],\"就对应了\",[\"$\",\"code\",\"h-378\",{\"children\":[\"/about/me\"]}],\"路径，并且其中包含了在服务器端渲染后的UI。用户访问路径时，会直接获取这个HTML，并直接就能渲染出已经渲染好的内容，无需等待下载和执行JS Bundle的过程。\"]}],\"\\n\",[\"$\",\"p\",\"h-379\",{\"children\":[\"$L20\"]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"和gatsby的区别\",\"children\":[[\"$\",\"a\",\"和gatsby的区别\",{\"href\":\"#和gatsby的区别\",\"className\":\"mr-2\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 512 512\",\"className\":\"inline-block\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z\",\"children\":\"$undefined\"}]]],\"style\":{\"color\":\"$undefined\"},\"height\":16,\"width\":16,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}],[\"和Gatsby的区别\"]]}],\"\\n\",[\"$\",\"p\",\"h-382\",{\"children\":[\"在我上次重写ddadaal.me时，我选用了Gatsby，因为当时Gatsby的生态更加的成熟，有大量现成的模板、插件和教程可供使用和参考。几年后的现在，Next.js的静态生成功能也是非常成熟了，并也提供了很多的API来实现静态网站渲染的功能。但是和Gatsby项目，Next.js提供静态网站渲染的API的思路有所不同。\"]}],\"\\n\",[\"$\",\"p\",\"h-383\",{\"children\":[\"Gatsby主要通过\",[\"$\",\"code\",\"h-384\",{\"children\":[\"GraphQL\"]}],\"让开发者访问数据(\",[\"$\",\"a\",\"h-385\",{\"href\":\"https://www.gatsbyjs.com/docs/graphql/\",\"children\":[\"Gatsby and GraphQL\"]}],\")。开发者在页面中可以声明这个页面所需要的数据的GraphQL查询，并在页面中通过props访问读取到的数据以及渲染UI。在编译时，gatsby将会负责运行这些查询，并将数据传递给需要数据的组件。而可以访问到的数据，则可以通过插件或者自定义\",[\"$\",\"code\",\"h-386\",{\"children\":[\"gatsby-node.ts\"]}],\"脚本来向后端的GraphQL服务器中增加数据节点。\"]}],\"\\n\",[\"$\",\"div\",\"h-387\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"pre\",\"h-388\",{\"data-language\":\"ts\",\"data-theme\":\"default\",\"children\":[[\"$\",\"code\",\"h-389\",{\"data-language\":\"ts\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-390\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-391\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// https://github.com/ddadaal/ddadaal.me/blob/57fe926eb0/src/pages/slides.tsx\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-392\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-393\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// 声明需要的数据\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-394\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-395\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"export\"]}],[\"$\",\"span\",\"h-396\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-397\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"const\"]}],[\"$\",\"span\",\"h-398\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-399\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"query\"]}],[\"$\",\"span\",\"h-400\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-401\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-402\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-403\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"graphql\"]}],[\"$\",\"span\",\"h-404\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"`\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-405\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-406\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"  query Slides {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-407\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-408\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"    allSlide(filter: {type: { eq: \\\"dir\\\" }}) {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-409\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-410\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"      nodes {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-411\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-412\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"        name\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-413\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-414\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"        html_url\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-415\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-416\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"        type\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-417\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-418\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"      }\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-419\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-420\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"    }\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-421\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-422\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"  }\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-423\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-424\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"`\"]}],[\"$\",\"span\",\"h-425\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\";\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-426\",{\"className\":\"line\",\"children\":[\" \"]}],\"\\n\",[\"$\",\"span\",\"h-427\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-428\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"interface\"]}],[\"$\",\"span\",\"h-429\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-430\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Props\"]}],[\"$\",\"span\",\"h-431\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-432\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-433\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-434\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"data\"]}],[\"$\",\"span\",\"h-435\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-436\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-437\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    \"]}],[\"$\",\"span\",\"h-438\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"allSlide\"]}],[\"$\",\"span\",\"h-439\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-440\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-441\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"      \"]}],[\"$\",\"span\",\"h-442\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"nodes\"]}],[\"$\",\"span\",\"h-443\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": { \"]}],[\"$\",\"span\",\"h-444\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"name\"]}],[\"$\",\"span\",\"h-445\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": \"]}],[\"$\",\"span\",\"h-446\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"string\"]}],[\"$\",\"span\",\"h-447\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"; \"]}],[\"$\",\"span\",\"h-448\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"html_url\"]}],[\"$\",\"span\",\"h-449\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": \"]}],[\"$\",\"span\",\"h-450\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"string\"]}],[\"$\",\"span\",\"h-451\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" }[];\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-452\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-453\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    };\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-454\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-455\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  };\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-456\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-457\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"}\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-458\",{\"className\":\"line\",\"children\":[\" \"]}],\"\\n\",[\"$\",\"span\",\"h-459\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-460\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"const\"]}],[\"$\",\"span\",\"h-461\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-462\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"Slides\"]}],[\"$\",\"span\",\"h-463\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": \"]}],[\"$\",\"span\",\"h-464\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"React\"]}],[\"$\",\"span\",\"h-465\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-466\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"FC\"]}],[\"$\",\"span\",\"h-467\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-468\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Props\"]}],[\"$\",\"span\",\"h-469\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e \"]}],[\"$\",\"span\",\"h-470\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-471\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" (\"]}],[\"$\",\"span\",\"h-472\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"props\"]}],[\"$\",\"span\",\"h-473\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") \"]}],[\"$\",\"span\",\"h-474\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"=\u003e\"]}],[\"$\",\"span\",\"h-475\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-476\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-477\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-478\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// 通过Props读取获取到的数据\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-479\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-480\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-481\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"const\"]}],[\"$\",\"span\",\"h-482\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" { \"]}],[\"$\",\"span\",\"h-483\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"data\"]}],[\"$\",\"span\",\"h-484\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": { \"]}],[\"$\",\"span\",\"h-485\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"allSlide\"]}],[\"$\",\"span\",\"h-486\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": { \"]}],[\"$\",\"span\",\"h-487\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"nodes\"]}],[\"$\",\"span\",\"h-488\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" } } } \"]}],[\"$\",\"span\",\"h-489\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-490\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-491\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"props\"]}],[\"$\",\"span\",\"h-492\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\";\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-493\",{\"className\":\"line\",\"children\":[\" \"]}],\"\\n\",[\"$\",\"span\",\"h-494\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-495\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-496\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// 使用这些数据渲染UI\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-497\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-498\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"};\"]}]]}]]}]]}]]}],\"\\n\",[\"$\",\"p\",\"h-499\",{\"children\":[\"当然，要想更灵活地访问数据和创建页面，开发者还可以通过\",[\"$\",\"code\",\"h-500\",{\"children\":[\"gatsby-node.ts\"]}],\"编写编译时在node端执行的脚本。这个脚本是在编译器在Node.js中运行的，故可以访问任何本地数据。Gatsby还提供了大量\",[\"$\",\"a\",\"h-501\",{\"href\":\"https://www.gatsbyjs.com/docs/reference/config-files/gatsby-node/\",\"children\":[\"Gatsby Node API\"]}],\"来帮助用户创建页面、GraphQL数据等。\"]}],\"\\n\",[\"$\",\"div\",\"h-502\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"pre\",\"h-503\",{\"data-language\":\"js\",\"data-theme\":\"default\",\"children\":[[\"$\",\"code\",\"h-504\",{\"data-language\":\"js\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-505\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-506\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"createPage\"]}],[\"$\",\"span\",\"h-507\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"({\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-508\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-509\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-510\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// 生成页面的路径\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-511\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-512\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-513\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"path\"]}],[\"$\",\"span\",\"h-514\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": \"]}],[\"$\",\"span\",\"h-515\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"/articles/\\\"\"]}],[\"$\",\"span\",\"h-516\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-517\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"+\"]}],[\"$\",\"span\",\"h-518\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-519\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"pageIndex\"]}],[\"$\",\"span\",\"h-520\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\",\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-521\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-522\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-523\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// 页面所对应的React组件\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-524\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-525\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-526\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"component\"]}],[\"$\",\"span\",\"h-527\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": \"]}],[\"$\",\"span\",\"h-528\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"indexTemplate\"]}],[\"$\",\"span\",\"h-529\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\",\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-530\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-531\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-532\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// 组件所需要的数据\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-533\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-534\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-535\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"context\"]}],[\"$\",\"span\",\"h-536\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-537\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-538\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    \"]}],[\"$\",\"span\",\"h-539\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"limit\"]}],[\"$\",\"span\",\"h-540\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": \"]}],[\"$\",\"span\",\"h-541\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"pageSize\"]}],[\"$\",\"span\",\"h-542\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\",\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-543\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-544\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    \"]}],[\"$\",\"span\",\"h-545\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"skip\"]}],[\"$\",\"span\",\"h-546\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": \"]}],[\"$\",\"span\",\"h-547\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"pageIndex\"]}],[\"$\",\"span\",\"h-548\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-549\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"*\"]}],[\"$\",\"span\",\"h-550\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-551\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"pageSize\"]}],[\"$\",\"span\",\"h-552\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\",\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-553\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-554\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    \"]}],[\"$\",\"span\",\"h-555\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"pageCount\"]}],[\"$\",\"span\",\"h-556\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\",\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-557\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-558\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    \"]}],[\"$\",\"span\",\"h-559\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"pageIndex\"]}],[\"$\",\"span\",\"h-560\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": \"]}],[\"$\",\"span\",\"h-561\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"pageIndex\"]}],[\"$\",\"span\",\"h-562\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\",\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-563\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-564\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    \"]}],[\"$\",\"span\",\"h-565\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"ids\"]}],[\"$\",\"span\",\"h-566\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": \"]}],[\"$\",\"span\",\"h-567\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"notIgnoredGroups\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-568\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-569\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"      .\"]}],[\"$\",\"span\",\"h-570\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"slice\"]}],[\"$\",\"span\",\"h-571\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-572\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"pageIndex\"]}],[\"$\",\"span\",\"h-573\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-574\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"*\"]}],[\"$\",\"span\",\"h-575\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-576\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"pageSize\"]}],[\"$\",\"span\",\"h-577\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\", \"]}],[\"$\",\"span\",\"h-578\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"pageIndex\"]}],[\"$\",\"span\",\"h-579\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-580\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"*\"]}],[\"$\",\"span\",\"h-581\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-582\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"pageSize\"]}],[\"$\",\"span\",\"h-583\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-584\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"+\"]}],[\"$\",\"span\",\"h-585\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-586\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"pageSize\"]}],[\"$\",\"span\",\"h-587\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\")\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-588\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-589\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"      .\"]}],[\"$\",\"span\",\"h-590\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"map\"]}],[\"$\",\"span\",\"h-591\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"((\"]}],[\"$\",\"span\",\"h-592\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"x\"]}],[\"$\",\"span\",\"h-593\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") \"]}],[\"$\",\"span\",\"h-594\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"=\u003e\"]}],[\"$\",\"span\",\"h-595\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-596\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"x\"]}],[\"$\",\"span\",\"h-597\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-598\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"frontmatter\"]}],[\"$\",\"span\",\"h-599\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-600\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"id\"]}],[\"$\",\"span\",\"h-601\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"),\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-602\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-603\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  },\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-604\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-605\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"});\"]}]]}]]}]]}]]}],\"\\n\",[\"$\",\"p\",\"h-606\",{\"children\":[\"总的来说，Gatsby通过GraphQL和Gatsby Node API将\",[\"$\",\"strong\",\"h-607\",{\"children\":[\"UI\"]}],\"和\",[\"$\",\"strong\",\"h-608\",{\"children\":[\"数据\"]}],\"完全隔离开来。用户定义各个页面所需要的数据类型，一方面编写脚本或者插件将各类数据源转换为GraphQL等页面需要的数据，另一方面编写React代码将这些数据渲染成UI。\"]}],\"\\n\",[\"$\",\"p\",\"h-609\",{\"children\":[\"而在当前使用App Router的Next.js项目中，获取数据以及渲染页面的方法有所不同。Next.js的路由一直是基于文件路径的，没有类似\",[\"$\",\"code\",\"h-610\",{\"children\":[\"Gatsby Node API\"]}],\"的API以及\",[\"$\",\"code\",\"h-611\",{\"children\":[\"gatsby-node.ts\"]}],\"的脚本可以用来手动创建各个页面。取而代之的，是\"]}],\"\\n\",[\"$\",\"ul\",\"h-612\",{\"children\":[\"\\n\",[\"$\",\"li\",\"h-613\",{\"children\":[\"通过文件路径定义路径\"]}],\"\\n\",[\"$\",\"li\",\"h-614\",{\"children\":[\"通过\",[\"$\",\"code\",\"h-615\",{\"children\":[\"generateStaticParams\"]}],\"函数获取所有可能的路径参数\"]}],\"\\n\",[\"$\",\"li\",\"h-616\",{\"children\":[\"通过RSC同时实现数据获取和渲染\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"h-617\",{\"children\":[\"例如说，我的博客中\",[\"$\",\"code\",\"h-618\",{\"children\":[\"/about\"]}],\"路径下包含了\",[\"$\",\"code\",\"h-619\",{\"children\":[\"/about/me\"]}],\"、\",[\"$\",\"code\",\"h-620\",{\"children\":[\"/about/odyssey\"]}],\"和\",[\"$\",\"code\",\"h-621\",{\"children\":[\"/about/project\"]}],\"三个路径，分别对应3篇文章。要实现\",[\"$\",\"code\",\"h-622\",{\"children\":[\"/about\"]}],\"路径，我需要\"]}],\"\\n\",[\"$\",\"ul\",\"h-623\",{\"children\":[\"\\n\",[\"$\",\"li\",\"h-624\",{\"children\":[\"定义\",[\"$\",\"code\",\"h-625\",{\"children\":[\"app/about/[id]\"]}],\"目录\"]}],\"\\n\",[\"$\",\"li\",\"h-626\",{\"children\":[\"在\",[\"$\",\"code\",\"h-627\",{\"children\":[\"generateStaticParams\"]}],\"中，返回\",[\"$\",\"code\",\"h-628\",{\"children\":[\"id\"]}],\"参数的所有可能值\",[\"$\",\"span\",\"h-629\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"code\",\"h-630\",{\"data-language\":\"ts\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-631\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-632\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"[\"]}],[\"$\",\"span\",\"h-633\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"me\\\"\"]}],[\"$\",\"span\",\"h-634\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\", \"]}],[\"$\",\"span\",\"h-635\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"odyssey\\\"\"]}],[\"$\",\"span\",\"h-636\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\", \"]}],[\"$\",\"span\",\"h-637\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"project\\\"\"]}],[\"$\",\"span\",\"h-638\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"]\"]}]]}]]}]]}]]}],\"\\n\",[\"$\",\"li\",\"h-639\",{\"children\":[\"在\",[\"$\",\"code\",\"h-640\",{\"children\":[\"app/about/[id]/page.tsx\"]}],\"（实际上不是这个路径）中，定义一个RSC，获取到路径的ID的参数，之后获取到对应的文章内容，并同时根据文件内容渲染出UI\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"h-641\",{\"children\":[\"可以看出，通过Next.js，我们不再需要GraphQL将数据和页面分割开来，而可以直接使用RSC同时完成读取数据和渲染UI的功能。通过\",[\"$\",\"code\",\"h-642\",{\"children\":[\"generateStaticParams\"]}],\"列举了所有可能的路径，然后对每个路径渲染它对应的RSC，生成了每个路径的页面，从而编译出了整个网页。\"]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"自定义的markdown渲染流程\",\"children\":[[\"$\",\"a\",\"自定义的markdown渲染流程\",{\"href\":\"#自定义的markdown渲染流程\",\"className\":\"mr-2\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 512 512\",\"className\":\"inline-block\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z\",\"children\":\"$undefined\"}]]],\"style\":{\"color\":\"$undefined\"},\"height\":16,\"width\":16,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}],[\"自定义的markdown渲染流程\"]]}],\"\\n\",[\"$\",\"p\",\"h-644\",{\"children\":[\"在之前使用Gatsby时，我直接使用了一些现成的gatsby插件（如\",[\"$\",\"a\",\"h-645\",{\"href\":\"https://www.gatsbyjs.com/plugins/gatsby-transformer-remark/\",\"children\":[[\"$\",\"code\",\"h-646\",{\"children\":[\"gatsby-plugin-remark\"]}]]}],\"）来帮助我完成把markdown渲染成HTML的过程，故我对markdown渲染的流程几乎没有了解。但是在Next.js中没有这些插件了，所以我就需要自己去学习markdown渲染的知识，并自己完成markdown渲染的工作。\"]}],\"\\n\",[\"$\",\"p\",\"h-647\",{\"children\":[\"当前，项目中是使用\",[\"$\",\"code\",\"h-648\",{\"children\":[\"remark\"]}],\"和\",[\"$\",\"code\",\"h-649\",{\"children\":[\"rehype\"]}],\"生态实现markdown的渲染的。\",[\"$\",\"a\",\"h-650\",{\"href\":\"https://github.com/remarkjs/remark\",\"children\":[[\"$\",\"code\",\"h-651\",{\"children\":[\"remark\"]}]]}],\"是一套把分析并转换markdown的生态，包含由大量插件。它可以分析markdown文件并将其转换为AST，并支持通过各类插件对这个AST进行分析和转换。而\",[\"$\",\"a\",\"h-652\",{\"href\":\"https://github.com/rehypejs/rehype\",\"children\":[[\"$\",\"code\",\"h-653\",{\"children\":[\"rehype\"]}]]}],\"类似\",[\"$\",\"code\",\"h-654\",{\"children\":[\"remark\"]}],\"，只不过\",[\"$\",\"code\",\"h-655\",{\"children\":[\"rehype\"]}],\"是针对HTML的。整个渲染流程可以通过\",[\"$\",\"a\",\"h-656\",{\"href\":\"https://unifiedjs.com/\",\"children\":[[\"$\",\"code\",\"h-657\",{\"children\":[\"unifiedjs\"]}]]}],\"连接起来。\"]}],\"\\n\",[\"$\",\"p\",\"h-658\",{\"children\":[\"现在，博客在渲染markdown时，经历了以下的步骤：\"]}],\"\\n\",[\"$\",\"ul\",\"h-659\",{\"children\":[\"\\n\",[\"$\",\"li\",\"h-660\",{\"children\":[[\"$\",\"a\",\"h-661\",{\"href\":\"https://www.npmjs.com/package/remark-parse\",\"children\":[\"remark-parse\"]}],\": 把markdown转换为remark AST\"]}],\"\\n\",[\"$\",\"li\",\"h-662\",{\"children\":[[\"$\",\"a\",\"h-663\",{\"href\":\"https://www.npmjs.com/package/remark-gfm\",\"children\":[\"remark-gfm\"]}],\": 以GitHub Flavored Markdown格式解析AST\"]}],\"\\n\",[\"$\",\"li\",\"h-664\",{\"children\":[[\"$\",\"a\",\"h-665\",{\"href\":\"https://www.npmjs.com/package/remark-rehype\",\"children\":[\"remark-rehype\"]}],\": 将remark AST转换为rehype AST\"]}],\"\\n\",[\"$\",\"li\",\"h-666\",{\"children\":[[\"$\",\"a\",\"h-667\",{\"href\":\"https://www.npmjs.com/package/rehype-raw\",\"children\":[\"rehype-raw\"]}],\": 使markdown中的裸HTML标签最后能正常显示\"]}],\"\\n\",[\"$\",\"li\",\"h-668\",{\"children\":[[\"$\",\"a\",\"h-669\",{\"href\":\"https://github.com/rehypejs/rehype-slug\",\"children\":[\"rehype-slug\"]}],\": 给各个标题标签加上对应的id\"]}],\"\\n\",[\"$\",\"li\",\"h-670\",{\"children\":[[\"$\",\"a\",\"h-671\",{\"href\":\"https://www.npmjs.com/package/@stefanprobst/rehype-extract-toc\",\"children\":[\"@stefanprobst/rehype-extract-toc\"]}],\": 分析HTML中的各个标题标签，并生成对应的树状结构\"]}],\"\\n\",[\"$\",\"li\",\"h-672\",{\"children\":[[\"$\",\"a\",\"h-673\",{\"href\":\"https://github.com/rehypejs/rehype-react\",\"children\":[\"rehype-react\"]}],\": 根据rehype AST生成对应的React组件树\"]}],\"\\n\",[\"$\",\"li\",\"h-674\",{\"children\":[[\"$\",\"a\",\"h-675\",{\"href\":\"https://rehype-pretty-code.netlify.app/\",\"children\":[\"rehype-pretty-code\"]}],\": 美化代码风格，增加代码高亮等\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"h-676\",{\"children\":[\"了解了markdown的渲染过程给我带来了几个好处：\"]}],\"\\n\",[\"$\",\"p\",\"h-677\",{\"children\":[\"第一，我可以自己自定义渲染的流程了\"]}],\"\\n\",[\"$\",\"p\",\"h-678\",{\"children\":[\"之前，对于一些已有插件不支持的功能，我是通过一些比较hack的方式完成的。例如文章的Table of Contents，我是通过在渲染后通过DOM API分析页面中各个\",[\"$\",\"code\",\"h-679\",{\"children\":[\"h1/h2/h3\"]}],\"等元素来动态生成的。而现在，我可以自己去寻找可以解析TOC的插件（@stefanprobst/rehype-extract-toc），并将它插入到渲染的流程中，并在最后得到结果并自己完成渲染的过程。又比如，我想给渲染出的标题的前面增加一个图标，点击这个图标就获取到跳转到这个标题的URL。通过\",[\"$\",\"code\",\"h-680\",{\"children\":[\"rehype-react\"]}],\"，我可以很简单的实现这一点。\"]}],\"\\n\",[\"$\",\"div\",\"h-681\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"pre\",\"h-682\",{\"data-language\":\"tsx\",\"data-theme\":\"default\",\"children\":[[\"$\",\"code\",\"h-683\",{\"data-language\":\"tsx\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-684\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-685\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-686\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"use\"]}],[\"$\",\"span\",\"h-687\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-688\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"rehypeReact\"]}],[\"$\",\"span\",\"h-689\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\", {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-690\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-691\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-692\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// ...\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-693\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-694\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-695\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"components\"]}],[\"$\",\"span\",\"h-696\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-697\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-698\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    \"]}],[\"$\",\"span\",\"h-699\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// ...\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-700\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-701\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    \"]}],[\"$\",\"span\",\"h-702\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// 使用自定义的React组件渲染h1/h2/h3组件\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-703\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-704\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    \"]}],[\"$\",\"span\",\"h-705\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"h1\"]}],[\"$\",\"span\",\"h-706\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": ((\"]}],[\"$\",\"span\",\"h-707\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"props\"]}],[\"$\",\"span\",\"h-708\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") \"]}],[\"$\",\"span\",\"h-709\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"=\u003e\"]}],[\"$\",\"span\",\"h-710\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \u003c\"]}],[\"$\",\"span\",\"h-711\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"HeadingWithLink\"]}],[\"$\",\"span\",\"h-712\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-713\",{\"style\":{\"color\":\"#D19A66\",\"fontStyle\":\"italic\"},\"children\":[\"element\"]}],[\"$\",\"span\",\"h-714\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-715\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"h1\\\"\"]}],[\"$\",\"span\",\"h-716\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-717\",{\"style\":{\"color\":\"#D19A66\",\"fontStyle\":\"italic\"},\"children\":[\"props\"]}],[\"$\",\"span\",\"h-718\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-719\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"{\"]}],[\"$\",\"span\",\"h-720\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"props\"]}],[\"$\",\"span\",\"h-721\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"}\"]}],[\"$\",\"span\",\"h-722\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" /\u003e) \"]}],[\"$\",\"span\",\"h-723\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"satisfies\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-724\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-725\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"      \"]}],[\"$\",\"span\",\"h-726\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"ComponentType\"]}],[\"$\",\"span\",\"h-727\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-728\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"JSX\"]}],[\"$\",\"span\",\"h-729\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-730\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"IntrinsicElements\"]}],[\"$\",\"span\",\"h-731\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"[\"]}],[\"$\",\"span\",\"h-732\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"h1\\\"\"]}],[\"$\",\"span\",\"h-733\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"]\"]}],[\"$\",\"span\",\"h-734\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"\u003e\"]}],[\"$\",\"span\",\"h-735\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\",\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-736\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-737\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    \"]}],[\"$\",\"span\",\"h-738\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"h2\"]}],[\"$\",\"span\",\"h-739\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": ((\"]}],[\"$\",\"span\",\"h-740\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"props\"]}],[\"$\",\"span\",\"h-741\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") \"]}],[\"$\",\"span\",\"h-742\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"=\u003e\"]}],[\"$\",\"span\",\"h-743\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \u003c\"]}],[\"$\",\"span\",\"h-744\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"HeadingWithLink\"]}],[\"$\",\"span\",\"h-745\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-746\",{\"style\":{\"color\":\"#D19A66\",\"fontStyle\":\"italic\"},\"children\":[\"element\"]}],[\"$\",\"span\",\"h-747\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-748\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"h2\\\"\"]}],[\"$\",\"span\",\"h-749\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-750\",{\"style\":{\"color\":\"#D19A66\",\"fontStyle\":\"italic\"},\"children\":[\"props\"]}],[\"$\",\"span\",\"h-751\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-752\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"{\"]}],[\"$\",\"span\",\"h-753\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"props\"]}],[\"$\",\"span\",\"h-754\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"}\"]}],[\"$\",\"span\",\"h-755\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" /\u003e) \"]}],[\"$\",\"span\",\"h-756\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"satisfies\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-757\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-758\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"      \"]}],[\"$\",\"span\",\"h-759\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"ComponentType\"]}],[\"$\",\"span\",\"h-760\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-761\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"JSX\"]}],[\"$\",\"span\",\"h-762\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-763\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"IntrinsicElements\"]}],[\"$\",\"span\",\"h-764\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"[\"]}],[\"$\",\"span\",\"h-765\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"h2\\\"\"]}],[\"$\",\"span\",\"h-766\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"]\"]}],[\"$\",\"span\",\"h-767\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"\u003e\"]}],[\"$\",\"span\",\"h-768\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\",\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-769\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-770\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    \"]}],[\"$\",\"span\",\"h-771\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"h3\"]}],[\"$\",\"span\",\"h-772\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": ((\"]}],[\"$\",\"span\",\"h-773\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"props\"]}],[\"$\",\"span\",\"h-774\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") \"]}],[\"$\",\"span\",\"h-775\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"=\u003e\"]}],[\"$\",\"span\",\"h-776\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \u003c\"]}],[\"$\",\"span\",\"h-777\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"HeadingWithLink\"]}],[\"$\",\"span\",\"h-778\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-779\",{\"style\":{\"color\":\"#D19A66\",\"fontStyle\":\"italic\"},\"children\":[\"element\"]}],[\"$\",\"span\",\"h-780\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-781\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"h3\\\"\"]}],[\"$\",\"span\",\"h-782\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-783\",{\"style\":{\"color\":\"#D19A66\",\"fontStyle\":\"italic\"},\"children\":[\"props\"]}],[\"$\",\"span\",\"h-784\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-785\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"{\"]}],[\"$\",\"span\",\"h-786\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"props\"]}],[\"$\",\"span\",\"h-787\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"}\"]}],[\"$\",\"span\",\"h-788\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" /\u003e) \"]}],[\"$\",\"span\",\"h-789\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"satisfies\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-790\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-791\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"      \"]}],[\"$\",\"span\",\"h-792\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"ComponentType\"]}],[\"$\",\"span\",\"h-793\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-794\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"JSX\"]}],[\"$\",\"span\",\"h-795\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-796\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"IntrinsicElements\"]}],[\"$\",\"span\",\"h-797\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"[\"]}],[\"$\",\"span\",\"h-798\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"h3\\\"\"]}],[\"$\",\"span\",\"h-799\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"]\"]}],[\"$\",\"span\",\"h-800\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"\u003e\"]}],[\"$\",\"span\",\"h-801\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\",\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-802\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-803\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  },\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-804\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-805\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"})\"]}]]}]]}]]}]]}],\"\\n\",[\"$\",\"p\",\"h-806\",{\"children\":[\"$L21\"]}],\"\\n\",[\"$\",\"p\",\"h-808\",{\"children\":[\"第二，我可以完全自己控制RSS的渲染过程了\"]}],\"\\n\",[\"$\",\"p\",\"h-809\",{\"children\":[\"之前我采用的是\",[\"$\",\"a\",\"h-810\",{\"href\":\"https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-plugin-feed\",\"children\":[[\"$\",\"code\",\"h-811\",{\"children\":[\"gatsby-plugin-feed\"]}]]}],\"插件，通过定义GraphQL以及一些自定义的参数来生成RSS流。由于当时无法控制markdown的渲染结果，所以在生成RSS的时候感觉非常不自然。另外这个插件还不支持在开发时运行，所以我在开发时不能测试RSS的编译结果。现在，我可以自己创建一个\",[\"$\",\"code\",\"h-812\",{\"children\":[\"app/rss.xml/route.ts\"]}],\"的Route Handler，并和渲染文章页面一样，手动创建RSS的信息，以及各篇文章在RSS中的渲染结果。\"]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"静态生成图片\",\"children\":[[\"$\",\"a\",\"静态生成图片\",{\"href\":\"#静态生成图片\",\"className\":\"mr-2\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 512 512\",\"className\":\"inline-block\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z\",\"children\":\"$undefined\"}]]],\"style\":{\"color\":\"$undefined\"},\"height\":16,\"width\":16,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}],[\"静态生成图片\"]]}],\"\\n\",[\"$\",\"p\",\"h-814\",{\"children\":[\"在编写整个网站的过程中，最大的挑战是\",[\"$\",\"strong\",\"h-815\",{\"children\":[\"如何生成博客内容所需要的图片\"]}],\"。\"]}],\"\\n\",[\"$\",\"p\",\"h-816\",{\"children\":[\"在所有能查找到的使用Next.js编写博客网站的文章和项目中（如\",[\"$\",\"a\",\"h-817\",{\"href\":\"https://github.com/vercel/next.js/tree/canary/examples/blog-starter\",\"children\":[\"Next.js官方blog-starter模板\"]}],\"），都是通过\",[\"$\",\"a\",\"h-818\",{\"href\":\"https://nextjs.org/docs/pages/building-your-application/optimizing/static-assets\",\"children\":[[\"$\",\"code\",\"h-819\",{\"children\":[\"public\"]}],\"目录\"]}],\"来引用图片等静态文件的。在编译时，\",[\"$\",\"code\",\"h-820\",{\"children\":[\"public\"]}],\"目录下的文件将会直接复制到构建目录下，在部署后，这些文件将可以直接通过\",[\"$\",\"code\",\"h-821\",{\"children\":[\"/\"]}],\"访问。\"]}],\"\\n\",[\"$\",\"p\",\"h-822\",{\"children\":[\"但是这并不能满足我的需求。因为我的博客中，博客文章和图片都是放在\",[\"$\",\"code\",\"h-823\",{\"children\":[\"contents\"]}],\"下的同一个目录下的。而\",[\"$\",\"code\",\"h-824\",{\"children\":[\"contents\"]}],\"目录不能被公开访问。\"]}],\"\\n\",[\"$\",\"p\",\"h-825\",{\"children\":[\"$L22\"]}],\"\\n\",[\"$\",\"div\",\"h-827\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"pre\",\"h-828\",{\"data-language\":\"md\",\"data-theme\":\"default\",\"children\":[[\"$\",\"code\",\"h-829\",{\"data-language\":\"md\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-830\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-831\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"\u003c!-- 在Markdown中通过和md文件的相对路径访问 --\u003e\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-832\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-833\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"![\"]}],[\"$\",\"span\",\"h-834\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"图片注释\"]}],[\"$\",\"span\",\"h-835\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"]\"]}],[\"$\",\"span\",\"h-836\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-837\",{\"style\":{\"color\":\"#C678DD\",\"textDecoration\":\"underline\"},\"children\":[\"./decompile.png\"]}],[\"$\",\"span\",\"h-838\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\")\"]}]]}]]}]]}]]}],\"\\n\",[\"$\",\"p\",\"h-839\",{\"children\":[\"一个简单粗暴的解决方案是编写一个脚本，在编译后把所有静态文件从\",[\"$\",\"code\",\"h-840\",{\"children\":[\"contents\"]}],\"复制到\",[\"$\",\"code\",\"h-841\",{\"children\":[\"public\"]}],\"下，并在编译markdown时，修改所有的图片路径到编译后的路径中。但是这个做法也太不优雅了，有没有什么更好的、不需要自定义编译流程的方案呢？\"]}],\"\\n\",[\"$\",\"p\",\"h-842\",{\"children\":[\"答案是\",[\"$\",\"a\",\"h-843\",{\"href\":\"https://nextjs.org/docs/app/building-your-application/routing/router-handlers\",\"children\":[\"Route Handler\"]}],\"。\"]}],\"\\n\",[\"$\",\"p\",\"h-844\",{\"children\":[\"Route Handler可以使开发者对某个路径编写自定义的处理逻辑。通过Route Handler，我可以定义一个专门用于获取静态文件的路径。我定义了一个\",[\"$\",\"code\",\"h-845\",{\"children\":[\"/articles/asset/[...path]\"]}],\"的route handler，当使用\",[\"$\",\"code\",\"h-846\",{\"children\":[\"GET\"]}],\"方法访问这个路径的时，handler将会去读取这个路径的对应的文件的内容，并以流的形式返回。Route handler同样支持\",[\"$\",\"code\",\"h-847\",{\"children\":[\"generateStaticParams\"]}],\"。通过这个方法，我遍历\",[\"$\",\"code\",\"h-848\",{\"children\":[\"contents\"]}],\"下的所有静态文件。这样，在编译时，Next.js将会把\",[\"$\",\"code\",\"h-849\",{\"children\":[\"contents\"]}],\"下所有文件的路径都传入这个Route Handler并运行，并将handler的结果（也就是文件内容）存放在\",[\"$\",\"code\",\"h-850\",{\"children\":[\"/articles/asset/contents/{文件相对于contents的路径}\"]}],\"下，发布后可以通过\",[\"$\",\"code\",\"h-851\",{\"children\":[\"/articles/asset/contents/{相对路径}\"]}],\"这个URL访问到图片。\"]}],\"\\n\",[\"$\",\"div\",\"h-852\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"pre\",\"h-853\",{\"data-language\":\"ts\",\"data-theme\":\"default\",\"children\":[[\"$\",\"code\",\"h-854\",{\"data-language\":\"ts\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-855\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-856\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"export\"]}],[\"$\",\"span\",\"h-857\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-858\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"async\"]}],[\"$\",\"span\",\"h-859\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-860\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"function\"]}],[\"$\",\"span\",\"h-861\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-862\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"GET\"]}],[\"$\",\"span\",\"h-863\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-864\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"request\"]}],[\"$\",\"span\",\"h-865\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": \"]}],[\"$\",\"span\",\"h-866\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"NextRequest\"]}],[\"$\",\"span\",\"h-867\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\", { \"]}],[\"$\",\"span\",\"h-868\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"params\"]}],[\"$\",\"span\",\"h-869\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" }: { \"]}],[\"$\",\"span\",\"h-870\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"params\"]}],[\"$\",\"span\",\"h-871\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": { \"]}],[\"$\",\"span\",\"h-872\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"path\"]}],[\"$\",\"span\",\"h-873\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": \"]}],[\"$\",\"span\",\"h-874\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"string\"]}],[\"$\",\"span\",\"h-875\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"[] }}) {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-876\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-877\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-878\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"const\"]}],[\"$\",\"span\",\"h-879\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-880\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"fullPath\"]}],[\"$\",\"span\",\"h-881\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-882\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-883\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-884\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"params\"]}],[\"$\",\"span\",\"h-885\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-886\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"path\"]}],[\"$\",\"span\",\"h-887\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-888\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"join\"]}],[\"$\",\"span\",\"h-889\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-890\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"/\\\"\"]}],[\"$\",\"span\",\"h-891\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\");\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-892\",{\"className\":\"line\",\"children\":[\" \"]}],\"\\n\",[\"$\",\"span\",\"h-893\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-894\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-895\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"const\"]}],[\"$\",\"span\",\"h-896\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-897\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"fileStat\"]}],[\"$\",\"span\",\"h-898\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-899\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-900\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-901\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"await\"]}],[\"$\",\"span\",\"h-902\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-903\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"stat\"]}],[\"$\",\"span\",\"h-904\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-905\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"fullPath\"]}],[\"$\",\"span\",\"h-906\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\");\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-907\",{\"className\":\"line\",\"children\":[\" \"]}],\"\\n\",[\"$\",\"span\",\"h-908\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-909\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-910\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// 读取文件流并返回\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-911\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-912\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-913\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"const\"]}],[\"$\",\"span\",\"h-914\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-915\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"stream\"]}],[\"$\",\"span\",\"h-916\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-917\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-918\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-919\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"createReadStream\"]}],[\"$\",\"span\",\"h-920\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-921\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"fullPath\"]}],[\"$\",\"span\",\"h-922\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\");\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-923\",{\"className\":\"line\",\"children\":[\" \"]}],\"\\n\",[\"$\",\"span\",\"h-924\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-925\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-926\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// @ts-ignore\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-927\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-928\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-929\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"return\"]}],[\"$\",\"span\",\"h-930\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-931\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"new\"]}],[\"$\",\"span\",\"h-932\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-933\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"NextResponse\"]}],[\"$\",\"span\",\"h-934\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-935\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"Readable\"]}],[\"$\",\"span\",\"h-936\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-937\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"toWeb\"]}],[\"$\",\"span\",\"h-938\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-939\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"stream\"]}],[\"$\",\"span\",\"h-940\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"), {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-941\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-942\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    \"]}],[\"$\",\"span\",\"h-943\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"headers\"]}],[\"$\",\"span\",\"h-944\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-945\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-946\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"      \"]}],[\"$\",\"span\",\"h-947\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"Content-Type\\\"\"]}],[\"$\",\"span\",\"h-948\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": \"]}],[\"$\",\"span\",\"h-949\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"lookup\"]}],[\"$\",\"span\",\"h-950\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-951\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"fullPath\"]}],[\"$\",\"span\",\"h-952\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") \"]}],[\"$\",\"span\",\"h-953\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"??\"]}],[\"$\",\"span\",\"h-954\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-955\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"application/octet-stream\\\"\"]}],[\"$\",\"span\",\"h-956\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\",\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-957\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-958\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"      \"]}],[\"$\",\"span\",\"h-959\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"Content-Length\\\"\"]}],[\"$\",\"span\",\"h-960\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": \"]}],[\"$\",\"span\",\"h-961\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"fileStat\"]}],[\"$\",\"span\",\"h-962\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-963\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"size\"]}],[\"$\",\"span\",\"h-964\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\",\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-965\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-966\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    },\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-967\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-968\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  });\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-969\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-970\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"}\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-971\",{\"className\":\"line\",\"children\":[\" \"]}],\"\\n\",[\"$\",\"span\",\"h-972\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-973\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"export\"]}],[\"$\",\"span\",\"h-974\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-975\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"async\"]}],[\"$\",\"span\",\"h-976\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-977\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"function\"]}],[\"$\",\"span\",\"h-978\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-979\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"generateStaticParams\"]}],[\"$\",\"span\",\"h-980\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"() {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-981\",{\"className\":\"line\",\"children\":[\" \"]}],\"\\n\",[\"$\",\"span\",\"h-982\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-983\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-984\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// 遍历所有路径\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-985\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-986\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-987\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"const\"]}],[\"$\",\"span\",\"h-988\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-989\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"paths\"]}],[\"$\",\"span\",\"h-990\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": { \"]}],[\"$\",\"span\",\"h-991\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"path\"]}],[\"$\",\"span\",\"h-992\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": \"]}],[\"$\",\"span\",\"h-993\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"string\"]}],[\"$\",\"span\",\"h-994\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"[] }[] \"]}],[\"$\",\"span\",\"h-995\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-996\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" [];\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-997\",{\"className\":\"line\",\"children\":[\" \"]}],\"\\n\",[\"$\",\"span\",\"h-998\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-999\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-1000\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"async\"]}],[\"$\",\"span\",\"h-1001\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1002\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"function\"]}],[\"$\",\"span\",\"h-1003\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1004\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"rec\"]}],[\"$\",\"span\",\"h-1005\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-1006\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"dir\"]}],[\"$\",\"span\",\"h-1007\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": \"]}],[\"$\",\"span\",\"h-1008\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"string\"]}],[\"$\",\"span\",\"h-1009\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"[]) {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1010\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1011\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    \"]}],[\"$\",\"span\",\"h-1012\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"const\"]}],[\"$\",\"span\",\"h-1013\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1014\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"dirents\"]}],[\"$\",\"span\",\"h-1015\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1016\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-1017\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1018\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"await\"]}],[\"$\",\"span\",\"h-1019\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1020\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"readdir\"]}],[\"$\",\"span\",\"h-1021\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-1022\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"dir\"]}],[\"$\",\"span\",\"h-1023\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-1024\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"join\"]}],[\"$\",\"span\",\"h-1025\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-1026\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"/\\\"\"]}],[\"$\",\"span\",\"h-1027\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"), { \"]}],[\"$\",\"span\",\"h-1028\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"withFileTypes\"]}],[\"$\",\"span\",\"h-1029\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": \"]}],[\"$\",\"span\",\"h-1030\",{\"style\":{\"color\":\"#D19A66\"},\"children\":[\"true\"]}],[\"$\",\"span\",\"h-1031\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" });\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1032\",{\"className\":\"line\",\"children\":[\" \"]}],\"\\n\",[\"$\",\"span\",\"h-1033\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1034\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    \"]}],[\"$\",\"span\",\"h-1035\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"for\"]}],[\"$\",\"span\",\"h-1036\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" (\"]}],[\"$\",\"span\",\"h-1037\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"const\"]}],[\"$\",\"span\",\"h-1038\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1039\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"dirent\"]}],[\"$\",\"span\",\"h-1040\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1041\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"of\"]}],[\"$\",\"span\",\"h-1042\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1043\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"dirents\"]}],[\"$\",\"span\",\"h-1044\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1045\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1046\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"      \"]}],[\"$\",\"span\",\"h-1047\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"if\"]}],[\"$\",\"span\",\"h-1048\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" (\"]}],[\"$\",\"span\",\"h-1049\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"dirent\"]}],[\"$\",\"span\",\"h-1050\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-1051\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"isDirectory\"]}],[\"$\",\"span\",\"h-1052\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"()) {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1053\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1054\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"        \"]}],[\"$\",\"span\",\"h-1055\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"await\"]}],[\"$\",\"span\",\"h-1056\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1057\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"rec\"]}],[\"$\",\"span\",\"h-1058\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-1059\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"dir\"]}],[\"$\",\"span\",\"h-1060\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-1061\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"concat\"]}],[\"$\",\"span\",\"h-1062\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-1063\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"dirent\"]}],[\"$\",\"span\",\"h-1064\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-1065\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"name\"]}],[\"$\",\"span\",\"h-1066\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"));\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1067\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1068\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"        \"]}],[\"$\",\"span\",\"h-1069\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"continue\"]}],[\"$\",\"span\",\"h-1070\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\";\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1071\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1072\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"      }\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1073\",{\"className\":\"line\",\"children\":[\" \"]}],\"\\n\",[\"$\",\"span\",\"h-1074\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1075\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"      \"]}],[\"$\",\"span\",\"h-1076\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"paths\"]}],[\"$\",\"span\",\"h-1077\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-1078\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"push\"]}],[\"$\",\"span\",\"h-1079\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"({ \"]}],[\"$\",\"span\",\"h-1080\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"path\"]}],[\"$\",\"span\",\"h-1081\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": \"]}],[\"$\",\"span\",\"h-1082\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"dir\"]}],[\"$\",\"span\",\"h-1083\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-1084\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"concat\"]}],[\"$\",\"span\",\"h-1085\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-1086\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"dirent\"]}],[\"$\",\"span\",\"h-1087\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-1088\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"name\"]}],[\"$\",\"span\",\"h-1089\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") });\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1090\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1091\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    }\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1092\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1093\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  }\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1094\",{\"className\":\"line\",\"children\":[\" \"]}],\"\\n\",[\"$\",\"span\",\"h-1095\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1096\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-1097\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"await\"]}],[\"$\",\"span\",\"h-1098\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1099\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"rec\"]}],[\"$\",\"span\",\"h-1100\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"([\"]}],[\"$\",\"span\",\"h-1101\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"contents\\\"\"]}],[\"$\",\"span\",\"h-1102\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"]);\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1103\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1104\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-1105\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"return\"]}],[\"$\",\"span\",\"h-1106\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1107\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"paths\"]}],[\"$\",\"span\",\"h-1108\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\";\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1109\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1110\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"}\"]}]]}]]}]]}]]}],\"\\n\",[\"$\",\"p\",\"h-1111\",{\"children\":[\"$L23\"]}],\"\\n\",[\"$\",\"p\",\"h-1113\",{\"children\":[\"现在图片有了，下一步是将markdown中对图片的引用地址修改到真实的编译后的地址。这实际上很简单，通过\",[\"$\",\"code\",\"h-1114\",{\"children\":[\"rehype-react\"]}],\"将HTML的\",[\"$\",\"code\",\"h-1115\",{\"children\":[\"\u003cimg\u003e\"]}],\"使用自己的组件渲染，然后在自己的组件中把\",[\"$\",\"code\",\"h-1116\",{\"children\":[\"src\"]}],\"属性修改为真正的图片路径即可。\"]}],\"\\n\",[\"$\",\"div\",\"h-1117\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"pre\",\"h-1118\",{\"data-language\":\"tsx\",\"data-theme\":\"default\",\"children\":[[\"$\",\"code\",\"h-1119\",{\"data-language\":\"tsx\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-1120\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1121\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-1122\",{\"style\":{\"color\":\"#61AFEF\"},\"children\":[\"use\"]}],[\"$\",\"span\",\"h-1123\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-1124\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"rehypeReact\"]}],[\"$\",\"span\",\"h-1125\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\", {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1126\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1127\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-1128\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// ..\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1129\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1130\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-1131\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"components\"]}],[\"$\",\"span\",\"h-1132\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1133\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1134\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    \"]}],[\"$\",\"span\",\"h-1135\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"// 使用自己的Image组件渲染HTML中的\u003cimg\u003e\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1136\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1137\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"    \"]}],[\"$\",\"span\",\"h-1138\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"img\"]}],[\"$\",\"span\",\"h-1139\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\": ((\"]}],[\"$\",\"span\",\"h-1140\",{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":[\"props\"]}],[\"$\",\"span\",\"h-1141\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\") \"]}],[\"$\",\"span\",\"h-1142\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"=\u003e\"]}],[\"$\",\"span\",\"h-1143\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \u003c\"]}],[\"$\",\"span\",\"h-1144\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"ArticleImageServer\"]}],[\"$\",\"span\",\"h-1145\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1146\",{\"style\":{\"color\":\"#D19A66\",\"fontStyle\":\"italic\"},\"children\":[\"article\"]}],[\"$\",\"span\",\"h-1147\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-1148\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"{\"]}],[\"$\",\"span\",\"h-1149\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"article\"]}],[\"$\",\"span\",\"h-1150\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"}\"]}],[\"$\",\"span\",\"h-1151\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1152\",{\"style\":{\"color\":\"#D19A66\",\"fontStyle\":\"italic\"},\"children\":[\"props\"]}],[\"$\",\"span\",\"h-1153\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-1154\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"{\"]}],[\"$\",\"span\",\"h-1155\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"props\"]}],[\"$\",\"span\",\"h-1156\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"}\"]}],[\"$\",\"span\",\"h-1157\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" /\u003e) \"]}],[\"$\",\"span\",\"h-1158\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\"satisfies\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1159\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1160\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"      \"]}],[\"$\",\"span\",\"h-1161\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"ComponentType\"]}],[\"$\",\"span\",\"h-1162\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-1163\",{\"style\":{\"color\":\"#E5C07B\"},\"children\":[\"JSX\"]}],[\"$\",\"span\",\"h-1164\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\".\"]}],[\"$\",\"span\",\"h-1165\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"IntrinsicElements\"]}],[\"$\",\"span\",\"h-1166\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"[\"]}],[\"$\",\"span\",\"h-1167\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"img\\\"\"]}],[\"$\",\"span\",\"h-1168\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"]\"]}],[\"$\",\"span\",\"h-1169\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"\u003e\"]}],[\"$\",\"span\",\"h-1170\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\",\"]}]]}]]}]]}]]}],\"\\n\",[\"$\",\"p\",\"h-1171\",{\"children\":[\"我们使用了Next.js自带的\",[\"$\",\"code\",\"h-1172\",{\"children\":[\"\u003cImage\u003e\"]}],\"组件来显示图片（在\",[\"$\",\"code\",\"h-1173\",{\"children\":[\"ArticleImage\"]}],\"中）。这个组件有很多友好的功能，例如通过指定图片大小防止Layout Shift，在支持的环境下支持先加载更小的图片以更快的显示界面等。通过把\",[\"$\",\"code\",\"h-1174\",{\"children\":[\"\u003cImage\u003e\"]}],\"和自定义的markdown流程相结合，我们就实现了显示图片的需求。\"]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"多主题\",\"children\":[[\"$\",\"a\",\"多主题\",{\"href\":\"#多主题\",\"className\":\"mr-2\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 512 512\",\"className\":\"inline-block\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z\",\"children\":\"$undefined\"}]]],\"style\":{\"color\":\"$undefined\"},\"height\":16,\"width\":16,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}],[\"多主题\"]]}],\"\\n\",[\"$\",\"p\",\"h-1176\",{\"children\":[\"本次更新在样式方面最大的可见的更新就是支持了\",[\"$\",\"strong\",\"h-1177\",{\"children\":[\"多主题\"]}],\"。目前网站已经开放了12个主题可供选择，当然，我的美学能力远远不够自己设计这么多的主题，所有主题都是由\",[\"$\",\"a\",\"h-1178\",{\"href\":\"https://daisyui.com/docs/themes/\",\"children\":[\"daisyui提供的\"]}],\"。\"]}],\"\\n\",[\"$\",\"p\",\"h-1179\",{\"children\":[\"daisyui首先定义了一些固定的\",[\"$\",\"a\",\"h-1180\",{\"href\":\"https://daisyui.com/docs/colors/#-2\",\"children\":[\"颜色变量\"]}],\"，这样在编码时，所有元素的颜色都可以通过颜色变量，而不是写死的颜色值，来指定。例如下面的代码就指定了一个背景颜色为\",[\"$\",\"code\",\"h-1181\",{\"children\":[\"base-200\"]}],\"、文本颜色为\",[\"$\",\"code\",\"h-1182\",{\"children\":[\"text-content\"]}],\"的\",[\"$\",\"code\",\"h-1183\",{\"children\":[\"ul\"]}],\"组件。\"]}],\"\\n\",[\"$\",\"div\",\"h-1184\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"pre\",\"h-1185\",{\"data-language\":\"tsx\",\"data-theme\":\"default\",\"children\":[[\"$\",\"code\",\"h-1186\",{\"data-language\":\"tsx\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-1187\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1188\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c\"]}],[\"$\",\"span\",\"h-1189\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"ul\"]}],[\"$\",\"span\",\"h-1190\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1191\",{\"style\":{\"color\":\"#D19A66\",\"fontStyle\":\"italic\"},\"children\":[\"className\"]}],[\"$\",\"span\",\"h-1192\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"=\"]}],[\"$\",\"span\",\"h-1193\",{\"style\":{\"color\":\"#98C379\"},\"children\":[\"\\\"bg-base-200 text-base-content\\\"\"]}],[\"$\",\"span\",\"h-1194\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1195\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1196\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003c/\"]}],[\"$\",\"span\",\"h-1197\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"ul\"]}],[\"$\",\"span\",\"h-1198\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"\u003e\"]}]]}]]}]]}]]}],\"\\n\",[\"$\",\"p\",\"h-1199\",{\"children\":[\"之后，daisyui通过识别\",[\"$\",\"code\",\"h-1200\",{\"children\":[\"\u003chtml\u003e\"]}],\"组件的\",[\"$\",\"code\",\"h-1201\",{\"children\":[\"data-theme\"]}],\"数据属性来获取到当前用户所选择的主题，并通过CSS选择器将对应的颜色的CSS变量修改为对应的主题的对应颜色变量的值。要想切换主题，只需要修改\",[\"$\",\"code\",\"h-1202\",{\"children\":[\"\u003chtml\u003e\"]}],\"组件的\",[\"$\",\"code\",\"h-1203\",{\"children\":[\"data-theme\"]}],\"数据属性即可。\"]}],\"\\n\",[\"$\",\"p\",\"h-1204\",{\"children\":[\"$L24\"]}],\"\\n\",[\"$\",\"p\",\"h-1206\",{\"children\":[\"由于各个主题的颜色风格大相径庭，我原来博客的代码背景就不可以使用了。新的主页背景必须得能够自适应完全不同的颜色风格。要想实现这一点，新的背景必须是使用CSS动态生成的。\"]}],\"\\n\",[\"$\",\"p\",\"h-1207\",{\"children\":[\"于是我在网上找到了一个\",[\"$\",\"a\",\"h-1208\",{\"href\":\"https://alvarotrigo.com/blog/animated-backgrounds-css\",\"children\":[\"绝妙的网站\"]}],\"，这个页面中提供了数十种纯用CSS实现的背景动画。我选中了其中的第三个Floating Squares。这个动画的背景色、以及各个方块的颜色都是由CSS的定义的，我需要做的，就是把其中的基础颜色替换为当前所使用的主题的CSS变量，这样，新的背景就能自动和当前所使用的主题相匹配了。\"]}],\"\\n\",[\"$\",\"div\",\"h-1209\",{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[[\"$\",\"pre\",\"h-1210\",{\"data-language\":\"css\",\"data-theme\":\"default\",\"children\":[[\"$\",\"code\",\"h-1211\",{\"data-language\":\"css\",\"data-theme\":\"default\",\"children\":[[\"$\",\"span\",\"h-1212\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1213\",{\"style\":{\"color\":\"#D19A66\"},\"children\":[\".area\"]}],[\"$\",\"span\",\"h-1214\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1215\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1216\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-1217\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"/* 使用daisyui的颜色变量 */\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1218\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1219\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  background: \"]}],[\"$\",\"span\",\"h-1220\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"linear-gradient\"]}],[\"$\",\"span\",\"h-1221\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(to \"]}],[\"$\",\"span\",\"h-1222\",{\"style\":{\"color\":\"#D19A66\"},\"children\":[\"bottom\"]}],[\"$\",\"span\",\"h-1223\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\", \"]}],[\"$\",\"span\",\"h-1224\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"hsl\"]}],[\"$\",\"span\",\"h-1225\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-1226\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"var\"]}],[\"$\",\"span\",\"h-1227\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-1228\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"--p\"]}],[\"$\",\"span\",\"h-1229\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\")), \"]}],[\"$\",\"span\",\"h-1230\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"hsl\"]}],[\"$\",\"span\",\"h-1231\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-1232\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"var\"]}],[\"$\",\"span\",\"h-1233\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-1234\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"--pf\"]}],[\"$\",\"span\",\"h-1235\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\")));\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1236\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1237\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  width: \"]}],[\"$\",\"span\",\"h-1238\",{\"style\":{\"color\":\"#D19A66\"},\"children\":[\"100\"]}],[\"$\",\"span\",\"h-1239\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"%\"]}],[\"$\",\"span\",\"h-1240\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\";\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1241\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1242\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  height: \"]}],[\"$\",\"span\",\"h-1243\",{\"style\":{\"color\":\"#D19A66\"},\"children\":[\"100\"]}],[\"$\",\"span\",\"h-1244\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"vh\"]}],[\"$\",\"span\",\"h-1245\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\";\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1246\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1247\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"}\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1248\",{\"className\":\"line\",\"children\":[\" \"]}],\"\\n\",[\"$\",\"span\",\"h-1249\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1250\",{\"style\":{\"color\":\"#D19A66\"},\"children\":[\".circles\"]}],[\"$\",\"span\",\"h-1251\",{\"style\":{\"color\":\"#C678DD\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1252\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"li\"]}],[\"$\",\"span\",\"h-1253\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" {\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1254\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1255\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  position: \"]}],[\"$\",\"span\",\"h-1256\",{\"style\":{\"color\":\"#D19A66\"},\"children\":[\"absolute\"]}],[\"$\",\"span\",\"h-1257\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\";\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1258\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1259\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  display: \"]}],[\"$\",\"span\",\"h-1260\",{\"style\":{\"color\":\"#D19A66\"},\"children\":[\"block\"]}],[\"$\",\"span\",\"h-1261\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\";\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1262\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1263\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  list-style: \"]}],[\"$\",\"span\",\"h-1264\",{\"style\":{\"color\":\"#D19A66\"},\"children\":[\"none\"]}],[\"$\",\"span\",\"h-1265\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\";\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1266\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1267\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  width: \"]}],[\"$\",\"span\",\"h-1268\",{\"style\":{\"color\":\"#D19A66\"},\"children\":[\"20\"]}],[\"$\",\"span\",\"h-1269\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"px\"]}],[\"$\",\"span\",\"h-1270\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\";\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1271\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1272\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  height: \"]}],[\"$\",\"span\",\"h-1273\",{\"style\":{\"color\":\"#D19A66\"},\"children\":[\"20\"]}],[\"$\",\"span\",\"h-1274\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"px\"]}],[\"$\",\"span\",\"h-1275\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\";\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1276\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1277\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  \"]}],[\"$\",\"span\",\"h-1278\",{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":[\"/* 使用daisyui的颜色变量 */\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1279\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1280\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  background: \"]}],[\"$\",\"span\",\"h-1281\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"hsl\"]}],[\"$\",\"span\",\"h-1282\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-1283\",{\"style\":{\"color\":\"#56B6C2\"},\"children\":[\"var\"]}],[\"$\",\"span\",\"h-1284\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"(\"]}],[\"$\",\"span\",\"h-1285\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"--a\"]}],[\"$\",\"span\",\"h-1286\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"));\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1287\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1288\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  animation: animate \"]}],[\"$\",\"span\",\"h-1289\",{\"style\":{\"color\":\"#D19A66\"},\"children\":[\"25\"]}],[\"$\",\"span\",\"h-1290\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"s\"]}],[\"$\",\"span\",\"h-1291\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1292\",{\"style\":{\"color\":\"#D19A66\"},\"children\":[\"linear\"]}],[\"$\",\"span\",\"h-1293\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\" \"]}],[\"$\",\"span\",\"h-1294\",{\"style\":{\"color\":\"#D19A66\"},\"children\":[\"infinite\"]}],[\"$\",\"span\",\"h-1295\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\";\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1296\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1297\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"  bottom: \"]}],[\"$\",\"span\",\"h-1298\",{\"style\":{\"color\":\"#D19A66\"},\"children\":[\"-150\"]}],[\"$\",\"span\",\"h-1299\",{\"style\":{\"color\":\"#E06C75\"},\"children\":[\"px\"]}],[\"$\",\"span\",\"h-1300\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\";\"]}]]}],\"\\n\",[\"$\",\"span\",\"h-1301\",{\"className\":\"line\",\"children\":[[\"$\",\"span\",\"h-1302\",{\"style\":{\"color\":\"#ABB2BF\"},\"children\":[\"}\"]}]]}]]}]]}]]}],\"\\n\",[\"$\",\"h1\",null,{\"id\":\"总结\",\"children\":[[\"$\",\"a\",\"总结\",{\"href\":\"#总结\",\"className\":\"mr-2\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 512 512\",\"className\":\"inline-block\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z\",\"children\":\"$undefined\"}]]],\"style\":{\"color\":\"$undefined\"},\"height\":16,\"width\":16,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}],[\"总结\"]]}],\"\\n\",[\"$\",\"p\",\"h-1304\",{\"children\":[\"本来我一开始并没有打算完全重写整个项目，而是打算在已有的代码上做一些小修小补。但是当我真的打开了代码开始准备修改时，就发现了原来的代码中各个组件之间的依赖像是形成了蜘蛛网一样，完全无法下手。随便改任何一处已有的代码，都会涉及到巨量的其他代码，可谓牵一发而动全身。想起来2018年开始写Gatsby的ddadaal.me的时候，一大驱动力就是原有的屎山实在无法维护了。而5年后，当年的新代码变成了新的屎山，而被更新的代码取代之。果然，和世间其他万物一样，技术在发展，代码也是常用常新，需要不停地跟上时代的步伐。重写后的博客功能和以往一致，但是更轻、更快、更易维护，也算是一次成功的重构实践。\"]}]]}]}],[\"$\",\"div\",null,{\"className\":\"hidden lg:block lg:w-[25%]\",\"children\":[\"$\",\"$L25\",null,{\"toc\":[{\"depth\":1,\"value\":\"鸽了4年的更新\",\"id\":\"鸽了4年的更新\"},{\"depth\":1,\"value\":\"新博客的亮点\",\"id\":\"新博客的亮点\"},{\"depth\":1,\"value\":\"实现\",\"id\":\"实现\",\"children\":[{\"depth\":2,\"value\":\"完全采用Next.js App Router\",\"id\":\"完全采用nextjs-app-router\"},{\"depth\":2,\"value\":\"Next.js静态生成\",\"id\":\"nextjs静态生成\",\"children\":[{\"depth\":3,\"value\":\"静态网站\",\"id\":\"静态网站\"},{\"depth\":3,\"value\":\"和Gatsby的区别\",\"id\":\"和gatsby的区别\"}]},{\"depth\":2,\"value\":\"自定义的markdown渲染流程\",\"id\":\"自定义的markdown渲染流程\"},{\"depth\":2,\"value\":\"静态生成图片\",\"id\":\"静态生成图片\"},{\"depth\":2,\"value\":\"多主题\",\"id\":\"多主题\"}]},{\"depth\":1,\"value\":\"总结\",\"id\":\"总结\"}]}]}]]}]\n"])</script><script>self.__next_f.push([1,"26:I{\"id\":\"2834\",\"chunks\":[\"309:static/chunks/70bb1395-d6354d9eb02b5992.js\",\"975:static/chunks/dc6764d5-acd07a2e286ee329.js\",\"344:static/chunks/2e69a9b8-691073cd158eaece.js\",\"301:static/chunks/8a8c2739-bbbebd44388102d4.js\",\"813:static/chunks/813-cf37a3c39e380b56.js\",\"647:static/chunks/647-5e2b1bd38dd79bde.js\",\"861:static/chunks/861-50e3e01387b52bfc.js\",\"94:static/chunks/app/about/[id]/[[...lang]]/page-a09d09b63b5b9ec6.js\"],\"name\":\"ArticleImage\",\"async\":false}\n1b:[\"$\",\"figure\",null,{\"children\":[[\"$\",\"$L26\",n"])</script><script>self.__next_f.push([1,"ull,{\"src\":\"/articles/asset/contents/20230617-blog-updates-2/tailwind.png\",\"imageSize\":{\"height\":608,\"width\":1050},\"imageProps\":{\"src\":\"./tailwind.png\",\"alt\":\"tailwind自动完成体验\",\"children\":\"$undefined\"}}],[\"$\",\"figcaption\",null,{\"className\":\"text-center\",\"children\":\"tailwind自动完成体验\"}]]}]\n1c:[\"$\",\"figure\",null,{\"children\":[[\"$\",\"$L26\",null,{\"src\":\"/articles/asset/contents/20230617-blog-updates-2/components.png\",\"imageSize\":{\"height\":548,\"width\":417},\"imageProps\":{\"src\":\"./components.png\","])</script><script>self.__next_f.push([1,"\"alt\":\"现在博客下，会由多个页面使用的组件\",\"children\":\"$undefined\"}}],[\"$\",\"figcaption\",null,{\"className\":\"text-center\",\"children\":\"现在博客下，会由多个页面使用的组件\"}]]}]\n1d:[\"$\",\"figure\",null,{\"children\":[[\"$\",\"$L26\",null,{\"src\":\"/articles/asset/contents/20230617-blog-updates-2/pageComponents.png\",\"imageSize\":{\"height\":367,\"width\":802},\"imageProps\":{\"src\":\"./pageComponents.png\",\"alt\":\"pageComponents\",\"children\":\"$undefined\"}}],[\"$\",\"figcaption\",null,{\"className\":\"text-ce"])</script><script>self.__next_f.push([1,"nter\",\"children\":\"pageComponents\"}]]}]\n1e:[\"$\",\"figure\",null,{\"children\":[[\"$\",\"$L26\",null,{\"src\":\"/articles/asset/contents/20230617-blog-updates-2/articles-dir.png\",\"imageSize\":{\"height\":234,\"width\":350},\"imageProps\":{\"src\":\"./articles-dir.png\",\"alt\":\"现在博客下，文章列表页面布局\",\"children\":\"$undefined\"}}],[\"$\",\"figcaption\",null,{\"className\":\"text-center\",\"children\":\"现在博客下，文章列表页面布局\"}]]}]\n1f:[\"$\",\"figure\",null,{\"children\":[[\"$\",\"$L26\",null,{\"src\":\"/articles/asset/c"])</script><script>self.__next_f.push([1,"ontents/20230617-blog-updates-2/vite-build-output.png\",\"imageSize\":{\"height\":202,\"width\":394},\"imageProps\":{\"src\":\"vite-build-output.png\",\"alt\":\"vite build构建出的项目\",\"children\":\"$undefined\"}}],[\"$\",\"figcaption\",null,{\"className\":\"text-center\",\"children\":\"vite build构建出的项目\"}]]}]\n20:[\"$\",\"figure\",null,{\"children\":[[\"$\",\"$L26\",null,{\"src\":\"/articles/asset/contents/20230617-blog-updates-2/next-export-output.png\",\"imageSize\":{\"height\":471,\"width\":439},\"imageProps\":{\"src\":\"next-export-output.p"])</script><script>self.__next_f.push([1,"ng\",\"alt\":\"next build构建出的项目\",\"children\":\"$undefined\"}}],[\"$\",\"figcaption\",null,{\"className\":\"text-center\",\"children\":\"next build构建出的项目\"}]]}]\n21:[\"$\",\"figure\",null,{\"children\":[[\"$\",\"$L26\",null,{\"src\":\"/articles/asset/contents/20230617-blog-updates-2/md-heading-link.png\",\"imageSize\":{\"height\":357,\"width\":1094},\"imageProps\":{\"src\":\"./md-heading-link.png\",\"alt\":\"标题链接\",\"children\":\"$undefined\"}}],[\"$\",\"figcaption\",null,{\"className\":\"text-center\",\"children\":\"标题链接\"}]]}]\n22:["])</script><script>self.__next_f.push([1,"\"$\",\"figure\",null,{\"children\":[[\"$\",\"$L26\",null,{\"src\":\"/articles/asset/contents/20230617-blog-updates-2/blog-article-dir.png\",\"imageSize\":{\"height\":243,\"width\":416},\"imageProps\":{\"src\":\"blog-article-dir.png\",\"alt\":\"博客文章和图片存放在同一个目录下\",\"children\":\"$undefined\"}}],[\"$\",\"figcaption\",null,{\"className\":\"text-center\",\"children\":\"博客文章和图片存放在同一个目录下\"}]]}]\n23:[\"$\",\"figure\",null,{\"children\":[[\"$\",\"$L26\",null,{\"src\":\"/articles/asset/contents/20230617-blog-upd"])</script><script>self.__next_f.push([1,"ates-2/articles-assets.png\",\"imageSize\":{\"height\":764,\"width\":469},\"imageProps\":{\"src\":\"articles-assets.png\",\"alt\":\"编译后的articles/asset路径，包含有所有的静态文件\",\"children\":\"$undefined\"}}],[\"$\",\"figcaption\",null,{\"className\":\"text-center\",\"children\":\"编译后的articles/asset路径，包含有所有的静态文件\"}]]}]\n24:[\"$\",\"figure\",null,{\"children\":[[\"$\",\"$L26\",null,{\"src\":\"/articles/asset/contents/20230617-blog-updates-2/daisyui-data-theme.png\",\"imageSize\":{\"height\":702,\"width\":1"])</script><script>self.__next_f.push([1,"164},\"imageProps\":{\"src\":\"daisyui-data-theme.png\",\"alt\":\"data-theme\",\"children\":\"$undefined\"}}],[\"$\",\"figcaption\",null,{\"className\":\"text-center\",\"children\":\"data-theme\"}]]}]\n"])</script></body></html>