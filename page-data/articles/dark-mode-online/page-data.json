{"componentChunkName":"component---src-templates-article-page-template-tsx","path":"/articles/dark-mode-online","result":{"pageContext":{"id":"dark-mode-online","lang":"cn","htmlAst":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"为什么一直没有暗色模式？"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"我是个暗色模式的粉丝。不管是操作系统、还是各种应用，只有有暗色模式，我肯定都使用暗色模式。更别提IDE了。因为我感觉使用黑色比较的护眼，没有浅色背景那样的刺眼。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"但是讽刺的是，我的博客一年多都没有暗色模式。这是由于我的博客的主题是直接用的"},{"type":"element","tagName":"a","properties":{"href":"https://bootswatch.com/"},"children":[{"type":"text","value":"bootswatch"}]},{"type":"text","value":"提供的主题，而我认为这个网站提供的那套"},{"type":"element","tagName":"a","properties":{"href":"https://bootswatch.com/darkly/"},"children":[{"type":"text","value":"Darkly"}]},{"type":"text","value":"主题不太好看（主要是一些配色的问题，比如我不太喜欢绿色的链接、按钮啥的……），而在当时我很很弱鸡，不会修改主题提供的颜色选项。所以就退而求其次，选择了它提供的浅色的"},{"type":"element","tagName":"a","properties":{"href":"https://bootswatch.com/darkly/"},"children":[{"type":"text","value":"Flatly"}]},{"type":"text","value":"主题。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"而前段时间，我终于又想开始把网站变成黑色模式。由于这一年中我的前端技术有了一定的提高，所以这次再看的主题的时候，发现修改颜色其实是比较简单的：其实就只需要修改修改SCSS中的一些变量即可。所以，这次我成功地把暗色模式应用到了网站上。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"有哪些修改？"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"其实网站的主题方面大概来说变化不大。"},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"主题色"}]},{"type":"text","value":"没有改变，标题栏和footer等组件的样式没有变化。主要修改的是"},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"背景色"}]},{"type":"text","value":"、"},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"文字颜色"}]},{"type":"text","value":"以及"},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"代码块的颜色"}]},{"type":"text","value":"。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"背景色、文字颜色"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"对于背景色和文字的颜色，你可能会感觉这是个很简单的工作：暗色模式嘛，"},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"背景纯黑"}]},{"type":"text","value":"，"},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"文字纯白"}]},{"type":"text","value":"就可以了。但这样的效果其实并不好：黑白对比度太高，白色文字显得过于"},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"刺眼"}]},{"type":"text","value":"。纯黑的背景和网站的其他部分的颜色也不是很搭配。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[]},{"type":"element","tagName":"figure","properties":{"className":["gatsby-resp-image-figure"],"style":""},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 930px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 37.89473684210527%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABn0lEQVQoz5VS25KiMBCNCohaKl4GBBnkushtFARHC3W0anX//4vOdrI1VfO6D6lOJ53ucwnLswLL5RJ1XaNtW3x93fDn9cLz9xObjQPG2P+tMIyg62+I4xhFUaA6VDg2DaqqgmWakCQJ/X4fqqpCURSxfuZ8z6Msy6KWpWkqHgdBCHNlIopC+L4P+/0d+/0elmVhQQyCMMAbxRUNcd0NYqqz1xYMw6AaE9pUw2g04g0zorZBkmzh2DYcorlNEmR5TkMCGLqOyWQCTdMwnU5FVIf0kEkYjMaYzWYYj8eiZjgYgD0eD5TlHkGyQ5x+oGlqHA4H7HY70fR2u1JeCY2b46fQ+NxesfKJWXNCso0xm8+RZjlsAsS4drqhw/NDxEmKnJqkhNBxHLiehy3dm0TTIRZhFCEk1EJ328V6vRa69Xo90lIVOrK2vZAJR5SE6EgILtcLCmp6IcdrQsp1/EVNq6oUWpcUuRR5TsOzDOfzCff7Ha/nE57rkct0uVjMxRQ+QVFkdLtdkXMnuYuy9O+s0+mIM+EmfZFvZ2VZEnt+/xdRs9QOaoPwsAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"黑背景白文字","title":"黑背景白文字","src":"/static/014e9407c5e8a2075deae7a03148e7ed/84841/bg-black-font-white.png","srcSet":["/static/014e9407c5e8a2075deae7a03148e7ed/5459c/bg-black-font-white.png 285w","/static/014e9407c5e8a2075deae7a03148e7ed/2cee3/bg-black-font-white.png 570w","/static/014e9407c5e8a2075deae7a03148e7ed/84841/bg-black-font-white.png 930w"],"sizes":["(max-width:","930px)","100vw,","930px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"figcaption","properties":{"className":["gatsby-resp-image-figcaption"]},"children":[{"type":"text","value":"黑背景白文字"}]},{"type":"text","value":"\n  "}]},{"type":"element","tagName":"p","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"所以，有的应用的暗色模式，不是使用的真正的黑："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"VSCode的默认暗色背景的颜色是"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"#1E1E1E"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"JB系IDE的默认暗色背景的颜色是"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"#282828"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Chromium Edge的暗色背景的地址栏周围的颜色为"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"#3B3B3B"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"…"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"因此，通过一些尝试和主观感觉，在我的网站中，背景和文字颜色分别选择的色号是"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"#222"}]},{"type":"text","value":"和"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"#ced4da"}]},{"type":"text","value":"。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"当然了，如果读者对颜色选择有一些意见，欢迎在下面评论框留言。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"代码块的颜色"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"本网站使用"},{"type":"element","tagName":"a","properties":{"href":"https://prismjs.com/"},"children":[{"type":"text","value":"prism.js"}]},{"type":"text","value":"对代码块进行高亮处理。这个插件负责把代码处理成一个一个的token，然后使用CSS对各种token进行样式处理的。之前代码块使用的是类似"},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Visual Studio"}]},{"type":"text","value":"的样式（"},{"type":"element","tagName":"a","properties":{"href":"https://github.com/PrismJS/prism-themes"},"children":[{"type":"text","value":"地址"}]},{"type":"text","value":"），如下图："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[]},{"type":"element","tagName":"figure","properties":{"className":["gatsby-resp-image-figure"],"style":""},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 658px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 43.15789473684211%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABM0lEQVQoz32QiW5cIQxF8/+/GFWNUjUz8x54YTNmMWVGSao2Ui5I1yAduPaTZ8eJPDmROnsfrWsbc68xv1dr7QndUa6/S8yU16g6iLOMZXMt29se9tDd7UO7vsP7jeBOeruu09ntyr4ADCkz5VXqsqaWi9aesokMs/kPvE1Suj3/wJ8v+PIKvy7uVGZjp5FUgkxiFQ1hljLWek/0F66lhOth58EgOwHAbEjLvUWf95HYqi4p9xAhWEoW42it9/6Atdbo/ACPUI9jdz0T1sKpcvRe9433E3AiGuCodYrsgc73n1tvKQVkdyI6Js/BR4FIOdwc0QUQQ8rSRUz1M/lH7K6agXaaEDrAIrIVuYWEvAhXipvpn63+P+0qhW/n5gD0chnHOTpg9rwL73oIujscX6SqfwCd0wkK7YomKwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"VS代码高亮样式","title":"VS代码高亮样式","src":"/static/704c01de5d0ee495fdc7ec6a71f5065a/0248a/vs-color-scheme.png","srcSet":["/static/704c01de5d0ee495fdc7ec6a71f5065a/5459c/vs-color-scheme.png 285w","/static/704c01de5d0ee495fdc7ec6a71f5065a/2cee3/vs-color-scheme.png 570w","/static/704c01de5d0ee495fdc7ec6a71f5065a/0248a/vs-color-scheme.png 658w"],"sizes":["(max-width:","658px)","100vw,","658px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"figcaption","properties":{"className":["gatsby-resp-image-figcaption"]},"children":[{"type":"text","value":"VS代码高亮样式"}]},{"type":"text","value":"\n  "}]},{"type":"element","tagName":"p","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"看起来还是蛮不错的，但是它是浅色的，放在黑色背景下很瞎眼。所以这让我去找暗色的配色方案。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"通过寻找，我也成功找到了一个"},{"type":"element","tagName":"a","properties":{"href":"http://templarian.com/2018/08/08/prismjs-visual-studio-code-dark-theme/"},"children":[{"type":"text","value":"类似VSCode默认的暗色配色（dark+）的方案"}]},{"type":"text","value":"。把它下载下来后，经过一些魔改（设置背景色、字体优先"},{"type":"element","tagName":"a","properties":{"href":"https://github.com/microsoft/cascadia-code"},"children":[{"type":"text","value":"Cascadia Code"}]},{"type":"text","value":"等），就成功用到网站上了。效果如下（下面是张图片）：类似"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[]},{"type":"element","tagName":"figure","properties":{"className":["gatsby-resp-image-figure"],"style":""},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 931px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 40%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABGklEQVQoz6WSa26DMBCEuQ/YxjZ+AMHEQGiSqlLVC/T+p5iuXWjS55/+GK0YzOedXQo3zujXK/oxwg9H1EpDcA5WVWCMfVRO3jcJQe9LuHDC9PyK/vSCwocj4uWKOEUMcYY7BDTW5cOcCwjBSeJ3EVjqBsZ3VC0KKWv0zmMaIubzA6bHJ4T1grCsdEnAuCxw3QClVAZ87TJ7W5KqLFGkOLWo0XYjuukM3w8wRsM6A+cNGrosjYFzdgPcw/gtQWJloJQSh3aAdy63X0sFSVElHVJUtRTk6w1MAP459g7NwPSQ4iRY33kY6lC7FlZLtI3aJPOMGtJ7dz9Hz8AEs9Zmo6pYnscej90p+6S/FpSBaYvp42r/Tf6hkpbyBhkF/WNOvCFBAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"VSCode Dark+ Cascadia Code","title":"VSCode Dark+ Cascadia Code","src":"/static/4a580e51dfe8e311ad6dc28b2591ac9d/574bd/vscode-color-scheme.png","srcSet":["/static/4a580e51dfe8e311ad6dc28b2591ac9d/5459c/vscode-color-scheme.png 285w","/static/4a580e51dfe8e311ad6dc28b2591ac9d/2cee3/vscode-color-scheme.png 570w","/static/4a580e51dfe8e311ad6dc28b2591ac9d/574bd/vscode-color-scheme.png 931w"],"sizes":["(max-width:","931px)","100vw,","931px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"figcaption","properties":{"className":["gatsby-resp-image-figcaption"]},"children":[{"type":"text","value":"VSCode Dark+ Cascadia Code"}]},{"type":"text","value":"\n  "}]},{"type":"element","tagName":"p","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"不足"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"其实我的本意是像其他很多网站一样，可以在暗色模式和浅色模式中切换的。但是由于我的样式是使用的SCSS，各种颜色是使用的SCSS的"},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"变量"}]},{"type":"text","value":"功能，而SCSS其在网站构建的时候被编译成CSS（就像TypeScript在构建的时候被编译JavaScript一样），这些变量的信息就丢失了，编程出来的CSS里就是写死的颜色。要做到可以动态切换，有两种办法："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"使用"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"CSS Variables"}]},{"type":"text","value":"功能（"},{"type":"element","tagName":"a","properties":{"href":"https://developer.mozilla.org/en-US/docs/Web/CSS/var"},"children":[{"type":"text","value":"MDN"}]},{"type":"text","value":"），即使在SCSS中，首先把所有的SCSS变量设置成CSS variables，然后使用单独的CSS类来设置各个CSS Variables，以此来实现动态切换颜色"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"写多份SCSS文件，每份文件设置一个颜色主题，然后编译的时候产生多个CSS文件，然后通过引用不同的CSS来实现的颜色切换。这个只是理论可行，实际代码上怎么写没有试过。"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"其实第一种方法的可行性挺高的，但是就像我在之前博客总结的一样，我的博客的样式方面的代码就是一团乱麻：有的样式是写成scss的，有的样式是用"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"styled-components"}]},{"type":"text","value":"写的，而二者的互操作性又基本为0，所以造成了"},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"样式同步"}]},{"type":"text","value":"的问题："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"styled-components"}]},{"type":"text","value":"无法使用"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"scss"}]},{"type":"text","value":"的变量，使得有的常量定义在SCSS中，有的定义在ts文件中（"},{"type":"element","tagName":"a","properties":{"href":"https://github.com/ddadaal/ddadaal.me/blob/master/src/styles/variables.scss"},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"variables.scss"}]}]},{"type":"text","value":"和"},{"type":"element","tagName":"a","properties":{"href":"https://github.com/ddadaal/ddadaal.me/blob/master/src/styles/variables.ts"},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"variables.ts"}]}]},{"type":"text","value":"）。但是有点常量又是公用的，所以只能在ts和SCSS都定义一次，这又不能做到修改一处全局生效（例如这次修改暗色模式的之后，文章列表中每一个文章的标题仍然是黑色的，因为这些标签的样式是用"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"styled-components"}]},{"type":"text","value":"，并不能和SCSS中定义的颜色相同步）"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"这次更新我也对代码做了一些很有限的重构（例如把文章列表的每一个文章项的样式的风格写成了SCSS ("},{"type":"element","tagName":"a","properties":{"href":"https://github.com/ddadaal/ddadaal.me/blob/master/src/components/Article/ArticleItem/article-item.scss"},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"article-item.scss"}]}]},{"type":"text","value":")，并且在其中引用"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"variables.scss"}]},{"type":"text","value":"中定义的颜色。这样，修改"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"variables.scss"}]},{"type":"text","value":"之后，文章项的样式也能自动同步）。但是这是治标不治本的，并没有解决我的样式代码过于混乱的问题。我希望在以后能够完全使用一个统一的框架和规范来编写我的样式，从而不仅提高代码的可维护性，也能实现诸如主题切换这种功能。"}]}],"data":{"quirksMode":false}},"headings":[{"depth":1,"value":"为什么一直没有暗色模式？","slug":"为什么一直没有暗色模式？"},{"depth":1,"value":"有哪些修改？","slug":"有哪些修改？"},{"depth":2,"value":"背景色、文字颜色","slug":"背景色、文字颜色"},{"depth":2,"value":"代码块的颜色","slug":"代码块的颜色"},{"depth":1,"value":"不足","slug":"不足"}]}},"staticQueryHashes":["3830103294"]}